<head>
  <style>
    .log { font-family: "Courier New", Consolas, monospace; font-size: 80%; }
    .test-failed { background-color: #ffaaaa; }
    .test-passed { background-color: #aaffaa; }
  </style>
</head>
<body>
<h3><a href="https://github.com/zachjs/sv2v" target="_blank">zachjs-sv2v</a></h3>
<pre class="test-passed">
description: Full ibex core test
should_fail: 0
tags: ibex
incdirs: /home/travis/build/SymbiFlow/sv-tests/third_party/cores/ibex/rtl
top_module: 
files: <a href="../../../../third_party/cores/ibex/examples/sim/rtl/prim_clock_gating.sv.html" target="file-frame">third_party/cores/ibex/examples/sim/rtl/prim_clock_gating.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_pkg.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_pkg.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_alu.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_alu.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_compressed_decoder.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_compressed_decoder.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_controller.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_controller.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_cs_registers.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_cs_registers.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_decoder.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_decoder.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_ex_block.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_ex_block.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_id_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_id_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_if_stage.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_if_stage.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_load_store_unit.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_load_store_unit.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_multdiv_slow.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_multdiv_slow.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_multdiv_fast.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_multdiv_fast.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_prefetch_buffer.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_prefetch_buffer.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_fetch_fifo.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_fetch_fifo.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_pmp.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_pmp.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_core.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_core.sv</a> <a href="../../../../third_party/cores/ibex/rtl/ibex_register_file_ff.sv.html" target="file-frame">third_party/cores/ibex/rtl/ibex_register_file_ff.sv</a>
time_elapsed: 7.164s
</pre>
<pre class="log">

module prim_clock_gating (
	clk_i,
	en_i,
	test_en_i,
	clk_o
);
	input clk_i;
	input en_i;
	input test_en_i;
	output wire clk_o;
	reg clk_en;
	always_latch if ((clk_i == 1&#39;b0))
		clk_en &lt;= (en_i | test_en_i);
	assign clk_o = (clk_i &amp; clk_en);
endmodule
module ibex_alu (
	operator_i,
	operand_a_i,
	operand_b_i,
	multdiv_operand_a_i,
	multdiv_operand_b_i,
	multdiv_en_i,
	adder_result_o,
	adder_result_ext_o,
	result_o,
	comparison_result_o,
	is_equal_result_o
);
	input wire [4:0] operator_i;
	input wire [31:0] operand_a_i;
	input wire [31:0] operand_b_i;
	input wire [32:0] multdiv_operand_a_i;
	input wire [32:0] multdiv_operand_b_i;
	input wire multdiv_en_i;
	output wire [31:0] adder_result_o;
	output wire [33:0] adder_result_ext_o;
	output reg [31:0] result_o;
	output wire comparison_result_o;
	output wire is_equal_result_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	wire [31:0] operand_a_rev;
	wire [32:0] operand_b_neg;
	generate
		genvar gen_rev_operand_a_k;
		for (gen_rev_operand_a_k = 0; (gen_rev_operand_a_k &lt; 32); gen_rev_operand_a_k = (gen_rev_operand_a_k + 1)) begin : gen_rev_operand_a
			assign operand_a_rev[gen_rev_operand_a_k] = operand_a_i[(31 - gen_rev_operand_a_k)];
		end
	endgenerate
	reg adder_op_b_negate;
	wire [32:0] adder_in_a;
	wire [32:0] adder_in_b;
	wire [31:0] adder_result;
	always @(*) begin
		adder_op_b_negate = 1&#39;b0;
		case (operator_i)
			ALU_SUB, ALU_EQ, ALU_NE, ALU_GTU, ALU_GEU, ALU_LTU, ALU_LEU, ALU_GT, ALU_GE, ALU_LT, ALU_LE, ALU_SLT, ALU_SLTU, ALU_SLET, ALU_SLETU: adder_op_b_negate = 1&#39;b1;
			default: ;
		endcase
	end
	assign adder_in_a = (multdiv_en_i ? multdiv_operand_a_i : {operand_a_i, 1&#39;b1});
	assign operand_b_neg = ({operand_b_i, 1&#39;b0} ^ {33 {adder_op_b_negate}});
	assign adder_in_b = (multdiv_en_i ? multdiv_operand_b_i : operand_b_neg);
	assign adder_result_ext_o = ($unsigned(adder_in_a) + $unsigned(adder_in_b));
	assign adder_result = adder_result_ext_o[32:1];
	assign adder_result_o = adder_result;
	wire shift_left;
	wire shift_arithmetic;
	wire [4:0] shift_amt;
	wire [31:0] shift_op_a;
	wire [31:0] shift_result;
	wire [31:0] shift_right_result;
	wire [31:0] shift_left_result;
	assign shift_amt = operand_b_i[4:0];
	assign shift_left = (operator_i == ALU_SLL);
	assign shift_arithmetic = (operator_i == ALU_SRA);
	assign shift_op_a = (shift_left ? operand_a_rev : operand_a_i);
	wire [32:0] shift_op_a_32;
	assign shift_op_a_32 = {(shift_arithmetic &amp; shift_op_a[31]), shift_op_a};
	wire signed [32:0] shift_right_result_signed;
	wire [32:0] shift_right_result_ext;
	assign shift_right_result_signed = ($signed(shift_op_a_32) &gt;&gt;&gt; shift_amt[4:0]);
	assign shift_right_result_ext = $unsigned(shift_right_result_signed);
	assign shift_right_result = shift_right_result_ext[31:0];
	generate
		genvar gen_rev_shift_right_result_j;
		for (gen_rev_shift_right_result_j = 0; (gen_rev_shift_right_result_j &lt; 32); gen_rev_shift_right_result_j = (gen_rev_shift_right_result_j + 1)) begin : gen_rev_shift_right_result
			assign shift_left_result[gen_rev_shift_right_result_j] = shift_right_result[(31 - gen_rev_shift_right_result_j)];
		end
	endgenerate
	assign shift_result = (shift_left ? shift_left_result : shift_right_result);
	wire is_equal;
	reg is_greater_equal;
	reg cmp_signed;
	always @(*) begin
		cmp_signed = 1&#39;b0;
		case (operator_i)
			ALU_GT, ALU_GE, ALU_LT, ALU_LE, ALU_SLT, ALU_SLET: cmp_signed = 1&#39;b1;
			default: ;
		endcase
	end
	assign is_equal = (adder_result == 32&#39;b0);
	assign is_equal_result_o = is_equal;
	always @(*)
		if (((operand_a_i[31] ^ operand_b_i[31]) == 1&#39;b0))
			is_greater_equal = (adder_result[31] == 1&#39;b0);
		else
			is_greater_equal = (operand_a_i[31] ^ cmp_signed);
	reg cmp_result;
	always @(*) begin
		cmp_result = is_equal;
		case (operator_i)
			ALU_EQ: cmp_result = is_equal;
			ALU_NE: cmp_result = ~is_equal;
			ALU_GT, ALU_GTU: cmp_result = (is_greater_equal &amp; ~is_equal);
			ALU_GE, ALU_GEU: cmp_result = is_greater_equal;
			ALU_LT, ALU_SLT, ALU_LTU, ALU_SLTU: cmp_result = ~is_greater_equal;
			ALU_SLET, ALU_SLETU, ALU_LE, ALU_LEU: cmp_result = (~is_greater_equal | is_equal);
			default: ;
		endcase
	end
	assign comparison_result_o = cmp_result;
	always @(*) begin
		result_o = 1&#39;sb0;
		case (operator_i)
			ALU_AND: result_o = (operand_a_i &amp; operand_b_i);
			ALU_OR: result_o = (operand_a_i | operand_b_i);
			ALU_XOR: result_o = (operand_a_i ^ operand_b_i);
			ALU_ADD, ALU_SUB: result_o = adder_result;
			ALU_SLL, ALU_SRL, ALU_SRA: result_o = shift_result;
			ALU_EQ, ALU_NE, ALU_GTU, ALU_GEU, ALU_LTU, ALU_LEU, ALU_GT, ALU_GE, ALU_LT, ALU_LE, ALU_SLT, ALU_SLTU, ALU_SLET, ALU_SLETU: result_o = {31&#39;h0, cmp_result};
			default: ;
		endcase
	end
endmodule
module ibex_compressed_decoder (
	instr_i,
	instr_o,
	is_compressed_o,
	illegal_instr_o
);
	input wire [31:0] instr_i;
	output reg [31:0] instr_o;
	output wire is_compressed_o;
	output reg illegal_instr_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	always @(*) begin
		illegal_instr_o = 1&#39;b0;
		instr_o = 1&#39;sbX;
		case (instr_i[1:0])
			2&#39;b00:
				case (instr_i[15:13])
					3&#39;b000: begin
						instr_o = {2&#39;b0, instr_i[10:7], instr_i[12:11], instr_i[5], instr_i[6], 2&#39;b00, 5&#39;h02, 3&#39;b000, 2&#39;b01, instr_i[4:2], OPCODE_OP_IMM};
						if ((instr_i[12:5] == 8&#39;b0))
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b010: instr_o = {5&#39;b0, instr_i[5], instr_i[12:10], instr_i[6], 2&#39;b00, 2&#39;b01, instr_i[9:7], 3&#39;b010, 2&#39;b01, instr_i[4:2], OPCODE_LOAD};
					3&#39;b110: instr_o = {5&#39;b0, instr_i[5], instr_i[12], 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b010, instr_i[11:10], instr_i[6], 2&#39;b00, OPCODE_STORE};
					default: illegal_instr_o = 1&#39;b1;
				endcase
			2&#39;b01:
				case (instr_i[15:13])
					3&#39;b000: instr_o = {{6 {instr_i[12]}}, instr_i[12], instr_i[6:2], instr_i[11:7], 3&#39;b0, instr_i[11:7], OPCODE_OP_IMM};
					3&#39;b001, 3&#39;b101: instr_o = {instr_i[12], instr_i[8], instr_i[10:9], instr_i[6], instr_i[7], instr_i[2], instr_i[11], instr_i[5:3], {9 {instr_i[12]}}, 4&#39;b0, ~instr_i[15], OPCODE_JAL};
					3&#39;b010: instr_o = {{6 {instr_i[12]}}, instr_i[12], instr_i[6:2], 5&#39;b0, 3&#39;b0, instr_i[11:7], OPCODE_OP_IMM};
					3&#39;b011: begin
						instr_o = {{15 {instr_i[12]}}, instr_i[6:2], instr_i[11:7], OPCODE_LUI};
						if ((instr_i[11:7] == 5&#39;h02))
							instr_o = {{3 {instr_i[12]}}, instr_i[4:3], instr_i[5], instr_i[2], instr_i[6], 4&#39;b0, 5&#39;h02, 3&#39;b000, 5&#39;h02, OPCODE_OP_IMM};
						if (({instr_i[12], instr_i[6:2]} == 6&#39;b0))
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b100:
						case (instr_i[11:10])
							2&#39;b00, 2&#39;b01: begin
								instr_o = {1&#39;b0, instr_i[10], 5&#39;b0, instr_i[6:2], 2&#39;b01, instr_i[9:7], 3&#39;b101, 2&#39;b01, instr_i[9:7], OPCODE_OP_IMM};
								if ((instr_i[12] == 1&#39;b1))
									illegal_instr_o = 1&#39;b1;
							end
							2&#39;b10: instr_o = {{6 {instr_i[12]}}, instr_i[12], instr_i[6:2], 2&#39;b01, instr_i[9:7], 3&#39;b111, 2&#39;b01, instr_i[9:7], OPCODE_OP_IMM};
							2&#39;b11:
								case ({instr_i[12], instr_i[6:5]})
									3&#39;b000: instr_o = {2&#39;b01, 5&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b000, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b001: instr_o = {7&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b100, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b010: instr_o = {7&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b110, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b011: instr_o = {7&#39;b0, 2&#39;b01, instr_i[4:2], 2&#39;b01, instr_i[9:7], 3&#39;b111, 2&#39;b01, instr_i[9:7], OPCODE_OP};
									3&#39;b100, 3&#39;b101, 3&#39;b110, 3&#39;b111: illegal_instr_o = 1&#39;b1;
									default: illegal_instr_o = 1&#39;bX;
								endcase
							default: illegal_instr_o = 1&#39;bX;
						endcase
					3&#39;b110, 3&#39;b111: instr_o = {{4 {instr_i[12]}}, instr_i[6:5], instr_i[2], 5&#39;b0, 2&#39;b01, instr_i[9:7], 2&#39;b00, instr_i[13], instr_i[11:10], instr_i[4:3], instr_i[12], OPCODE_BRANCH};
					default: illegal_instr_o = 1&#39;bX;
				endcase
			2&#39;b10:
				case (instr_i[15:13])
					3&#39;b000: begin
						instr_o = {7&#39;b0, instr_i[6:2], instr_i[11:7], 3&#39;b001, instr_i[11:7], OPCODE_OP_IMM};
						if ((instr_i[12] == 1&#39;b1))
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b010: begin
						instr_o = {4&#39;b0, instr_i[3:2], instr_i[12], instr_i[6:4], 2&#39;b00, 5&#39;h02, 3&#39;b010, instr_i[11:7], OPCODE_LOAD};
						if ((instr_i[11:7] == 5&#39;b0))
							illegal_instr_o = 1&#39;b1;
					end
					3&#39;b100:
						if ((instr_i[12] == 1&#39;b0))
							if ((instr_i[6:2] != 5&#39;b0))
								instr_o = {7&#39;b0, instr_i[6:2], 5&#39;b0, 3&#39;b0, instr_i[11:7], OPCODE_OP};
							else begin
								instr_o = {12&#39;b0, instr_i[11:7], 3&#39;b0, 5&#39;b0, OPCODE_JALR};
								if ((instr_i[11:7] == 5&#39;b0))
									illegal_instr_o = 1&#39;b1;
							end
						else if ((instr_i[6:2] != 5&#39;b0))
							instr_o = {7&#39;b0, instr_i[6:2], instr_i[11:7], 3&#39;b0, instr_i[11:7], OPCODE_OP};
						else if ((instr_i[11:7] == 5&#39;b0))
							instr_o = 32&#39;h00_10_00_73;
						else
							instr_o = {12&#39;b0, instr_i[11:7], 3&#39;b000, 5&#39;b00001, OPCODE_JALR};
					3&#39;b110: instr_o = {4&#39;b0, instr_i[8:7], instr_i[12], instr_i[6:2], 5&#39;h02, 3&#39;b010, instr_i[11:9], 2&#39;b00, OPCODE_STORE};
					3&#39;b001, 3&#39;b011, 3&#39;b101, 3&#39;b111: illegal_instr_o = 1&#39;b1;
					default: illegal_instr_o = 1&#39;bX;
				endcase
			default: instr_o = instr_i;
		endcase
	end
	assign is_compressed_o = (instr_i[1:0] != 2&#39;b11);
endmodule
module ibex_controller (
	clk_i,
	rst_ni,
	fetch_enable_i,
	ctrl_busy_o,
	first_fetch_o,
	illegal_insn_i,
	ecall_insn_i,
	mret_insn_i,
	dret_insn_i,
	wfi_insn_i,
	ebrk_insn_i,
	csr_pipe_flush_i,
	instr_valid_i,
	instr_i,
	instr_compressed_i,
	instr_is_compressed_i,
	instr_fetch_err_i,
	pc_id_i,
	instr_valid_clear_o,
	id_in_ready_o,
	instr_req_o,
	pc_set_o,
	pc_mux_o,
	exc_pc_mux_o,
	exc_cause_o,
	lsu_addr_last_i,
	load_err_i,
	store_err_i,
	branch_set_i,
	jump_set_i,
	csr_mstatus_mie_i,
	csr_msip_i,
	csr_mtip_i,
	csr_meip_i,
	csr_mfip_i,
	irq_pending_i,
	irq_nm_i,
	debug_req_i,
	debug_cause_o,
	debug_csr_save_o,
	debug_mode_o,
	debug_single_step_i,
	debug_ebreakm_i,
	csr_save_if_o,
	csr_save_id_o,
	csr_restore_mret_id_o,
	csr_save_cause_o,
	csr_mtval_o,
	stall_lsu_i,
	stall_multdiv_i,
	stall_jump_i,
	stall_branch_i,
	perf_jump_o,
	perf_tbranch_o
);
	localparam [3:0] RESET = 0;
	localparam [3:0] BOOT_SET = 1;
	localparam [3:0] WAIT_SLEEP = 2;
	localparam [3:0] SLEEP = 3;
	localparam [3:0] FIRST_FETCH = 4;
	localparam [3:0] DECODE = 5;
	localparam [3:0] FLUSH = 6;
	localparam [3:0] IRQ_TAKEN = 7;
	localparam [3:0] DBG_TAKEN_IF = 8;
	localparam [3:0] DBG_TAKEN_ID = 9;
	input wire clk_i;
	input wire rst_ni;
	input wire fetch_enable_i;
	output reg ctrl_busy_o;
	output reg first_fetch_o;
	input wire illegal_insn_i;
	input wire ecall_insn_i;
	input wire mret_insn_i;
	input wire dret_insn_i;
	input wire wfi_insn_i;
	input wire ebrk_insn_i;
	input wire csr_pipe_flush_i;
	input wire instr_valid_i;
	input wire [31:0] instr_i;
	input wire [15:0] instr_compressed_i;
	input wire instr_is_compressed_i;
	input wire instr_fetch_err_i;
	input wire [31:0] pc_id_i;
	output wire instr_valid_clear_o;
	output wire id_in_ready_o;
	output reg instr_req_o;
	output reg pc_set_o;
	output reg [2:0] pc_mux_o;
	output reg [1:0] exc_pc_mux_o;
	output reg [5:0] exc_cause_o;
	input wire [31:0] lsu_addr_last_i;
	input wire load_err_i;
	input wire store_err_i;
	input wire branch_set_i;
	input wire jump_set_i;
	input wire csr_mstatus_mie_i;
	input wire csr_msip_i;
	input wire csr_mtip_i;
	input wire csr_meip_i;
	input wire [14:0] csr_mfip_i;
	input wire irq_pending_i;
	input wire irq_nm_i;
	input wire debug_req_i;
	output reg [2:0] debug_cause_o;
	output reg debug_csr_save_o;
	output wire debug_mode_o;
	input wire debug_single_step_i;
	input wire debug_ebreakm_i;
	output reg csr_save_if_o;
	output reg csr_save_id_o;
	output reg csr_restore_mret_id_o;
	output reg csr_save_cause_o;
	output reg [31:0] csr_mtval_o;
	input wire stall_lsu_i;
	input wire stall_multdiv_i;
	input wire stall_jump_i;
	input wire stall_branch_i;
	output reg perf_jump_o;
	output reg perf_tbranch_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	reg [3:0] ctrl_fsm_cs;
	reg [3:0] ctrl_fsm_ns;
	reg nmi_mode_q;
	reg nmi_mode_d;
	reg debug_mode_q;
	reg debug_mode_d;
	reg load_err_q;
	wire load_err_d;
	reg store_err_q;
	wire store_err_d;
	wire stall;
	reg halt_if;
	reg halt_id;
	wire illegal_dret;
	wire illegal_insn;
	wire exc_req;
	wire exc_req_lsu;
	wire special_req;
	wire enter_debug_mode;
	wire handle_irq;
	reg [3:0] mfip_id;
	wire unused_csr_mtip;
	always @(negedge clk_i)
		if ((((ctrl_fsm_cs == DECODE) &amp;&amp; instr_valid_i) &amp;&amp; illegal_insn))
			$display(&#34;%t: Illegal instruction (hart %0x) at PC 0x%h: 0x%h&#34;, $time, ibex_core.hart_id_i, ibex_id_stage.pc_id_i, ibex_id_stage.instr_rdata_i);
	assign load_err_d = load_err_i;
	assign store_err_d = store_err_i;
	assign illegal_dret = (dret_insn_i &amp; ~debug_mode_q);
	assign illegal_insn = (illegal_insn_i | illegal_dret);
	assign exc_req = (((ecall_insn_i | ebrk_insn_i) | illegal_insn) | instr_fetch_err_i);
	assign exc_req_lsu = (store_err_i | load_err_i);
	assign special_req = (((((mret_insn_i | dret_insn_i) | wfi_insn_i) | csr_pipe_flush_i) | exc_req) | exc_req_lsu);
	assign enter_debug_mode = (debug_req_i &amp; ~debug_mode_q);
	assign handle_irq = (~debug_mode_q &amp; ((irq_nm_i &amp; ~nmi_mode_q) | (irq_pending_i &amp; csr_mstatus_mie_i)));
	always @(*) begin : gen_mfip_id
		if (csr_mfip_i[14])
			mfip_id = 4&#39;d14;
		else if (csr_mfip_i[13])
			mfip_id = 4&#39;d13;
		else if (csr_mfip_i[12])
			mfip_id = 4&#39;d12;
		else if (csr_mfip_i[11])
			mfip_id = 4&#39;d11;
		else if (csr_mfip_i[10])
			mfip_id = 4&#39;d10;
		else if (csr_mfip_i[9])
			mfip_id = 4&#39;d9;
		else if (csr_mfip_i[8])
			mfip_id = 4&#39;d8;
		else if (csr_mfip_i[7])
			mfip_id = 4&#39;d7;
		else if (csr_mfip_i[6])
			mfip_id = 4&#39;d6;
		else if (csr_mfip_i[5])
			mfip_id = 4&#39;d5;
		else if (csr_mfip_i[5])
			mfip_id = 4&#39;d5;
		else if (csr_mfip_i[4])
			mfip_id = 4&#39;d4;
		else if (csr_mfip_i[3])
			mfip_id = 4&#39;d3;
		else if (csr_mfip_i[2])
			mfip_id = 4&#39;d2;
		else if (csr_mfip_i[1])
			mfip_id = 4&#39;d1;
		else
			mfip_id = 4&#39;d0;
	end
	assign unused_csr_mtip = csr_mtip_i;
	always @(*) begin
		instr_req_o = 1&#39;b1;
		csr_save_if_o = 1&#39;b0;
		csr_save_id_o = 1&#39;b0;
		csr_restore_mret_id_o = 1&#39;b0;
		csr_save_cause_o = 1&#39;b0;
		csr_mtval_o = 1&#39;sb0;
		pc_mux_o = PC_BOOT;
		pc_set_o = 1&#39;b0;
		exc_pc_mux_o = EXC_PC_IRQ;
		exc_cause_o = EXC_CAUSE_INSN_ADDR_MISA;
		ctrl_fsm_ns = ctrl_fsm_cs;
		ctrl_busy_o = 1&#39;b1;
		first_fetch_o = 1&#39;b0;
		halt_if = 1&#39;b0;
		halt_id = 1&#39;b0;
		debug_csr_save_o = 1&#39;b0;
		debug_cause_o = DBG_CAUSE_EBREAK;
		debug_mode_d = debug_mode_q;
		nmi_mode_d = 1&#39;b0;
		perf_tbranch_o = 1&#39;b0;
		perf_jump_o = 1&#39;b0;
		case (ctrl_fsm_cs)
			RESET: begin
				instr_req_o = 1&#39;b0;
				pc_mux_o = PC_BOOT;
				pc_set_o = 1&#39;b1;
				if (fetch_enable_i)
					ctrl_fsm_ns = BOOT_SET;
			end
			BOOT_SET: begin
				instr_req_o = 1&#39;b1;
				pc_mux_o = PC_BOOT;
				pc_set_o = 1&#39;b1;
				ctrl_fsm_ns = FIRST_FETCH;
			end
			WAIT_SLEEP: begin
				ctrl_busy_o = 1&#39;b0;
				instr_req_o = 1&#39;b0;
				halt_if = 1&#39;b1;
				halt_id = 1&#39;b1;
				ctrl_fsm_ns = SLEEP;
			end
			SLEEP: begin
				ctrl_busy_o = 1&#39;b0;
				instr_req_o = 1&#39;b0;
				halt_if = 1&#39;b1;
				halt_id = 1&#39;b1;
				if (((((irq_nm_i || irq_pending_i) || debug_req_i) || debug_mode_q) || debug_single_step_i))
					ctrl_fsm_ns = FIRST_FETCH;
			end
			FIRST_FETCH: begin
				first_fetch_o = 1&#39;b1;
				if (id_in_ready_o)
					ctrl_fsm_ns = DECODE;
				if (handle_irq) begin
					ctrl_fsm_ns = IRQ_TAKEN;
					halt_if = 1&#39;b1;
					halt_id = 1&#39;b1;
				end
				if (enter_debug_mode) begin
					ctrl_fsm_ns = DBG_TAKEN_IF;
					halt_if = 1&#39;b1;
					halt_id = 1&#39;b1;
				end
			end
			DECODE: begin
				if (instr_valid_i) begin
					if ((branch_set_i || jump_set_i)) begin
						pc_mux_o = PC_JUMP;
						pc_set_o = 1&#39;b1;
						perf_tbranch_o = branch_set_i;
						perf_jump_o = jump_set_i;
					end
					else if (special_req) begin
						ctrl_fsm_ns = FLUSH;
						halt_if = 1&#39;b1;
						halt_id = 1&#39;b1;
					end
					if (((enter_debug_mode || handle_irq) &amp;&amp; stall))
						halt_if = 1&#39;b1;
					if ((debug_single_step_i &amp;&amp; !debug_mode_q)) begin
						halt_if = 1&#39;b1;
						if ((!special_req &amp;&amp; !stall))
							ctrl_fsm_ns = DBG_TAKEN_IF;
					end
				end
				if ((!stall &amp;&amp; !special_req))
					if (enter_debug_mode) begin
						ctrl_fsm_ns = DBG_TAKEN_IF;
						halt_if = 1&#39;b1;
						halt_id = 1&#39;b1;
					end
					else if (handle_irq) begin
						ctrl_fsm_ns = IRQ_TAKEN;
						halt_if = 1&#39;b1;
						halt_id = 1&#39;b1;
					end
			end
			IRQ_TAKEN: begin
				if (handle_irq) begin
					pc_mux_o = PC_EXC;
					pc_set_o = 1&#39;b1;
					exc_pc_mux_o = EXC_PC_IRQ;
					csr_save_if_o = 1&#39;b1;
					csr_save_cause_o = 1&#39;b1;
					if ((irq_nm_i &amp;&amp; !nmi_mode_q)) begin
						exc_cause_o = EXC_CAUSE_IRQ_NM;
						nmi_mode_d = 1&#39;b1;
					end
					else if ((csr_mfip_i != 15&#39;b0))
						exc_cause_o = {2&#39;b11, mfip_id};
					else if (csr_meip_i)
						exc_cause_o = EXC_CAUSE_IRQ_EXTERNAL_M;
					else if (csr_msip_i)
						exc_cause_o = EXC_CAUSE_IRQ_SOFTWARE_M;
					else
						exc_cause_o = EXC_CAUSE_IRQ_TIMER_M;
				end
				ctrl_fsm_ns = DECODE;
			end
			DBG_TAKEN_IF: begin
				if ((debug_single_step_i || debug_req_i)) begin
					pc_mux_o = PC_EXC;
					pc_set_o = 1&#39;b1;
					exc_pc_mux_o = EXC_PC_DBD;
					csr_save_if_o = 1&#39;b1;
					debug_csr_save_o = 1&#39;b1;
					csr_save_cause_o = 1&#39;b1;
					if (debug_single_step_i)
						debug_cause_o = DBG_CAUSE_STEP;
					else
						debug_cause_o = DBG_CAUSE_HALTREQ;
					debug_mode_d = 1&#39;b1;
				end
				ctrl_fsm_ns = DECODE;
			end
			DBG_TAKEN_ID: begin
				if (ebrk_insn_i) begin
					pc_mux_o = PC_EXC;
					pc_set_o = 1&#39;b1;
					exc_pc_mux_o = EXC_PC_DBD;
					if ((debug_ebreakm_i &amp;&amp; !debug_mode_q)) begin
						csr_save_cause_o = 1&#39;b1;
						csr_save_id_o = 1&#39;b1;
						debug_csr_save_o = 1&#39;b1;
						debug_cause_o = DBG_CAUSE_EBREAK;
					end
					debug_mode_d = 1&#39;b1;
				end
				ctrl_fsm_ns = DECODE;
			end
			FLUSH: begin
				halt_if = 1&#39;b1;
				halt_id = 1&#39;b1;
				ctrl_fsm_ns = DECODE;
				if (((exc_req || store_err_q) || load_err_q)) begin
					pc_set_o = 1&#39;b1;
					pc_mux_o = PC_EXC;
					exc_pc_mux_o = (debug_mode_q ? EXC_PC_DBG_EXC : EXC_PC_EXC);
					csr_save_id_o = 1&#39;b1;
					csr_save_cause_o = 1&#39;b1;
					if (instr_fetch_err_i) begin
						exc_cause_o = EXC_CAUSE_INSTR_ACCESS_FAULT;
						csr_mtval_o = pc_id_i;
					end
					else if (illegal_insn) begin
						exc_cause_o = EXC_CAUSE_ILLEGAL_INSN;
						csr_mtval_o = (instr_is_compressed_i ? {16&#39;b0, instr_compressed_i} : instr_i);
					end
					else if (ecall_insn_i)
						exc_cause_o = EXC_CAUSE_ECALL_MMODE;
					else if (ebrk_insn_i)
						if (debug_mode_q) begin
							pc_set_o = 1&#39;b0;
							csr_save_id_o = 1&#39;b0;
							csr_save_cause_o = 1&#39;b0;
							ctrl_fsm_ns = DBG_TAKEN_ID;
						end
						else if (debug_ebreakm_i) begin
							pc_set_o = 1&#39;b0;
							csr_save_id_o = 1&#39;b0;
							csr_save_cause_o = 1&#39;b0;
							ctrl_fsm_ns = DBG_TAKEN_ID;
						end
						else
							exc_cause_o = EXC_CAUSE_BREAKPOINT;
					else if (store_err_q) begin
						exc_cause_o = EXC_CAUSE_STORE_ACCESS_FAULT;
						csr_mtval_o = lsu_addr_last_i;
					end
					else if (load_err_q) begin
						exc_cause_o = EXC_CAUSE_LOAD_ACCESS_FAULT;
						csr_mtval_o = lsu_addr_last_i;
					end
				end
				else if (mret_insn_i) begin
					pc_mux_o = PC_ERET;
					pc_set_o = 1&#39;b1;
					csr_restore_mret_id_o = 1&#39;b1;
					if (nmi_mode_q)
						nmi_mode_d = 1&#39;b0;
				end
				else if (dret_insn_i) begin
					pc_mux_o = PC_DRET;
					pc_set_o = 1&#39;b1;
					debug_mode_d = 1&#39;b0;
				end
				else if (wfi_insn_i)
					ctrl_fsm_ns = WAIT_SLEEP;
				else if ((csr_pipe_flush_i &amp;&amp; handle_irq))
					ctrl_fsm_ns = IRQ_TAKEN;
				if ((debug_single_step_i &amp;&amp; !debug_mode_q)) begin
					pc_set_o = 1&#39;b0;
					ctrl_fsm_ns = DBG_TAKEN_IF;
				end
			end
			default: begin
			instr_req_o = 1&#39;b0;
			ctrl_fsm_ns = 1&#39;bX;
		end
		endcase
	end
	assign debug_mode_o = debug_mode_q;
	assign stall = (((stall_lsu_i | stall_multdiv_i) | stall_jump_i) | stall_branch_i);
	assign id_in_ready_o = (~stall &amp; ~halt_if);
	assign instr_valid_clear_o = (~stall | halt_id);
	always @(posedge clk_i or negedge rst_ni) begin : update_regs
		if (!rst_ni) begin
			ctrl_fsm_cs &lt;= RESET;
			nmi_mode_q &lt;= 1&#39;b0;
			debug_mode_q &lt;= 1&#39;b0;
			load_err_q &lt;= 1&#39;b0;
			store_err_q &lt;= 1&#39;b0;
		end
		else begin
			ctrl_fsm_cs &lt;= ctrl_fsm_ns;
			nmi_mode_q &lt;= nmi_mode_d;
			debug_mode_q &lt;= debug_mode_d;
			load_err_q &lt;= load_err_d;
			store_err_q &lt;= store_err_d;
		end
	end
endmodule
module ibex_cs_registers (
	clk_i,
	rst_ni,
	hart_id_i,
	priv_mode_o,
	csr_mtvec_o,
	csr_mtvec_init_i,
	boot_addr_i,
	csr_access_i,
	csr_addr_i,
	csr_wdata_i,
	csr_op_i,
	csr_rdata_o,
	irq_software_i,
	irq_timer_i,
	irq_external_i,
	irq_fast_i,
	irq_pending_o,
	csr_msip_o,
	csr_mtip_o,
	csr_meip_o,
	csr_mfip_o,
	csr_mstatus_mie_o,
	csr_mepc_o,
	csr_pmp_cfg_o,
	csr_pmp_addr_o,
	debug_mode_i,
	debug_cause_i,
	debug_csr_save_i,
	csr_depc_o,
	debug_single_step_o,
	debug_ebreakm_o,
	pc_if_i,
	pc_id_i,
	csr_save_if_i,
	csr_save_id_i,
	csr_restore_mret_i,
	csr_save_cause_i,
	csr_mcause_i,
	csr_mtval_i,
	illegal_csr_insn_o,
	instr_new_id_i,
	instr_ret_i,
	instr_ret_compressed_i,
	imiss_i,
	pc_set_i,
	jump_i,
	branch_i,
	branch_taken_i,
	mem_load_i,
	mem_store_i,
	lsu_busy_i
);
	parameter [31:0] MHPMCounterNum = 8;
	parameter [31:0] MHPMCounterWidth = 40;
	parameter PMPEnable = 0;
	parameter [31:0] PMPGranularity = 0;
	parameter [31:0] PMPNumRegions = 4;
	parameter RV32E = 0;
	parameter RV32M = 0;
	input wire clk_i;
	input wire rst_ni;
	input wire [31:0] hart_id_i;
	output wire [1:0] priv_mode_o;
	output wire [31:0] csr_mtvec_o;
	input wire csr_mtvec_init_i;
	input wire [31:0] boot_addr_i;
	input wire csr_access_i;
	input wire [11:0] csr_addr_i;
	input wire [31:0] csr_wdata_i;
	input wire [1:0] csr_op_i;
	output wire [31:0] csr_rdata_o;
	input wire irq_software_i;
	input wire irq_timer_i;
	input wire irq_external_i;
	input wire [14:0] irq_fast_i;
	output wire irq_pending_o;
	output wire csr_msip_o;
	output wire csr_mtip_o;
	output wire csr_meip_o;
	output wire [14:0] csr_mfip_o;
	output wire csr_mstatus_mie_o;
	output wire [31:0] csr_mepc_o;
	output wire [((0 &gt;= (PMPNumRegions - 1)) ? ((((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions) * 6) + (((PMPNumRegions - 1) * 6) - 1)) : (((((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions)) * 6) + -1)):((0 &gt;= (PMPNumRegions - 1)) ? ((PMPNumRegions - 1) * 6) : 0)] csr_pmp_cfg_o;
	output wire [((0 &gt;= (PMPNumRegions - 1)) ? ((((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions) * 34) + (((PMPNumRegions - 1) * 34) - 1)) : (((((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions)) * 34) + -1)):((0 &gt;= (PMPNumRegions - 1)) ? ((PMPNumRegions - 1) * 34) : 0)] csr_pmp_addr_o;
	input wire debug_mode_i;
	input wire [2:0] debug_cause_i;
	input wire debug_csr_save_i;
	output wire [31:0] csr_depc_o;
	output wire debug_single_step_o;
	output wire debug_ebreakm_o;
	input wire [31:0] pc_if_i;
	input wire [31:0] pc_id_i;
	input wire csr_save_if_i;
	input wire csr_save_id_i;
	input wire csr_restore_mret_i;
	input wire csr_save_cause_i;
	input wire [5:0] csr_mcause_i;
	input wire [31:0] csr_mtval_i;
	output wire illegal_csr_insn_o;
	input wire instr_new_id_i;
	input wire instr_ret_i;
	input wire instr_ret_compressed_i;
	input wire imiss_i;
	input wire pc_set_i;
	input wire jump_i;
	input wire branch_i;
	input wire branch_taken_i;
	input wire mem_load_i;
	input wire mem_store_i;
	input wire lsu_busy_i;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [1:0] MXL = 2&#39;d1;
	localparam [31:0] MISA_VALUE = ((((((((((((0 &lt;&lt; 0) | (1 &lt;&lt; 2)) | (0 &lt;&lt; 3)) | (sv2v_cast_32(RV32E) &lt;&lt; 4)) | (0 &lt;&lt; 5)) | (1 &lt;&lt; 8)) | (sv2v_cast_32(RV32M) &lt;&lt; 12)) | (0 &lt;&lt; 13)) | (0 &lt;&lt; 18)) | (0 &lt;&lt; 20)) | (0 &lt;&lt; 23)) | (sv2v_cast_32(MXL) &lt;&lt; 30));
	reg [31:0] exception_pc;
	reg [3:0] mstatus_q;
	reg [3:0] mstatus_d;
	reg [17:0] mie_q;
	reg [17:0] mie_d;
	reg [31:0] mscratch_q;
	reg [31:0] mscratch_d;
	reg [31:0] mepc_q;
	reg [31:0] mepc_d;
	reg [5:0] mcause_q;
	reg [5:0] mcause_d;
	reg [31:0] mtval_q;
	reg [31:0] mtval_d;
	reg [31:0] mtvec_q;
	reg [31:0] mtvec_d;
	wire [17:0] mip;
	reg [31:0] dcsr_q;
	reg [31:0] dcsr_d;
	reg [31:0] depc_q;
	reg [31:0] depc_d;
	reg [31:0] dscratch0_q;
	reg [31:0] dscratch0_d;
	reg [31:0] dscratch1_q;
	reg [31:0] dscratch1_d;
	reg [3:0] mstack_q;
	reg [3:0] mstack_d;
	reg [31:0] mstack_epc_q;
	reg [31:0] mstack_epc_d;
	reg [5:0] mstack_cause_q;
	reg [5:0] mstack_cause_d;
	reg [31:0] pmp_addr_rdata [0:(PMP_MAX_REGIONS - 1)];
	wire [(PMP_CFG_W - 1):0] pmp_cfg_rdata [0:(PMP_MAX_REGIONS - 1)];
	reg [31:0] mcountinhibit_d;
	reg [31:0] mcountinhibit_q;
	wire [31:0] mcountinhibit;
	wire [31:0] mcountinhibit_force;
	reg mcountinhibit_we;
	reg [63:0] mhpmcounter_mask [0:31];
	reg [2047:0] mhpmcounter_d;
	reg [2047:0] mhpmcounter_q;
	reg [31:0] mhpmcounter_we;
	reg [31:0] mhpmcounterh_we;
	reg [31:0] mhpmcounter_incr;
	reg [31:0] mhpmevent [0:31];
	wire [4:0] mhpmcounter_idx;
	reg [31:0] csr_wdata_int;
	reg [31:0] csr_rdata_int;
	wire csr_we_int;
	reg csr_wreq;
	reg illegal_csr;
	wire illegal_csr_priv;
	wire illegal_csr_write;
	wire [7:0] unused_boot_addr;
	assign unused_boot_addr = boot_addr_i[7:0];
	wire [11:0] csr_addr;
	assign csr_addr = csr_addr_i;
	assign mhpmcounter_idx = csr_addr[4:0];
	assign illegal_csr_priv = 1&#39;b0;
	assign illegal_csr_write = ((csr_addr[11:10] == 2&#39;b11) &amp;&amp; csr_wreq);
	assign illegal_csr_insn_o = ((illegal_csr | illegal_csr_write) | illegal_csr_priv);
	assign mip[17:17] = (irq_software_i &amp; mie_q[17:17]);
	assign mip[16:16] = (irq_timer_i &amp; mie_q[16:16]);
	assign mip[15:15] = (irq_external_i &amp; mie_q[15:15]);
	assign mip[14:0] = (irq_fast_i &amp; mie_q[14:0]);
	always @(*) begin
		csr_rdata_int = 1&#39;sb0;
		illegal_csr = 1&#39;b0;
		case (csr_addr_i)
			CSR_MHARTID: csr_rdata_int = hart_id_i;
			CSR_MSTATUS: begin
				csr_rdata_int = 1&#39;sb0;
				csr_rdata_int[CSR_MSTATUS_MIE_BIT] = mstatus_q[3:3];
				csr_rdata_int[CSR_MSTATUS_MPIE_BIT] = mstatus_q[2:2];
				csr_rdata_int[CSR_MSTATUS_MPP_BIT_HIGH:CSR_MSTATUS_MPP_BIT_LOW] = mstatus_q[1:0];
			end
			CSR_MISA: csr_rdata_int = MISA_VALUE;
			CSR_MIE: begin
				csr_rdata_int = 1&#39;sb0;
				csr_rdata_int[CSR_MSIX_BIT] = mie_q[17:17];
				csr_rdata_int[CSR_MTIX_BIT] = mie_q[16:16];
				csr_rdata_int[CSR_MEIX_BIT] = mie_q[15:15];
				csr_rdata_int[CSR_MFIX_BIT_HIGH:CSR_MFIX_BIT_LOW] = mie_q[14:0];
			end
			CSR_MSCRATCH: csr_rdata_int = mscratch_q;
			CSR_MTVEC: csr_rdata_int = mtvec_q;
			CSR_MEPC: csr_rdata_int = mepc_q;
			CSR_MCAUSE: csr_rdata_int = {mcause_q[5], 26&#39;b0, mcause_q[4:0]};
			CSR_MTVAL: csr_rdata_int = mtval_q;
			CSR_MIP: begin
				csr_rdata_int = 1&#39;sb0;
				csr_rdata_int[CSR_MSIX_BIT] = mip[17:17];
				csr_rdata_int[CSR_MTIX_BIT] = mip[16:16];
				csr_rdata_int[CSR_MEIX_BIT] = mip[15:15];
				csr_rdata_int[CSR_MFIX_BIT_HIGH:CSR_MFIX_BIT_LOW] = mip[14:0];
			end
			CSR_PMPCFG0: csr_rdata_int = {pmp_cfg_rdata[3], pmp_cfg_rdata[2], pmp_cfg_rdata[1], pmp_cfg_rdata[0]};
			CSR_PMPCFG1: csr_rdata_int = {pmp_cfg_rdata[7], pmp_cfg_rdata[6], pmp_cfg_rdata[5], pmp_cfg_rdata[4]};
			CSR_PMPCFG2: csr_rdata_int = {pmp_cfg_rdata[11], pmp_cfg_rdata[10], pmp_cfg_rdata[9], pmp_cfg_rdata[8]};
			CSR_PMPCFG3: csr_rdata_int = {pmp_cfg_rdata[15], pmp_cfg_rdata[14], pmp_cfg_rdata[13], pmp_cfg_rdata[12]};
			CSR_PMPADDR0: csr_rdata_int = pmp_addr_rdata[0];
			CSR_PMPADDR1: csr_rdata_int = pmp_addr_rdata[1];
			CSR_PMPADDR2: csr_rdata_int = pmp_addr_rdata[2];
			CSR_PMPADDR3: csr_rdata_int = pmp_addr_rdata[3];
			CSR_PMPADDR4: csr_rdata_int = pmp_addr_rdata[4];
			CSR_PMPADDR5: csr_rdata_int = pmp_addr_rdata[5];
			CSR_PMPADDR6: csr_rdata_int = pmp_addr_rdata[6];
			CSR_PMPADDR7: csr_rdata_int = pmp_addr_rdata[7];
			CSR_PMPADDR8: csr_rdata_int = pmp_addr_rdata[8];
			CSR_PMPADDR9: csr_rdata_int = pmp_addr_rdata[9];
			CSR_PMPADDR10: csr_rdata_int = pmp_addr_rdata[10];
			CSR_PMPADDR11: csr_rdata_int = pmp_addr_rdata[11];
			CSR_PMPADDR12: csr_rdata_int = pmp_addr_rdata[12];
			CSR_PMPADDR13: csr_rdata_int = pmp_addr_rdata[13];
			CSR_PMPADDR14: csr_rdata_int = pmp_addr_rdata[14];
			CSR_PMPADDR15: csr_rdata_int = pmp_addr_rdata[15];
			CSR_DCSR: begin
				csr_rdata_int = dcsr_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_DPC: begin
				csr_rdata_int = depc_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_DSCRATCH0: begin
				csr_rdata_int = dscratch0_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_DSCRATCH1: begin
				csr_rdata_int = dscratch1_q;
				illegal_csr = ~debug_mode_i;
			end
			CSR_MCOUNTINHIBIT: csr_rdata_int = mcountinhibit;
			CSR_MCYCLE: csr_rdata_int = mhpmcounter_q[1984+:32];
			CSR_MCYCLEH: csr_rdata_int = mhpmcounter_q[2016+:32];
			CSR_MINSTRET: csr_rdata_int = mhpmcounter_q[1856+:32];
			CSR_MINSTRETH: csr_rdata_int = mhpmcounter_q[1888+:32];
			default: if (((csr_addr &amp; CSR_MASK_MCOUNTER) == CSR_OFF_MCOUNTER_SETUP)) begin
			csr_rdata_int = mhpmevent[mhpmcounter_idx];
			if ((((csr_addr[4:0] == 5&#39;b00000) || (csr_addr[4:0] == 5&#39;b00001)) || (csr_addr[4:0] == 5&#39;b00010)))
				illegal_csr = csr_access_i;
		end
		else if (((csr_addr &amp; CSR_MASK_MCOUNTER) == CSR_OFF_MCOUNTER)) begin
			csr_rdata_int = mhpmcounter_q[((31 - mhpmcounter_idx) * 64)+:32];
			if ((((csr_addr[4:0] == 5&#39;b00000) || (csr_addr[4:0] == 5&#39;b00001)) || (csr_addr[4:0] == 5&#39;b00010)))
				illegal_csr = csr_access_i;
		end
		else if (((csr_addr &amp; CSR_MASK_MCOUNTER) == CSR_OFF_MCOUNTERH)) begin
			csr_rdata_int = mhpmcounter_q[(((31 - mhpmcounter_idx) * 64) + 32)+:32];
			if ((((csr_addr[4:0] == 5&#39;b00000) || (csr_addr[4:0] == 5&#39;b00001)) || (csr_addr[4:0] == 5&#39;b00010)))
				illegal_csr = csr_access_i;
		end
		else
			illegal_csr = csr_access_i;
		endcase
	end
	always @(*) begin
		exception_pc = pc_id_i;
		mstatus_d = mstatus_q;
		mie_d = mie_q;
		mscratch_d = mscratch_q;
		mepc_d = mepc_q;
		mcause_d = mcause_q;
		mtval_d = mtval_q;
		mtvec_d = (csr_mtvec_init_i ? {boot_addr_i[31:8], 6&#39;b0, 2&#39;b01} : mtvec_q);
		dcsr_d = dcsr_q;
		depc_d = depc_q;
		dscratch0_d = dscratch0_q;
		dscratch1_d = dscratch1_q;
		mstack_d = mstack_q;
		mstack_epc_d = mstack_epc_q;
		mstack_cause_d = mstack_cause_q;
		mcountinhibit_we = 1&#39;b0;
		mhpmcounter_we = 1&#39;sb0;
		mhpmcounterh_we = 1&#39;sb0;
		case (csr_addr_i)
			CSR_MSTATUS:
				if (csr_we_int)
					mstatus_d = sv2v_struct_5B112(csr_wdata_int[CSR_MSTATUS_MIE_BIT], csr_wdata_int[CSR_MSTATUS_MPIE_BIT], PRIV_LVL_M);
			CSR_MIE:
				if (csr_we_int) begin
					mie_d[17:17] = csr_wdata_int[CSR_MSIX_BIT];
					mie_d[16:16] = csr_wdata_int[CSR_MTIX_BIT];
					mie_d[15:15] = csr_wdata_int[CSR_MEIX_BIT];
					mie_d[14:0] = csr_wdata_int[CSR_MFIX_BIT_HIGH:CSR_MFIX_BIT_LOW];
				end
			CSR_MSCRATCH:
				if (csr_we_int)
					mscratch_d = csr_wdata_int;
			CSR_MEPC:
				if (csr_we_int)
					mepc_d = {csr_wdata_int[31:1], 1&#39;b0};
			CSR_MCAUSE:
				if (csr_we_int)
					mcause_d = {csr_wdata_int[31], csr_wdata_int[4:0]};
			CSR_MTVAL:
				if (csr_we_int)
					mtval_d = csr_wdata_int;
			CSR_MTVEC:
				if (csr_we_int)
					mtvec_d = {csr_wdata_int[31:8], 6&#39;b0, 2&#39;b01};
			CSR_DCSR:
				if (csr_we_int) begin
					dcsr_d = csr_wdata_int;
					dcsr_d[31:28] = XDEBUGVER_STD;
					dcsr_d[1:0] = PRIV_LVL_M;
					dcsr_d[3:3] = 1&#39;b0;
					dcsr_d[4:4] = 1&#39;b0;
					dcsr_d[10:10] = 1&#39;b0;
					dcsr_d[9:9] = 1&#39;b0;
					dcsr_d[5:5] = 1&#39;b0;
					dcsr_d[14:14] = 1&#39;b0;
					dcsr_d[27:16] = 12&#39;h0;
				end
			CSR_DPC:
				if ((csr_we_int &amp;&amp; (csr_wdata_int[0] == 1&#39;b0)))
					depc_d = csr_wdata_int;
			CSR_DSCRATCH0:
				if (csr_we_int)
					dscratch0_d = csr_wdata_int;
			CSR_DSCRATCH1:
				if (csr_we_int)
					dscratch1_d = csr_wdata_int;
			CSR_MCOUNTINHIBIT:
				if (csr_we_int)
					mcountinhibit_we = 1&#39;b1;
			CSR_MCYCLE:
				if (csr_we_int)
					mhpmcounter_we[0] = 1&#39;b1;
			CSR_MCYCLEH:
				if (csr_we_int)
					mhpmcounterh_we[0] = 1&#39;b1;
			CSR_MINSTRET:
				if (csr_we_int)
					mhpmcounter_we[2] = 1&#39;b1;
			CSR_MINSTRETH:
				if (csr_we_int)
					mhpmcounterh_we[2] = 1&#39;b1;
			default: if ((csr_we_int == 1&#39;b1))
			if (((csr_addr &amp; CSR_MASK_MCOUNTER) == CSR_OFF_MCOUNTER))
				mhpmcounter_we[mhpmcounter_idx] = 1&#39;b1;
			else if (((csr_addr &amp; CSR_MASK_MCOUNTER) == CSR_OFF_MCOUNTERH))
				mhpmcounterh_we[mhpmcounter_idx] = 1&#39;b1;
		endcase
		case (1&#39;b1)
			csr_save_cause_i: begin
				case (1&#39;b1)
					csr_save_if_i: exception_pc = pc_if_i;
					csr_save_id_i: exception_pc = pc_id_i;
					default: ;
				endcase
				if (debug_csr_save_i) begin
					dcsr_d[1:0] = PRIV_LVL_M;
					dcsr_d[8:6] = debug_cause_i;
					depc_d = exception_pc;
				end
				else begin
					mtval_d = csr_mtval_i;
					mstatus_d[3:3] = 1&#39;b0;
					mstatus_d[2:2] = mstatus_q[3:3];
					mstatus_d[1:0] = PRIV_LVL_M;
					mepc_d = exception_pc;
					mcause_d = csr_mcause_i;
					mstack_d[2:2] = mstatus_q[2:2];
					mstack_d[1:0] = mstatus_q[1:0];
					mstack_epc_d = mepc_q;
					mstack_cause_d = mcause_q;
				end
			end
			csr_restore_mret_i: begin
				mstatus_d[3:3] = mstatus_q[2:2];
				mstatus_d[2:2] = mstack_q[2:2];
				mstatus_d[1:0] = mstack_q[1:0];
				mepc_d = mstack_epc_q;
				mcause_d = mstack_cause_q;
			end
			default: ;
		endcase
	end
	always @(*) begin
		csr_wreq = 1&#39;b1;
		case (csr_op_i)
			CSR_OP_WRITE: csr_wdata_int = csr_wdata_i;
			CSR_OP_SET: csr_wdata_int = (csr_wdata_i | csr_rdata_o);
			CSR_OP_CLEAR: csr_wdata_int = (~csr_wdata_i &amp; csr_rdata_o);
			CSR_OP_READ: begin
				csr_wdata_int = csr_wdata_i;
				csr_wreq = 1&#39;b0;
			end
			default: begin
			csr_wdata_int = 1&#39;sbX;
			csr_wreq = 1&#39;bX;
		end
		endcase
	end
	assign csr_we_int = ((csr_wreq &amp; ~illegal_csr_priv) &amp; instr_new_id_i);
	assign csr_rdata_o = csr_rdata_int;
	assign csr_msip_o = mip[17:17];
	assign csr_mtip_o = mip[16:16];
	assign csr_meip_o = mip[15:15];
	assign csr_mfip_o = mip[14:0];
	assign csr_mepc_o = mepc_q;
	assign csr_depc_o = depc_q;
	assign csr_mtvec_o = mtvec_q;
	assign csr_mstatus_mie_o = mstatus_q[3:3];
	assign debug_single_step_o = dcsr_q[2:2];
	assign debug_ebreakm_o = dcsr_q[15:15];
	assign irq_pending_o = (((csr_msip_o | csr_mtip_o) | csr_meip_o) | |csr_mfip_o);
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			mstatus_q &lt;= sv2v_struct_5B112(1&#39;b0, 1&#39;b0, PRIV_LVL_M);
			mie_q &lt;= 1&#39;sb0;
			mscratch_q &lt;= 1&#39;sb0;
			mepc_q &lt;= 1&#39;sb0;
			mcause_q &lt;= 1&#39;sb0;
			mtval_q &lt;= 1&#39;sb0;
			mtvec_q &lt;= 32&#39;b01;
			dcsr_q &lt;= sv2v_struct_996E9(XDEBUGVER_STD, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, DBG_CAUSE_NONE, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, 1&#39;sb0, PRIV_LVL_M);
			depc_q &lt;= 1&#39;sb0;
			dscratch0_q &lt;= 1&#39;sb0;
			dscratch1_q &lt;= 1&#39;sb0;
			mstack_q &lt;= sv2v_struct_5B112(1&#39;b0, 1&#39;b0, PRIV_LVL_M);
			mstack_epc_q &lt;= 1&#39;sb0;
			mstack_cause_q &lt;= 1&#39;sb0;
		end
		else begin
			mstatus_q &lt;= mstatus_d;
			mie_q &lt;= mie_d;
			mscratch_q &lt;= mscratch_d;
			mepc_q &lt;= mepc_d;
			mcause_q &lt;= mcause_d;
			mtval_q &lt;= mtval_d;
			mtvec_q &lt;= mtvec_d;
			dcsr_q &lt;= dcsr_d;
			depc_q &lt;= depc_d;
			dscratch0_q &lt;= dscratch0_d;
			dscratch1_q &lt;= dscratch1_d;
			mstack_q &lt;= mstack_d;
			mstack_epc_q &lt;= mstack_epc_d;
			mstack_cause_q &lt;= mstack_cause_d;
		end
	assign priv_mode_o = mstatus_q[1:0];
	generate
		if (PMPEnable) begin : g_pmp_registers
			reg [5:0] pmp_cfg [0:(PMPNumRegions - 1)];
			reg [5:0] pmp_cfg_wdata [0:(PMPNumRegions - 1)];
			reg [31:0] pmp_addr [0:(PMPNumRegions - 1)];
			wire [(PMPNumRegions - 1):0] pmp_cfg_we;
			wire [(PMPNumRegions - 1):0] pmp_addr_we;
			genvar g_exp_rd_data_i;
			for (g_exp_rd_data_i = 0; (g_exp_rd_data_i &lt; PMP_MAX_REGIONS); g_exp_rd_data_i = (g_exp_rd_data_i + 1)) begin : g_exp_rd_data
				if ((g_exp_rd_data_i &lt; PMPNumRegions)) begin : g_implemented_regions
					assign pmp_cfg_rdata[g_exp_rd_data_i] = {pmp_cfg[g_exp_rd_data_i][5:5], 2&#39;b00, pmp_cfg[g_exp_rd_data_i][4:3], pmp_cfg[g_exp_rd_data_i][2:2], pmp_cfg[g_exp_rd_data_i][1:1], pmp_cfg[g_exp_rd_data_i][0:0]};
					if ((PMPGranularity == 0)) begin : g_pmp_g0
						always @(*) pmp_addr_rdata[g_exp_rd_data_i] = pmp_addr[g_exp_rd_data_i];
					end
					else if ((PMPGranularity == 1)) begin : g_pmp_g1
						always @(*) begin
							pmp_addr_rdata[g_exp_rd_data_i] = pmp_addr[g_exp_rd_data_i];
							if (((pmp_cfg[g_exp_rd_data_i][4:3] == PMP_MODE_OFF) || (pmp_cfg[g_exp_rd_data_i][4:3] == PMP_MODE_TOR)))
								pmp_addr_rdata[g_exp_rd_data_i][(PMPGranularity - 1):0] = 1&#39;sb0;
						end
					end
					else begin
						always @(*) begin
							pmp_addr_rdata[g_exp_rd_data_i] = pmp_addr[g_exp_rd_data_i];
							if (((pmp_cfg[g_exp_rd_data_i][4:3] == PMP_MODE_OFF) || (pmp_cfg[g_exp_rd_data_i][4:3] == PMP_MODE_TOR)))
								pmp_addr_rdata[g_exp_rd_data_i][(PMPGranularity - 1):0] = 1&#39;sb0;
							else if ((pmp_cfg[g_exp_rd_data_i][4:3] == PMP_MODE_NAPOT))
								pmp_addr_rdata[g_exp_rd_data_i][(PMPGranularity - 2):0] = 1&#39;sb1;
						end
					end
				end
				else begin : g_other_regions
					assign pmp_cfg_rdata[g_exp_rd_data_i] = 1&#39;sb0;
					always @(*) pmp_addr_rdata[g_exp_rd_data_i] = 1&#39;sb0;
				end
			end
			genvar g_pmp_csrs_i;
			for (g_pmp_csrs_i = 0; (g_pmp_csrs_i &lt; PMPNumRegions); g_pmp_csrs_i = (g_pmp_csrs_i + 1)) begin : g_pmp_csrs
				assign pmp_cfg_we[g_pmp_csrs_i] = ((csr_we_int &amp; ~pmp_cfg[g_pmp_csrs_i][5:5]) &amp; (csr_addr == (CSR_OFF_PMP_CFG + (g_pmp_csrs_i[11:0] &gt;&gt; 2))));
				always @(*) pmp_cfg_wdata[g_pmp_csrs_i][5:5] = csr_wdata_int[(((g_pmp_csrs_i % 4) * PMP_CFG_W) + 7)];
				always @(*)
					case (csr_wdata_int[(((g_pmp_csrs_i % 4) * PMP_CFG_W) + 3)+:2])
						2&#39;b00: pmp_cfg_wdata[g_pmp_csrs_i][4:3] = PMP_MODE_OFF;
						2&#39;b01: pmp_cfg_wdata[g_pmp_csrs_i][4:3] = PMP_MODE_TOR;
						2&#39;b10: pmp_cfg_wdata[g_pmp_csrs_i][4:3] = ((PMPGranularity == 0) ? PMP_MODE_NA4 : PMP_MODE_OFF);
						2&#39;b11: pmp_cfg_wdata[g_pmp_csrs_i][4:3] = PMP_MODE_NAPOT;
						default: pmp_cfg_wdata[g_pmp_csrs_i][4:3] = 1&#39;sbX;
					endcase
				always @(*) pmp_cfg_wdata[g_pmp_csrs_i][2:2] = csr_wdata_int[(((g_pmp_csrs_i % 4) * PMP_CFG_W) + 2)];
				always @(*) pmp_cfg_wdata[g_pmp_csrs_i][1:1] = &amp;csr_wdata_int[((g_pmp_csrs_i % 4) * PMP_CFG_W)+:2];
				always @(*) pmp_cfg_wdata[g_pmp_csrs_i][0:0] = csr_wdata_int[((g_pmp_csrs_i % 4) * PMP_CFG_W)];
				always @(posedge clk_i or negedge rst_ni)
					if (!rst_ni)
						pmp_cfg[g_pmp_csrs_i] &lt;= &#39;b0;
					else if (pmp_cfg_we[g_pmp_csrs_i])
						pmp_cfg[g_pmp_csrs_i] &lt;= pmp_cfg_wdata[g_pmp_csrs_i];
				if ((g_pmp_csrs_i &lt; (PMPNumRegions - 1))) begin : g_lower
					assign pmp_addr_we[g_pmp_csrs_i] = (((csr_we_int &amp; ~pmp_cfg[g_pmp_csrs_i][5:5]) &amp; (pmp_cfg[(g_pmp_csrs_i + 1)][4:3] != PMP_MODE_TOR)) &amp; (csr_addr == (CSR_OFF_PMP_ADDR + g_pmp_csrs_i[11:0])));
				end
				else begin : g_upper
					assign pmp_addr_we[g_pmp_csrs_i] = ((csr_we_int &amp; ~pmp_cfg[g_pmp_csrs_i][5:5]) &amp; (csr_addr == (CSR_OFF_PMP_ADDR + g_pmp_csrs_i[11:0])));
				end
				always @(posedge clk_i or negedge rst_ni)
					if (!rst_ni)
						pmp_addr[g_pmp_csrs_i] &lt;= &#39;b0;
					else if (pmp_addr_we[g_pmp_csrs_i])
						pmp_addr[g_pmp_csrs_i] &lt;= csr_wdata_int;
				assign csr_pmp_cfg_o[(((0 &gt;= (PMPNumRegions - 1)) ? g_pmp_csrs_i : ((PMPNumRegions - 1) - g_pmp_csrs_i)) * 6)+:6] = pmp_cfg[g_pmp_csrs_i];
				assign csr_pmp_addr_o[(((0 &gt;= (PMPNumRegions - 1)) ? g_pmp_csrs_i : ((PMPNumRegions - 1) - g_pmp_csrs_i)) * 34)+:34] = {pmp_addr[g_pmp_csrs_i], 2&#39;b00};
			end
		end
		else begin : g_no_pmp_tieoffs
			genvar g_rdata_i;
			for (g_rdata_i = 0; (g_rdata_i &lt; PMP_MAX_REGIONS); g_rdata_i = (g_rdata_i + 1)) begin : g_rdata
				always @(*) pmp_addr_rdata[g_rdata_i] = 1&#39;sb0;
				assign pmp_cfg_rdata[g_rdata_i] = 1&#39;sb0;
			end
			genvar g_outputs_i;
			for (g_outputs_i = 0; (g_outputs_i &lt; PMPNumRegions); g_outputs_i = (g_outputs_i + 1)) begin : g_outputs
				assign csr_pmp_cfg_o[(((0 &gt;= (PMPNumRegions - 1)) ? g_outputs_i : ((PMPNumRegions - 1) - g_outputs_i)) * 6)+:6] = 1&#39;sb0;
				assign csr_pmp_addr_o[(((0 &gt;= (PMPNumRegions - 1)) ? g_outputs_i : ((PMPNumRegions - 1) - g_outputs_i)) * 34)+:34] = 1&#39;sb0;
			end
		end
	endgenerate
	always @(*) begin : mcountinhibit_update
		if ((mcountinhibit_we == 1&#39;b1))
			mcountinhibit_d = {csr_wdata_int[31:2], 1&#39;b0, csr_wdata_int[0]};
		else
			mcountinhibit_d = mcountinhibit_q;
	end
	assign mcountinhibit_force = {{(29 - MHPMCounterNum) {1&#39;b1}}, {MHPMCounterNum {1&#39;b0}}, 3&#39;b000};
	assign mcountinhibit = (mcountinhibit_q | mcountinhibit_force);
	always @(*) begin : gen_mhpmcounter_incr
		mhpmcounter_incr[0] = 1&#39;b1;
		mhpmcounter_incr[1] = 1&#39;b0;
		mhpmcounter_incr[2] = instr_ret_i;
		mhpmcounter_incr[3] = lsu_busy_i;
		mhpmcounter_incr[4] = (imiss_i &amp; ~pc_set_i);
		mhpmcounter_incr[5] = mem_load_i;
		mhpmcounter_incr[6] = mem_store_i;
		mhpmcounter_incr[7] = jump_i;
		mhpmcounter_incr[8] = branch_i;
		mhpmcounter_incr[9] = branch_taken_i;
		mhpmcounter_incr[10] = instr_ret_compressed_i;
		begin : sv2v_autoblock_31
			reg [31:0] i;
			for (i = (3 + MHPMCounterNum); (i &lt; 32); i = (i + 1))
				begin : gen_mhpmcounter_incr_inactive
					mhpmcounter_incr[i] = 1&#39;b0;
				end
		end
	end
	always @(*) begin : gen_mhpmevent
		begin : sv2v_autoblock_32
			reg signed [31:0] i;
			for (i = 0; (i &lt; 32); i = (i + 1))
				begin : gen_mhpmevent_active
					mhpmevent[i] = 1&#39;sb0;
					mhpmevent[i][i] = 1&#39;b1;
				end
		end
		mhpmevent[1] = 1&#39;sb0;
		begin : sv2v_autoblock_33
			reg [31:0] i;
			for (i = (3 + MHPMCounterNum); (i &lt; 32); i = (i + 1))
				begin : gen_mhpmevent_inactive
					mhpmevent[i] = 1&#39;sb0;
				end
		end
	end
	always @(*) begin : gen_mask
		begin : sv2v_autoblock_34
			reg signed [31:0] i;
			for (i = 0; (i &lt; 3); i = (i + 1))
				begin : gen_mask_fixed
					mhpmcounter_mask[i] = {64 {1&#39;b1}};
				end
		end
		begin : sv2v_autoblock_35
			reg [31:0] i;
			for (i = 3; (i &lt; (3 + MHPMCounterNum)); i = (i + 1))
				begin : gen_mask_configurable
					mhpmcounter_mask[i] = {{(64 - MHPMCounterWidth) {1&#39;b0}}, {MHPMCounterWidth {1&#39;b1}}};
				end
		end
		begin : sv2v_autoblock_36
			reg [31:0] i;
			for (i = (3 + MHPMCounterNum); (i &lt; 32); i = (i + 1))
				begin : gen_mask_inactive
					mhpmcounter_mask[i] = 1&#39;sb0;
				end
		end
	end
	always @(*) begin : mhpmcounter_update
		mhpmcounter_d = mhpmcounter_q;
		begin : sv2v_autoblock_37
			reg signed [31:0] i;
			for (i = 0; (i &lt; 32); i = (i + 1))
				begin : gen_mhpmcounter_update
					if ((mhpmcounter_incr[i] &amp; ~mcountinhibit[i]))
						mhpmcounter_d[((31 - i) * 64)+:64] = (mhpmcounter_mask[i] &amp; (mhpmcounter_q[((31 - i) * 64)+:64] + 64&#39;h1));
					if (mhpmcounter_we[i])
						mhpmcounter_d[((31 - i) * 64)+:32] = (mhpmcounter_mask[i][31:0] &amp; csr_wdata_int);
					else if (mhpmcounterh_we[i])
						mhpmcounter_d[(((31 - i) * 64) + 32)+:32] = (mhpmcounter_mask[i][63:32] &amp; csr_wdata_int);
				end
		end
	end
	always @(posedge clk_i or negedge rst_ni) begin : perf_counter_registers
		if (!rst_ni) begin
			mcountinhibit_q &lt;= 1&#39;sb0;
			begin : sv2v_autoblock_38
				reg signed [31:0] i;
				for (i = 0; (i &lt; 32); i = (i + 1))
					mhpmcounter_q[((31 - i) * 64)+:64] &lt;= 1&#39;sb0;
			end
		end
		else begin
			mhpmcounter_q &lt;= mhpmcounter_d;
			mcountinhibit_q &lt;= mcountinhibit_d;
		end
	end
	function [3:0] sv2v_struct_5B112;
		input reg mie;
		input reg mpie;
		input reg [1:0] mpp;
		sv2v_struct_5B112 = {mie, mpie, mpp};
	endfunction
	function [31:0] sv2v_struct_996E9;
		input reg [3:0] xdebugver;
		input reg [11:0] zero2;
		input reg ebreakm;
		input reg zero1;
		input reg ebreaks;
		input reg ebreaku;
		input reg stepie;
		input reg stopcount;
		input reg stoptime;
		input reg [2:0] cause;
		input reg zero0;
		input reg mprven;
		input reg nmip;
		input reg step;
		input reg [1:0] prv;
		sv2v_struct_996E9 = {xdebugver, zero2, ebreakm, zero1, ebreaks, ebreaku, stepie, stopcount, stoptime, cause, zero0, mprven, nmip, step, prv};
	endfunction
	function automatic [31:0] sv2v_cast_32;
		input reg [31:0] inp;
		sv2v_cast_32 = inp;
	endfunction
endmodule
module ibex_decoder (
	illegal_insn_o,
	ebrk_insn_o,
	mret_insn_o,
	dret_insn_o,
	ecall_insn_o,
	wfi_insn_o,
	jump_set_o,
	instr_new_i,
	instr_rdata_i,
	illegal_c_insn_i,
	imm_a_mux_sel_o,
	imm_b_mux_sel_o,
	imm_i_type_o,
	imm_s_type_o,
	imm_b_type_o,
	imm_u_type_o,
	imm_j_type_o,
	zimm_rs1_type_o,
	regfile_wdata_sel_o,
	regfile_we_o,
	regfile_raddr_a_o,
	regfile_raddr_b_o,
	regfile_waddr_o,
	alu_operator_o,
	alu_op_a_mux_sel_o,
	alu_op_b_mux_sel_o,
	mult_en_o,
	div_en_o,
	multdiv_operator_o,
	multdiv_signed_mode_o,
	csr_access_o,
	csr_op_o,
	csr_pipe_flush_o,
	data_req_o,
	data_we_o,
	data_type_o,
	data_sign_extension_o,
	jump_in_dec_o,
	branch_in_dec_o
);
	parameter RV32E = 0;
	parameter RV32M = 1;
	output wire illegal_insn_o;
	output reg ebrk_insn_o;
	output reg mret_insn_o;
	output reg dret_insn_o;
	output reg ecall_insn_o;
	output reg wfi_insn_o;
	output reg jump_set_o;
	input wire instr_new_i;
	input wire [31:0] instr_rdata_i;
	input wire illegal_c_insn_i;
	output reg [0:0] imm_a_mux_sel_o;
	output reg [2:0] imm_b_mux_sel_o;
	output wire [31:0] imm_i_type_o;
	output wire [31:0] imm_s_type_o;
	output wire [31:0] imm_b_type_o;
	output wire [31:0] imm_u_type_o;
	output wire [31:0] imm_j_type_o;
	output wire [31:0] zimm_rs1_type_o;
	output reg [1:0] regfile_wdata_sel_o;
	output wire regfile_we_o;
	output wire [4:0] regfile_raddr_a_o;
	output wire [4:0] regfile_raddr_b_o;
	output wire [4:0] regfile_waddr_o;
	output reg [4:0] alu_operator_o;
	output reg [1:0] alu_op_a_mux_sel_o;
	output reg [0:0] alu_op_b_mux_sel_o;
	output reg mult_en_o;
	output reg div_en_o;
	output reg [1:0] multdiv_operator_o;
	output reg [1:0] multdiv_signed_mode_o;
	output reg csr_access_o;
	output reg [1:0] csr_op_o;
	output reg csr_pipe_flush_o;
	output reg data_req_o;
	output reg data_we_o;
	output reg [1:0] data_type_o;
	output reg data_sign_extension_o;
	output reg jump_in_dec_o;
	output reg branch_in_dec_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	reg illegal_insn;
	wire illegal_reg_rv32e;
	reg csr_illegal;
	reg regfile_we;
	wire [31:0] instr;
	reg [1:0] csr_op;
	reg [6:0] opcode;
	assign instr = instr_rdata_i;
	assign imm_i_type_o = {{20 {instr[31]}}, instr[31:20]};
	assign imm_s_type_o = {{20 {instr[31]}}, instr[31:25], instr[11:7]};
	assign imm_b_type_o = {{19 {instr[31]}}, instr[31], instr[7], instr[30:25], instr[11:8], 1&#39;b0};
	assign imm_u_type_o = {instr[31:12], 12&#39;b0};
	assign imm_j_type_o = {{12 {instr[31]}}, instr[19:12], instr[20], instr[30:21], 1&#39;b0};
	assign zimm_rs1_type_o = {27&#39;b0, instr[19:15]};
	assign regfile_raddr_a_o = instr[19:15];
	assign regfile_raddr_b_o = instr[24:20];
	assign regfile_waddr_o = instr[11:07];
	generate
		if (RV32E) begin : gen_rv32e_reg_check_active
			assign illegal_reg_rv32e = (((regfile_raddr_a_o[4] &amp; (alu_op_a_mux_sel_o == OP_A_REG_A)) | (regfile_raddr_b_o[4] &amp; (alu_op_b_mux_sel_o == OP_B_REG_B))) | (regfile_waddr_o[4] &amp; regfile_we));
		end
		else begin : gen_rv32e_reg_check_inactive
			assign illegal_reg_rv32e = 1&#39;b0;
		end
	endgenerate
	always @(*) begin : csr_operand_check
		csr_op_o = csr_op;
		if ((((csr_op == CSR_OP_SET) || (csr_op == CSR_OP_CLEAR)) &amp;&amp; (instr[19:15] == 1&#39;sb0)))
			csr_op_o = CSR_OP_READ;
	end
	always @(*) begin : csr_pipeline_flushes
		csr_pipe_flush_o = 1&#39;b0;
		if (((csr_access_o == 1&#39;b1) &amp;&amp; ((csr_op_o == CSR_OP_WRITE) || (csr_op_o == CSR_OP_SET))))
			if (((instr[31:20] == CSR_MSTATUS) || (instr[31:20] == CSR_MIE)))
				csr_pipe_flush_o = 1&#39;b1;
		else if (((csr_access_o == 1&#39;b1) &amp;&amp; (csr_op_o != CSR_OP_READ)))
			if (((((instr[31:20] == CSR_DCSR) || (instr[31:20] == CSR_DPC)) || (instr[31:20] == CSR_DSCRATCH0)) || (instr[31:20] == CSR_DSCRATCH1)))
				csr_pipe_flush_o = 1&#39;b1;
	end
	always @(*) begin
		jump_in_dec_o = 1&#39;b0;
		jump_set_o = 1&#39;b0;
		branch_in_dec_o = 1&#39;b0;
		alu_operator_o = ALU_SLTU;
		alu_op_a_mux_sel_o = OP_A_IMM;
		alu_op_b_mux_sel_o = OP_B_IMM;
		imm_a_mux_sel_o = IMM_A_ZERO;
		imm_b_mux_sel_o = IMM_B_I;
		mult_en_o = 1&#39;b0;
		div_en_o = 1&#39;b0;
		multdiv_operator_o = MD_OP_MULL;
		multdiv_signed_mode_o = 2&#39;b00;
		regfile_wdata_sel_o = RF_WD_EX;
		regfile_we = 1&#39;b0;
		csr_access_o = 1&#39;b0;
		csr_illegal = 1&#39;b0;
		csr_op = CSR_OP_READ;
		data_we_o = 1&#39;b0;
		data_type_o = 2&#39;b00;
		data_sign_extension_o = 1&#39;b0;
		data_req_o = 1&#39;b0;
		illegal_insn = 1&#39;b0;
		ebrk_insn_o = 1&#39;b0;
		mret_insn_o = 1&#39;b0;
		dret_insn_o = 1&#39;b0;
		ecall_insn_o = 1&#39;b0;
		wfi_insn_o = 1&#39;b0;
		opcode = instr[6:0];
		case (opcode)
			OPCODE_JAL: begin
				jump_in_dec_o = 1&#39;b1;
				if (instr_new_i) begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_J;
					alu_operator_o = ALU_ADD;
					regfile_we = 1&#39;b0;
					jump_set_o = 1&#39;b1;
				end
				else begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_INCR_PC;
					alu_operator_o = ALU_ADD;
					regfile_we = 1&#39;b1;
				end
			end
			OPCODE_JALR: begin
				jump_in_dec_o = 1&#39;b1;
				if (instr_new_i) begin
					alu_op_a_mux_sel_o = OP_A_REG_A;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_I;
					alu_operator_o = ALU_ADD;
					regfile_we = 1&#39;b0;
					jump_set_o = 1&#39;b1;
				end
				else begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_INCR_PC;
					alu_operator_o = ALU_ADD;
					regfile_we = 1&#39;b1;
				end
				if ((instr[14:12] != 3&#39;b0))
					illegal_insn = 1&#39;b1;
			end
			OPCODE_BRANCH: begin
				branch_in_dec_o = 1&#39;b1;
				case (instr[14:12])
					3&#39;b000: alu_operator_o = ALU_EQ;
					3&#39;b001: alu_operator_o = ALU_NE;
					3&#39;b100: alu_operator_o = ALU_LT;
					3&#39;b101: alu_operator_o = ALU_GE;
					3&#39;b110: alu_operator_o = ALU_LTU;
					3&#39;b111: alu_operator_o = ALU_GEU;
					default: illegal_insn = 1&#39;b1;
				endcase
				if (instr_new_i) begin
					alu_op_a_mux_sel_o = OP_A_REG_A;
					alu_op_b_mux_sel_o = OP_B_REG_B;
				end
				else begin
					alu_op_a_mux_sel_o = OP_A_CURRPC;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_b_mux_sel_o = IMM_B_B;
					alu_operator_o = ALU_ADD;
					regfile_we = 1&#39;b0;
				end
			end
			OPCODE_STORE: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				alu_op_b_mux_sel_o = OP_B_REG_B;
				data_req_o = 1&#39;b1;
				data_we_o = 1&#39;b1;
				alu_operator_o = ALU_ADD;
				if (!instr[14]) begin
					imm_b_mux_sel_o = IMM_B_S;
					alu_op_b_mux_sel_o = OP_B_IMM;
				end
				else
					illegal_insn = 1&#39;b1;
				case (instr[13:12])
					2&#39;b00: data_type_o = 2&#39;b10;
					2&#39;b01: data_type_o = 2&#39;b01;
					2&#39;b10: data_type_o = 2&#39;b00;
					default: illegal_insn = 1&#39;b1;
				endcase
			end
			OPCODE_LOAD: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				data_req_o = 1&#39;b1;
				regfile_wdata_sel_o = RF_WD_LSU;
				regfile_we = 1&#39;b1;
				data_type_o = 2&#39;b00;
				alu_operator_o = ALU_ADD;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_b_mux_sel_o = IMM_B_I;
				data_sign_extension_o = ~instr[14];
				case (instr[13:12])
					2&#39;b00: data_type_o = 2&#39;b10;
					2&#39;b01: data_type_o = 2&#39;b01;
					2&#39;b10: begin
						data_type_o = 2&#39;b00;
						if (instr[14])
							illegal_insn = 1&#39;b1;
					end
					default: illegal_insn = 1&#39;b1;
				endcase
			end
			OPCODE_LUI: begin
				alu_op_a_mux_sel_o = OP_A_IMM;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_a_mux_sel_o = IMM_A_ZERO;
				imm_b_mux_sel_o = IMM_B_U;
				alu_operator_o = ALU_ADD;
				regfile_we = 1&#39;b1;
			end
			OPCODE_AUIPC: begin
				alu_op_a_mux_sel_o = OP_A_CURRPC;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_b_mux_sel_o = IMM_B_U;
				alu_operator_o = ALU_ADD;
				regfile_we = 1&#39;b1;
			end
			OPCODE_OP_IMM: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				alu_op_b_mux_sel_o = OP_B_IMM;
				imm_b_mux_sel_o = IMM_B_I;
				regfile_we = 1&#39;b1;
				case (instr[14:12])
					3&#39;b000: alu_operator_o = ALU_ADD;
					3&#39;b010: alu_operator_o = ALU_SLT;
					3&#39;b011: alu_operator_o = ALU_SLTU;
					3&#39;b100: alu_operator_o = ALU_XOR;
					3&#39;b110: alu_operator_o = ALU_OR;
					3&#39;b111: alu_operator_o = ALU_AND;
					3&#39;b001: begin
						alu_operator_o = ALU_SLL;
						if ((instr[31:25] != 7&#39;b0))
							illegal_insn = 1&#39;b1;
					end
					3&#39;b101:
						if ((instr[31:25] == 7&#39;b0))
							alu_operator_o = ALU_SRL;
						else if ((instr[31:25] == 7&#39;b010_0000))
							alu_operator_o = ALU_SRA;
						else
							illegal_insn = 1&#39;b1;
					default: alu_operator_o = {5 {1&#39;bX}};
				endcase
			end
			OPCODE_OP: begin
				alu_op_a_mux_sel_o = OP_A_REG_A;
				alu_op_b_mux_sel_o = OP_B_REG_B;
				regfile_we = 1&#39;b1;
				if (instr[31])
					illegal_insn = 1&#39;b1;
				else
					case ({instr[30:25], instr[14:12]})
						{6&#39;b00_0000, 3&#39;b000}: alu_operator_o = ALU_ADD;
						{6&#39;b10_0000, 3&#39;b000}: alu_operator_o = ALU_SUB;
						{6&#39;b00_0000, 3&#39;b010}: alu_operator_o = ALU_SLT;
						{6&#39;b00_0000, 3&#39;b011}: alu_operator_o = ALU_SLTU;
						{6&#39;b00_0000, 3&#39;b100}: alu_operator_o = ALU_XOR;
						{6&#39;b00_0000, 3&#39;b110}: alu_operator_o = ALU_OR;
						{6&#39;b00_0000, 3&#39;b111}: alu_operator_o = ALU_AND;
						{6&#39;b00_0000, 3&#39;b001}: alu_operator_o = ALU_SLL;
						{6&#39;b00_0000, 3&#39;b101}: alu_operator_o = ALU_SRL;
						{6&#39;b10_0000, 3&#39;b101}: alu_operator_o = ALU_SRA;
						{6&#39;b00_0001, 3&#39;b000}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_MULL;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{6&#39;b00_0001, 3&#39;b001}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_MULH;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b11;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{6&#39;b00_0001, 3&#39;b010}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_MULH;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b01;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{6&#39;b00_0001, 3&#39;b011}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_MULH;
							mult_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{6&#39;b00_0001, 3&#39;b100}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_DIV;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b11;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{6&#39;b00_0001, 3&#39;b101}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_DIV;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{6&#39;b00_0001, 3&#39;b110}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_REM;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b11;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						{6&#39;b00_0001, 3&#39;b111}: begin
							alu_operator_o = ALU_ADD;
							multdiv_operator_o = MD_OP_REM;
							div_en_o = (RV32M ? 1&#39;b1 : 1&#39;b0);
							multdiv_signed_mode_o = 2&#39;b00;
							illegal_insn = (RV32M ? 1&#39;b0 : 1&#39;b1);
						end
						default: illegal_insn = 1&#39;b1;
					endcase
			end
			OPCODE_MISC_MEM:
				if ((instr[14:12] == 3&#39;b000)) begin
					alu_operator_o = ALU_ADD;
					alu_op_a_mux_sel_o = OP_A_REG_A;
					alu_op_b_mux_sel_o = OP_B_IMM;
					regfile_we = 1&#39;b0;
				end
				else
					illegal_insn = 1&#39;b1;
			OPCODE_SYSTEM:
				if ((instr[14:12] == 3&#39;b000)) begin
					alu_op_a_mux_sel_o = OP_A_REG_A;
					alu_op_b_mux_sel_o = OP_B_IMM;
					case (instr[31:20])
						12&#39;h000: ecall_insn_o = 1&#39;b1;
						12&#39;h001: ebrk_insn_o = 1&#39;b1;
						12&#39;h302: mret_insn_o = 1&#39;b1;
						12&#39;h7b2: dret_insn_o = 1&#39;b1;
						12&#39;h105: wfi_insn_o = 1&#39;b1;
						default: illegal_insn = 1&#39;b1;
					endcase
					if (((instr[19:15] != 5&#39;b0) || (instr[11:07] != 5&#39;b0)))
						illegal_insn = 1&#39;b1;
				end
				else begin
					csr_access_o = 1&#39;b1;
					regfile_wdata_sel_o = RF_WD_CSR;
					regfile_we = 1&#39;b1;
					alu_op_b_mux_sel_o = OP_B_IMM;
					imm_a_mux_sel_o = IMM_A_Z;
					imm_b_mux_sel_o = IMM_B_I;
					if (instr[14])
						alu_op_a_mux_sel_o = OP_A_IMM;
					else
						alu_op_a_mux_sel_o = OP_A_REG_A;
					case (instr[13:12])
						2&#39;b01: csr_op = CSR_OP_WRITE;
						2&#39;b10: csr_op = CSR_OP_SET;
						2&#39;b11: csr_op = CSR_OP_CLEAR;
						default: csr_illegal = 1&#39;b1;
					endcase
					illegal_insn = csr_illegal;
				end
			default: illegal_insn = 1&#39;b1;
		endcase
		if (illegal_c_insn_i)
			illegal_insn = 1&#39;b1;
		if (illegal_insn) begin
			regfile_we = 1&#39;b0;
			data_req_o = 1&#39;b0;
			data_we_o = 1&#39;b0;
			mult_en_o = 1&#39;b0;
			div_en_o = 1&#39;b0;
			jump_in_dec_o = 1&#39;b0;
			jump_set_o = 1&#39;b0;
			branch_in_dec_o = 1&#39;b0;
			csr_access_o = 1&#39;b0;
		end
	end
	assign illegal_insn_o = (illegal_insn | illegal_reg_rv32e);
	assign regfile_we_o = (regfile_we &amp; ~illegal_reg_rv32e);
endmodule
module ibex_ex_block (
	clk_i,
	rst_ni,
	alu_operator_i,
	alu_operand_a_i,
	alu_operand_b_i,
	multdiv_operator_i,
	mult_en_i,
	div_en_i,
	multdiv_signed_mode_i,
	multdiv_operand_a_i,
	multdiv_operand_b_i,
	alu_adder_result_ex_o,
	regfile_wdata_ex_o,
	jump_target_o,
	branch_decision_o,
	ex_valid_o
);
	parameter RV32M = 1;
	input wire clk_i;
	input wire rst_ni;
	input wire [4:0] alu_operator_i;
	input wire [31:0] alu_operand_a_i;
	input wire [31:0] alu_operand_b_i;
	input wire [1:0] multdiv_operator_i;
	input wire mult_en_i;
	input wire div_en_i;
	input wire [1:0] multdiv_signed_mode_i;
	input wire [31:0] multdiv_operand_a_i;
	input wire [31:0] multdiv_operand_b_i;
	output wire [31:0] alu_adder_result_ex_o;
	output wire [31:0] regfile_wdata_ex_o;
	output wire [31:0] jump_target_o;
	output wire branch_decision_o;
	output wire ex_valid_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam MULT_TYPE = 1;
	wire [31:0] alu_result;
	wire [31:0] multdiv_result;
	wire [32:0] multdiv_alu_operand_b;
	wire [32:0] multdiv_alu_operand_a;
	wire [33:0] alu_adder_result_ext;
	wire alu_cmp_result;
	wire alu_is_equal_result;
	wire multdiv_valid;
	wire multdiv_en_sel;
	wire multdiv_en;
	generate
		if (RV32M) begin : gen_multdiv_m
			assign multdiv_en_sel = (MULT_TYPE ? div_en_i : (mult_en_i | div_en_i));
			assign multdiv_en = (mult_en_i | div_en_i);
		end
		else begin : gen_multdiv_no_m
			assign multdiv_en_sel = 1&#39;b0;
			assign multdiv_en = 1&#39;b0;
		end
	endgenerate
	assign regfile_wdata_ex_o = (multdiv_en ? multdiv_result : alu_result);
	assign branch_decision_o = alu_cmp_result;
	assign jump_target_o = alu_adder_result_ex_o;
	ibex_alu alu_i(
		.operator_i(alu_operator_i),
		.operand_a_i(alu_operand_a_i),
		.operand_b_i(alu_operand_b_i),
		.multdiv_operand_a_i(multdiv_alu_operand_a),
		.multdiv_operand_b_i(multdiv_alu_operand_b),
		.multdiv_en_i(multdiv_en_sel),
		.adder_result_o(alu_adder_result_ex_o),
		.adder_result_ext_o(alu_adder_result_ext),
		.result_o(alu_result),
		.comparison_result_o(alu_cmp_result),
		.is_equal_result_o(alu_is_equal_result)
	);
	generate
		if (!MULT_TYPE) begin : gen_multdiv_slow
			ibex_multdiv_slow multdiv_i(
				.clk_i(clk_i),
				.rst_ni(rst_ni),
				.mult_en_i(mult_en_i),
				.div_en_i(div_en_i),
				.operator_i(multdiv_operator_i),
				.signed_mode_i(multdiv_signed_mode_i),
				.op_a_i(multdiv_operand_a_i),
				.op_b_i(multdiv_operand_b_i),
				.alu_adder_ext_i(alu_adder_result_ext),
				.alu_adder_i(alu_adder_result_ex_o),
				.equal_to_zero(alu_is_equal_result),
				.valid_o(multdiv_valid),
				.alu_operand_a_o(multdiv_alu_operand_a),
				.alu_operand_b_o(multdiv_alu_operand_b),
				.multdiv_result_o(multdiv_result)
			);
		end
		else begin : gen_multdiv_fast
			ibex_multdiv_fast multdiv_i(
				.clk_i(clk_i),
				.rst_ni(rst_ni),
				.mult_en_i(mult_en_i),
				.div_en_i(div_en_i),
				.operator_i(multdiv_operator_i),
				.signed_mode_i(multdiv_signed_mode_i),
				.op_a_i(multdiv_operand_a_i),
				.op_b_i(multdiv_operand_b_i),
				.alu_operand_a_o(multdiv_alu_operand_a),
				.alu_operand_b_o(multdiv_alu_operand_b),
				.alu_adder_ext_i(alu_adder_result_ext),
				.alu_adder_i(alu_adder_result_ex_o),
				.equal_to_zero(alu_is_equal_result),
				.valid_o(multdiv_valid),
				.multdiv_result_o(multdiv_result)
			);
		end
	endgenerate
	assign ex_valid_o = (multdiv_en ? multdiv_valid : 1&#39;b1);
endmodule
module ibex_id_stage (
	clk_i,
	rst_ni,
	test_en_i,
	fetch_enable_i,
	ctrl_busy_o,
	core_ctrl_firstfetch_o,
	illegal_insn_o,
	instr_valid_i,
	instr_new_i,
	instr_rdata_i,
	instr_rdata_c_i,
	instr_is_compressed_i,
	instr_req_o,
	instr_valid_clear_o,
	id_in_ready_o,
	branch_decision_i,
	pc_set_o,
	pc_mux_o,
	exc_pc_mux_o,
	exc_cause_o,
	illegal_c_insn_i,
	instr_fetch_err_i,
	pc_id_i,
	ex_valid_i,
	lsu_valid_i,
	alu_operator_ex_o,
	alu_operand_a_ex_o,
	alu_operand_b_ex_o,
	mult_en_ex_o,
	div_en_ex_o,
	multdiv_operator_ex_o,
	multdiv_signed_mode_ex_o,
	multdiv_operand_a_ex_o,
	multdiv_operand_b_ex_o,
	csr_access_o,
	csr_op_o,
	csr_save_if_o,
	csr_save_id_o,
	csr_restore_mret_id_o,
	csr_save_cause_o,
	csr_mtval_o,
	illegal_csr_insn_i,
	data_req_ex_o,
	data_we_ex_o,
	data_type_ex_o,
	data_sign_ext_ex_o,
	data_wdata_ex_o,
	lsu_addr_incr_req_i,
	lsu_addr_last_i,
	csr_mstatus_mie_i,
	csr_msip_i,
	csr_mtip_i,
	csr_meip_i,
	csr_mfip_i,
	irq_pending_i,
	irq_nm_i,
	lsu_load_err_i,
	lsu_store_err_i,
	debug_mode_o,
	debug_cause_o,
	debug_csr_save_o,
	debug_req_i,
	debug_single_step_i,
	debug_ebreakm_i,
	regfile_wdata_lsu_i,
	regfile_wdata_ex_i,
	csr_rdata_i,
	perf_jump_o,
	perf_branch_o,
	perf_tbranch_o,
	instr_ret_o,
	instr_ret_compressed_o
);
	localparam [0:0] IDLE = 0;
	localparam [0:0] WAIT_MULTICYCLE = 1;
	parameter RV32E = 0;
	parameter RV32M = 1;
	input wire clk_i;
	input wire rst_ni;
	input wire test_en_i;
	input wire fetch_enable_i;
	output wire ctrl_busy_o;
	output wire core_ctrl_firstfetch_o;
	output wire illegal_insn_o;
	input wire instr_valid_i;
	input wire instr_new_i;
	input wire [31:0] instr_rdata_i;
	input wire [15:0] instr_rdata_c_i;
	input wire instr_is_compressed_i;
	output wire instr_req_o;
	output wire instr_valid_clear_o;
	output wire id_in_ready_o;
	input wire branch_decision_i;
	output wire pc_set_o;
	output wire [2:0] pc_mux_o;
	output wire [1:0] exc_pc_mux_o;
	output wire [5:0] exc_cause_o;
	input wire illegal_c_insn_i;
	input wire instr_fetch_err_i;
	input wire [31:0] pc_id_i;
	input wire ex_valid_i;
	input wire lsu_valid_i;
	output wire [4:0] alu_operator_ex_o;
	output wire [31:0] alu_operand_a_ex_o;
	output wire [31:0] alu_operand_b_ex_o;
	output wire mult_en_ex_o;
	output wire div_en_ex_o;
	output wire [1:0] multdiv_operator_ex_o;
	output wire [1:0] multdiv_signed_mode_ex_o;
	output wire [31:0] multdiv_operand_a_ex_o;
	output wire [31:0] multdiv_operand_b_ex_o;
	output wire csr_access_o;
	output wire [1:0] csr_op_o;
	output wire csr_save_if_o;
	output wire csr_save_id_o;
	output wire csr_restore_mret_id_o;
	output wire csr_save_cause_o;
	output wire [31:0] csr_mtval_o;
	input wire illegal_csr_insn_i;
	output wire data_req_ex_o;
	output wire data_we_ex_o;
	output wire [1:0] data_type_ex_o;
	output wire data_sign_ext_ex_o;
	output wire [31:0] data_wdata_ex_o;
	input wire lsu_addr_incr_req_i;
	input wire [31:0] lsu_addr_last_i;
	input wire csr_mstatus_mie_i;
	input wire csr_msip_i;
	input wire csr_mtip_i;
	input wire csr_meip_i;
	input wire [14:0] csr_mfip_i;
	input wire irq_pending_i;
	input wire irq_nm_i;
	input wire lsu_load_err_i;
	input wire lsu_store_err_i;
	output wire debug_mode_o;
	output wire [2:0] debug_cause_o;
	output wire debug_csr_save_o;
	input wire debug_req_i;
	input wire debug_single_step_i;
	input wire debug_ebreakm_i;
	input wire [31:0] regfile_wdata_lsu_i;
	input wire [31:0] regfile_wdata_ex_i;
	input wire [31:0] csr_rdata_i;
	output wire perf_jump_o;
	output reg perf_branch_o;
	output wire perf_tbranch_o;
	output reg instr_ret_o;
	output wire instr_ret_compressed_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	wire illegal_insn_dec;
	wire ebrk_insn;
	wire mret_insn_dec;
	wire dret_insn_dec;
	wire ecall_insn_dec;
	wire wfi_insn_dec;
	wire branch_in_dec;
	reg branch_set_n;
	reg branch_set_q;
	wire jump_in_dec;
	wire jump_set;
	wire instr_executing;
	wire instr_multicycle;
	reg instr_multicycle_done_n;
	reg instr_multicycle_done_q;
	reg stall_lsu;
	reg stall_multdiv;
	reg stall_branch;
	reg stall_jump;
	wire [31:0] imm_i_type;
	wire [31:0] imm_s_type;
	wire [31:0] imm_b_type;
	wire [31:0] imm_u_type;
	wire [31:0] imm_j_type;
	wire [31:0] zimm_rs1_type;
	wire [31:0] imm_a;
	reg [31:0] imm_b;
	wire [4:0] regfile_raddr_a;
	wire [4:0] regfile_raddr_b;
	wire [4:0] regfile_waddr;
	wire [31:0] regfile_rdata_a;
	wire [31:0] regfile_rdata_b;
	reg [31:0] regfile_wdata;
	wire [1:0] regfile_wdata_sel;
	wire regfile_we;
	reg regfile_we_wb;
	wire regfile_we_dec;
	wire [4:0] alu_operator;
	wire [1:0] alu_op_a_mux_sel;
	wire [1:0] alu_op_a_mux_sel_dec;
	wire [0:0] alu_op_b_mux_sel;
	wire [0:0] alu_op_b_mux_sel_dec;
	wire [0:0] imm_a_mux_sel;
	wire [2:0] imm_b_mux_sel;
	wire [2:0] imm_b_mux_sel_dec;
	wire mult_en_id;
	wire mult_en_dec;
	wire div_en_id;
	wire div_en_dec;
	wire multdiv_en_dec;
	wire [1:0] multdiv_operator;
	wire [1:0] multdiv_signed_mode;
	wire data_we_id;
	wire [1:0] data_type_id;
	wire data_sign_ext_id;
	wire data_req_id;
	wire data_req_dec;
	wire csr_pipe_flush;
	reg [31:0] alu_operand_a;
	wire [31:0] alu_operand_b;
	assign alu_op_a_mux_sel = (lsu_addr_incr_req_i ? OP_A_FWD : alu_op_a_mux_sel_dec);
	assign alu_op_b_mux_sel = (lsu_addr_incr_req_i ? OP_B_IMM : alu_op_b_mux_sel_dec);
	assign imm_b_mux_sel = (lsu_addr_incr_req_i ? IMM_B_INCR_ADDR : imm_b_mux_sel_dec);
	assign imm_a = ((imm_a_mux_sel == IMM_A_Z) ? zimm_rs1_type : 1&#39;sb0);
	always @(*) begin : alu_operand_a_mux
		case (alu_op_a_mux_sel)
			OP_A_REG_A: alu_operand_a = regfile_rdata_a;
			OP_A_FWD: alu_operand_a = lsu_addr_last_i;
			OP_A_CURRPC: alu_operand_a = pc_id_i;
			OP_A_IMM: alu_operand_a = imm_a;
			default: alu_operand_a = 1&#39;sbX;
		endcase
	end
	always @(*) begin : immediate_b_mux
		case (imm_b_mux_sel)
			IMM_B_I: imm_b = imm_i_type;
			IMM_B_S: imm_b = imm_s_type;
			IMM_B_B: imm_b = imm_b_type;
			IMM_B_U: imm_b = imm_u_type;
			IMM_B_J: imm_b = imm_j_type;
			IMM_B_INCR_PC: imm_b = (instr_is_compressed_i ? 32&#39;h2 : 32&#39;h4);
			IMM_B_INCR_ADDR: imm_b = 32&#39;h4;
			default: imm_b = 1&#39;sbX;
		endcase
	end
	assign alu_operand_b = ((alu_op_b_mux_sel == OP_B_IMM) ? imm_b : regfile_rdata_b);
	assign regfile_we = ((illegal_csr_insn_i || !instr_executing) ? 1&#39;b0 : ((data_req_dec || multdiv_en_dec) ? regfile_we_wb : regfile_we_dec));
	always @(*) begin : regfile_wdata_mux
		case (regfile_wdata_sel)
			RF_WD_EX: regfile_wdata = regfile_wdata_ex_i;
			RF_WD_LSU: regfile_wdata = regfile_wdata_lsu_i;
			RF_WD_CSR: regfile_wdata = csr_rdata_i;
			default: regfile_wdata = 1&#39;sbX;
		endcase
	end
	ibex_register_file #(.RV32E(RV32E)) registers_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.test_en_i(test_en_i),
		.raddr_a_i(regfile_raddr_a),
		.rdata_a_o(regfile_rdata_a),
		.raddr_b_i(regfile_raddr_b),
		.rdata_b_o(regfile_rdata_b),
		.waddr_a_i(regfile_waddr),
		.wdata_a_i(regfile_wdata),
		.we_a_i(regfile_we)
	);
	ibex_decoder #(
		.RV32E(RV32E),
		.RV32M(RV32M)
	) decoder_i(
		.illegal_insn_o(illegal_insn_dec),
		.ebrk_insn_o(ebrk_insn),
		.mret_insn_o(mret_insn_dec),
		.dret_insn_o(dret_insn_dec),
		.ecall_insn_o(ecall_insn_dec),
		.wfi_insn_o(wfi_insn_dec),
		.jump_set_o(jump_set),
		.instr_new_i(instr_new_i),
		.instr_rdata_i(instr_rdata_i),
		.illegal_c_insn_i(illegal_c_insn_i),
		.imm_a_mux_sel_o(imm_a_mux_sel),
		.imm_b_mux_sel_o(imm_b_mux_sel_dec),
		.imm_i_type_o(imm_i_type),
		.imm_s_type_o(imm_s_type),
		.imm_b_type_o(imm_b_type),
		.imm_u_type_o(imm_u_type),
		.imm_j_type_o(imm_j_type),
		.zimm_rs1_type_o(zimm_rs1_type),
		.regfile_wdata_sel_o(regfile_wdata_sel),
		.regfile_we_o(regfile_we_dec),
		.regfile_raddr_a_o(regfile_raddr_a),
		.regfile_raddr_b_o(regfile_raddr_b),
		.regfile_waddr_o(regfile_waddr),
		.alu_operator_o(alu_operator),
		.alu_op_a_mux_sel_o(alu_op_a_mux_sel_dec),
		.alu_op_b_mux_sel_o(alu_op_b_mux_sel_dec),
		.mult_en_o(mult_en_dec),
		.div_en_o(div_en_dec),
		.multdiv_operator_o(multdiv_operator),
		.multdiv_signed_mode_o(multdiv_signed_mode),
		.csr_access_o(csr_access_o),
		.csr_op_o(csr_op_o),
		.csr_pipe_flush_o(csr_pipe_flush),
		.data_req_o(data_req_dec),
		.data_we_o(data_we_id),
		.data_type_o(data_type_id),
		.data_sign_extension_o(data_sign_ext_id),
		.jump_in_dec_o(jump_in_dec),
		.branch_in_dec_o(branch_in_dec)
	);
	assign illegal_insn_o = (illegal_insn_dec | illegal_csr_insn_i);
	ibex_controller controller_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.fetch_enable_i(fetch_enable_i),
		.ctrl_busy_o(ctrl_busy_o),
		.first_fetch_o(core_ctrl_firstfetch_o),
		.illegal_insn_i(illegal_insn_o),
		.ecall_insn_i(ecall_insn_dec),
		.mret_insn_i(mret_insn_dec),
		.dret_insn_i(dret_insn_dec),
		.wfi_insn_i(wfi_insn_dec),
		.ebrk_insn_i(ebrk_insn),
		.csr_pipe_flush_i(csr_pipe_flush),
		.instr_valid_i(instr_valid_i),
		.instr_i(instr_rdata_i),
		.instr_compressed_i(instr_rdata_c_i),
		.instr_is_compressed_i(instr_is_compressed_i),
		.instr_fetch_err_i(instr_fetch_err_i),
		.pc_id_i(pc_id_i),
		.instr_valid_clear_o(instr_valid_clear_o),
		.id_in_ready_o(id_in_ready_o),
		.instr_req_o(instr_req_o),
		.pc_set_o(pc_set_o),
		.pc_mux_o(pc_mux_o),
		.exc_pc_mux_o(exc_pc_mux_o),
		.exc_cause_o(exc_cause_o),
		.lsu_addr_last_i(lsu_addr_last_i),
		.load_err_i(lsu_load_err_i),
		.store_err_i(lsu_store_err_i),
		.branch_set_i(branch_set_q),
		.jump_set_i(jump_set),
		.csr_mstatus_mie_i(csr_mstatus_mie_i),
		.csr_msip_i(csr_msip_i),
		.csr_mtip_i(csr_mtip_i),
		.csr_meip_i(csr_meip_i),
		.csr_mfip_i(csr_mfip_i),
		.irq_pending_i(irq_pending_i),
		.irq_nm_i(irq_nm_i),
		.csr_save_if_o(csr_save_if_o),
		.csr_save_id_o(csr_save_id_o),
		.csr_restore_mret_id_o(csr_restore_mret_id_o),
		.csr_save_cause_o(csr_save_cause_o),
		.csr_mtval_o(csr_mtval_o),
		.debug_mode_o(debug_mode_o),
		.debug_cause_o(debug_cause_o),
		.debug_csr_save_o(debug_csr_save_o),
		.debug_req_i(debug_req_i),
		.debug_single_step_i(debug_single_step_i),
		.debug_ebreakm_i(debug_ebreakm_i),
		.stall_lsu_i(stall_lsu),
		.stall_multdiv_i(stall_multdiv),
		.stall_jump_i(stall_jump),
		.stall_branch_i(stall_branch),
		.perf_jump_o(perf_jump_o),
		.perf_tbranch_o(perf_tbranch_o)
	);
	assign multdiv_en_dec = (mult_en_dec | div_en_dec);
	assign instr_multicycle = (((data_req_dec | multdiv_en_dec) | branch_in_dec) | jump_in_dec);
	assign instr_executing = (instr_new_i | (instr_multicycle &amp; ~instr_multicycle_done_q));
	assign data_req_id = (instr_executing ? data_req_dec : 1&#39;b0);
	assign mult_en_id = (instr_executing ? mult_en_dec : 1&#39;b0);
	assign div_en_id = (instr_executing ? div_en_dec : 1&#39;b0);
	assign data_req_ex_o = data_req_id;
	assign data_we_ex_o = data_we_id;
	assign data_type_ex_o = data_type_id;
	assign data_sign_ext_ex_o = data_sign_ext_id;
	assign data_wdata_ex_o = regfile_rdata_b;
	assign alu_operator_ex_o = alu_operator;
	assign alu_operand_a_ex_o = alu_operand_a;
	assign alu_operand_b_ex_o = alu_operand_b;
	assign mult_en_ex_o = mult_en_id;
	assign div_en_ex_o = div_en_id;
	assign multdiv_operator_ex_o = multdiv_operator;
	assign multdiv_signed_mode_ex_o = multdiv_signed_mode;
	assign multdiv_operand_a_ex_o = regfile_rdata_a;
	assign multdiv_operand_b_ex_o = regfile_rdata_b;
	reg [0:0] id_wb_fsm_cs;
	reg [0:0] id_wb_fsm_ns;
	always @(posedge clk_i or negedge rst_ni) begin : id_wb_pipeline_reg
		if (!rst_ni) begin
			id_wb_fsm_cs &lt;= IDLE;
			branch_set_q &lt;= 1&#39;b0;
			instr_multicycle_done_q &lt;= 1&#39;b0;
		end
		else begin
			id_wb_fsm_cs &lt;= id_wb_fsm_ns;
			branch_set_q &lt;= branch_set_n;
			instr_multicycle_done_q &lt;= instr_multicycle_done_n;
		end
	end
	always @(*) begin : id_wb_fsm
		id_wb_fsm_ns = id_wb_fsm_cs;
		instr_multicycle_done_n = instr_multicycle_done_q;
		regfile_we_wb = 1&#39;b0;
		stall_lsu = 1&#39;b0;
		stall_multdiv = 1&#39;b0;
		stall_jump = 1&#39;b0;
		stall_branch = 1&#39;b0;
		branch_set_n = 1&#39;b0;
		perf_branch_o = 1&#39;b0;
		instr_ret_o = 1&#39;b0;
		case (id_wb_fsm_cs)
			IDLE:
				if (instr_new_i)
					case (1&#39;b1)
						data_req_dec: begin
							id_wb_fsm_ns = WAIT_MULTICYCLE;
							stall_lsu = 1&#39;b1;
							instr_multicycle_done_n = 1&#39;b0;
						end
						multdiv_en_dec: begin
							id_wb_fsm_ns = WAIT_MULTICYCLE;
							stall_multdiv = 1&#39;b1;
							instr_multicycle_done_n = 1&#39;b0;
						end
						branch_in_dec: begin
							id_wb_fsm_ns = (branch_decision_i ? WAIT_MULTICYCLE : IDLE);
							stall_branch = branch_decision_i;
							instr_multicycle_done_n = ~branch_decision_i;
							branch_set_n = branch_decision_i;
							perf_branch_o = 1&#39;b1;
							instr_ret_o = ~branch_decision_i;
						end
						jump_in_dec: begin
							id_wb_fsm_ns = WAIT_MULTICYCLE;
							stall_jump = 1&#39;b1;
							instr_multicycle_done_n = 1&#39;b0;
						end
						default: begin
						instr_multicycle_done_n = 1&#39;b0;
						instr_ret_o = 1&#39;b1;
					end
					endcase
			WAIT_MULTICYCLE:
				if (((data_req_dec &amp; lsu_valid_i) | (~data_req_dec &amp; ex_valid_i))) begin
					id_wb_fsm_ns = IDLE;
					instr_multicycle_done_n = 1&#39;b1;
					regfile_we_wb = (regfile_we_dec &amp; ~lsu_load_err_i);
					instr_ret_o = 1&#39;b1;
				end
				else begin
					stall_lsu = data_req_dec;
					stall_multdiv = multdiv_en_dec;
					stall_branch = branch_in_dec;
					stall_jump = jump_in_dec;
				end
			default: id_wb_fsm_ns = 1&#39;bX;
		endcase
	end
	assign instr_ret_compressed_o = (instr_ret_o &amp; instr_is_compressed_i);
endmodule
module ibex_if_stage (
	clk_i,
	rst_ni,
	boot_addr_i,
	req_i,
	instr_req_o,
	instr_addr_o,
	instr_gnt_i,
	instr_rvalid_i,
	instr_rdata_i,
	instr_err_i,
	instr_pmp_err_i,
	instr_valid_id_o,
	instr_new_id_o,
	instr_rdata_id_o,
	instr_rdata_c_id_o,
	instr_is_compressed_id_o,
	instr_fetch_err_o,
	illegal_c_insn_id_o,
	pc_if_o,
	pc_id_o,
	instr_valid_clear_i,
	pc_set_i,
	pc_mux_i,
	exc_pc_mux_i,
	exc_cause,
	jump_target_ex_i,
	csr_mepc_i,
	csr_depc_i,
	csr_mtvec_i,
	csr_mtvec_init_o,
	id_in_ready_i,
	if_busy_o,
	perf_imiss_o
);
	parameter [31:0] DmHaltAddr = 32&#39;h1A110800;
	parameter [31:0] DmExceptionAddr = 32&#39;h1A110808;
	input wire clk_i;
	input wire rst_ni;
	input wire [31:0] boot_addr_i;
	input wire req_i;
	output wire instr_req_o;
	output wire [31:0] instr_addr_o;
	input wire instr_gnt_i;
	input wire instr_rvalid_i;
	input wire [31:0] instr_rdata_i;
	input wire instr_err_i;
	input wire instr_pmp_err_i;
	output reg instr_valid_id_o;
	output reg instr_new_id_o;
	output reg [31:0] instr_rdata_id_o;
	output reg [15:0] instr_rdata_c_id_o;
	output reg instr_is_compressed_id_o;
	output reg instr_fetch_err_o;
	output reg illegal_c_insn_id_o;
	output wire [31:0] pc_if_o;
	output reg [31:0] pc_id_o;
	input wire instr_valid_clear_i;
	input wire pc_set_i;
	input wire [2:0] pc_mux_i;
	input wire [1:0] exc_pc_mux_i;
	input wire [5:0] exc_cause;
	input wire [31:0] jump_target_ex_i;
	input wire [31:0] csr_mepc_i;
	input wire [31:0] csr_depc_i;
	input wire [31:0] csr_mtvec_i;
	output wire csr_mtvec_init_o;
	input wire id_in_ready_i;
	output wire if_busy_o;
	output wire perf_imiss_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	reg offset_in_init_d;
	reg offset_in_init_q;
	reg have_instr;
	wire prefetch_busy;
	reg branch_req;
	reg [31:0] fetch_addr_n;
	wire fetch_valid;
	reg fetch_ready;
	wire [31:0] fetch_rdata;
	wire [31:0] fetch_addr;
	wire fetch_err;
	reg [31:0] exc_pc;
	wire [5:0] irq_id;
	wire unused_irq_bit;
	wire if_id_pipe_reg_we;
	wire [7:0] unused_boot_addr;
	wire [7:0] unused_csr_mtvec;
	assign unused_boot_addr = boot_addr_i[7:0];
	assign unused_csr_mtvec = csr_mtvec_i[7:0];
	assign irq_id = exc_cause;
	assign unused_irq_bit = irq_id[5];
	always @(*) begin : exc_pc_mux
		case (exc_pc_mux_i)
			EXC_PC_EXC: exc_pc = {csr_mtvec_i[31:8], 8&#39;h00};
			EXC_PC_IRQ: exc_pc = {csr_mtvec_i[31:8], 1&#39;b0, irq_id[4:0], 2&#39;b00};
			EXC_PC_DBD: exc_pc = DmHaltAddr;
			EXC_PC_DBG_EXC: exc_pc = DmExceptionAddr;
			default: exc_pc = 1&#39;sbX;
		endcase
	end
	always @(*) begin : fetch_addr_mux
		case (pc_mux_i)
			PC_BOOT: fetch_addr_n = {boot_addr_i[31:8], 8&#39;h80};
			PC_JUMP: fetch_addr_n = jump_target_ex_i;
			PC_EXC: fetch_addr_n = exc_pc;
			PC_ERET: fetch_addr_n = csr_mepc_i;
			PC_DRET: fetch_addr_n = csr_depc_i;
			default: fetch_addr_n = 1&#39;sbX;
		endcase
	end
	assign csr_mtvec_init_o = ((pc_mux_i == PC_BOOT) &amp; pc_set_i);
	ibex_prefetch_buffer prefetch_buffer_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.req_i(req_i),
		.branch_i(branch_req),
		.addr_i({fetch_addr_n[31:1], 1&#39;b0}),
		.ready_i(fetch_ready),
		.valid_o(fetch_valid),
		.rdata_o(fetch_rdata),
		.addr_o(fetch_addr),
		.err_o(fetch_err),
		.instr_req_o(instr_req_o),
		.instr_addr_o(instr_addr_o),
		.instr_gnt_i(instr_gnt_i),
		.instr_rvalid_i(instr_rvalid_i),
		.instr_rdata_i(instr_rdata_i),
		.instr_err_i(instr_err_i),
		.instr_pmp_err_i(instr_pmp_err_i),
		.busy_o(prefetch_busy)
	);
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			offset_in_init_q &lt;= 1&#39;b1;
		else
			offset_in_init_q &lt;= offset_in_init_d;
	always @(*) begin
		offset_in_init_d = offset_in_init_q;
		fetch_ready = 1&#39;b0;
		branch_req = 1&#39;b0;
		have_instr = 1&#39;b0;
		if (offset_in_init_q)
			if (req_i) begin
				branch_req = 1&#39;b1;
				offset_in_init_d = 1&#39;b0;
			end
		else if (fetch_valid) begin
			have_instr = 1&#39;b1;
			if ((req_i &amp;&amp; if_id_pipe_reg_we)) begin
				fetch_ready = 1&#39;b1;
				offset_in_init_d = 1&#39;b0;
			end
		end
		if (pc_set_i) begin
			have_instr = 1&#39;b0;
			branch_req = 1&#39;b1;
			offset_in_init_d = 1&#39;b0;
		end
	end
	assign pc_if_o = fetch_addr;
	assign if_busy_o = prefetch_busy;
	assign perf_imiss_o = (~fetch_valid | branch_req);
	wire [31:0] instr_decompressed;
	wire illegal_c_insn;
	wire instr_is_compressed_int;
	ibex_compressed_decoder compressed_decoder_i(
		.instr_i(fetch_rdata),
		.instr_o(instr_decompressed),
		.is_compressed_o(instr_is_compressed_int),
		.illegal_instr_o(illegal_c_insn)
	);
	assign if_id_pipe_reg_we = (have_instr &amp; id_in_ready_i);
	always @(posedge clk_i or negedge rst_ni) begin : if_id_pipeline_regs
		if (!rst_ni) begin
			instr_new_id_o &lt;= 1&#39;b0;
			instr_valid_id_o &lt;= 1&#39;b0;
			instr_rdata_id_o &lt;= 1&#39;sb0;
			instr_fetch_err_o &lt;= 1&#39;sb0;
			instr_rdata_c_id_o &lt;= 1&#39;sb0;
			instr_is_compressed_id_o &lt;= 1&#39;b0;
			illegal_c_insn_id_o &lt;= 1&#39;b0;
			pc_id_o &lt;= 1&#39;sb0;
		end
		else begin
			instr_new_id_o &lt;= if_id_pipe_reg_we;
			if (if_id_pipe_reg_we) begin
				instr_valid_id_o &lt;= 1&#39;b1;
				instr_rdata_id_o &lt;= instr_decompressed;
				instr_fetch_err_o &lt;= fetch_err;
				instr_rdata_c_id_o &lt;= fetch_rdata[15:0];
				instr_is_compressed_id_o &lt;= instr_is_compressed_int;
				illegal_c_insn_id_o &lt;= illegal_c_insn;
				pc_id_o &lt;= pc_if_o;
			end
			else if (instr_valid_clear_i)
				instr_valid_id_o &lt;= 1&#39;b0;
		end
	end
endmodule
module ibex_load_store_unit (
	clk_i,
	rst_ni,
	data_req_o,
	data_gnt_i,
	data_rvalid_i,
	data_err_i,
	data_pmp_err_i,
	data_addr_o,
	data_we_o,
	data_be_o,
	data_wdata_o,
	data_rdata_i,
	data_we_ex_i,
	data_type_ex_i,
	data_wdata_ex_i,
	data_sign_ext_ex_i,
	data_rdata_ex_o,
	data_req_ex_i,
	adder_result_ex_i,
	addr_incr_req_o,
	addr_last_o,
	data_valid_o,
	load_err_o,
	store_err_o,
	busy_o
);
	localparam [2:0] IDLE = 0;
	localparam [2:0] WAIT_GNT_MIS = 1;
	localparam [2:0] WAIT_RVALID_MIS = 2;
	localparam [2:0] WAIT_GNT = 3;
	localparam [2:0] WAIT_RVALID = 4;
	localparam [2:0] WAIT_GNT_ERR = 5;
	localparam [2:0] WAIT_RVALID_ERR = 6;
	localparam [2:0] WAIT_RVALID_DONE = 7;
	input wire clk_i;
	input wire rst_ni;
	output reg data_req_o;
	input wire data_gnt_i;
	input wire data_rvalid_i;
	input wire data_err_i;
	input wire data_pmp_err_i;
	output wire [31:0] data_addr_o;
	output wire data_we_o;
	output wire [3:0] data_be_o;
	output wire [31:0] data_wdata_o;
	input wire [31:0] data_rdata_i;
	input wire data_we_ex_i;
	input wire [1:0] data_type_ex_i;
	input wire [31:0] data_wdata_ex_i;
	input wire data_sign_ext_ex_i;
	output wire [31:0] data_rdata_ex_o;
	input wire data_req_ex_i;
	input wire [31:0] adder_result_ex_i;
	output reg addr_incr_req_o;
	output wire [31:0] addr_last_o;
	output reg data_valid_o;
	output wire load_err_o;
	output wire store_err_o;
	output wire busy_o;
	wire [31:0] data_addr;
	wire [31:0] data_addr_w_aligned;
	reg [31:0] addr_last_q;
	reg [31:0] addr_last_d;
	wire data_update;
	reg [31:0] rdata_q;
	reg [31:0] rdata_d;
	reg [1:0] rdata_offset_q;
	wire [1:0] rdata_offset_d;
	reg [1:0] data_type_q;
	wire [1:0] data_type_d;
	reg data_sign_ext_q;
	wire data_sign_ext_d;
	reg data_we_q;
	wire data_we_d;
	wire [1:0] wdata_offset;
	reg [3:0] data_be;
	reg [31:0] data_wdata;
	reg [31:0] data_rdata_ext;
	reg [31:0] rdata_w_ext;
	reg [31:0] rdata_h_ext;
	reg [31:0] rdata_b_ext;
	wire split_misaligned_access;
	reg handle_misaligned_q;
	reg handle_misaligned_d;
	reg pmp_err_d;
	reg pmp_err_q;
	reg data_or_pmp_err;
	reg [2:0] ls_fsm_cs;
	reg [2:0] ls_fsm_ns;
	assign data_addr = adder_result_ex_i;
	always @(*)
		case (data_type_ex_i)
			2&#39;b00:
				if (!handle_misaligned_q)
					case (data_addr[1:0])
						2&#39;b00: data_be = 4&#39;b1111;
						2&#39;b01: data_be = 4&#39;b1110;
						2&#39;b10: data_be = 4&#39;b1100;
						2&#39;b11: data_be = 4&#39;b1000;
						default: data_be = 1&#39;sbX;
					endcase
				else
					case (data_addr[1:0])
						2&#39;b00: data_be = 4&#39;b0000;
						2&#39;b01: data_be = 4&#39;b0001;
						2&#39;b10: data_be = 4&#39;b0011;
						2&#39;b11: data_be = 4&#39;b0111;
						default: data_be = 1&#39;sbX;
					endcase
			2&#39;b01:
				if (!handle_misaligned_q)
					case (data_addr[1:0])
						2&#39;b00: data_be = 4&#39;b0011;
						2&#39;b01: data_be = 4&#39;b0110;
						2&#39;b10: data_be = 4&#39;b1100;
						2&#39;b11: data_be = 4&#39;b1000;
						default: data_be = 1&#39;sbX;
					endcase
				else
					data_be = 4&#39;b0001;
			2&#39;b10, 2&#39;b11:
				case (data_addr[1:0])
					2&#39;b00: data_be = 4&#39;b0001;
					2&#39;b01: data_be = 4&#39;b0010;
					2&#39;b10: data_be = 4&#39;b0100;
					2&#39;b11: data_be = 4&#39;b1000;
					default: data_be = 1&#39;sbX;
				endcase
			default: data_be = 1&#39;sbX;
		endcase
	assign wdata_offset = data_addr[1:0];
	always @(*)
		case (wdata_offset)
			2&#39;b00: data_wdata = data_wdata_ex_i[31:0];
			2&#39;b01: data_wdata = {data_wdata_ex_i[23:0], data_wdata_ex_i[31:24]};
			2&#39;b10: data_wdata = {data_wdata_ex_i[15:0], data_wdata_ex_i[31:16]};
			2&#39;b11: data_wdata = {data_wdata_ex_i[7:0], data_wdata_ex_i[31:8]};
			default: data_wdata = 1&#39;sbX;
		endcase
	always @(*) begin
		rdata_d = rdata_q;
		if (((data_rvalid_i &amp; ~data_we_q) &amp; handle_misaligned_q))
			rdata_d = data_rdata_i;
	end
	assign data_update = (data_gnt_i | pmp_err_q);
	assign rdata_offset_d = (data_update ? data_addr[1:0] : rdata_offset_q);
	assign data_type_d = (data_update ? data_type_ex_i : data_type_q);
	assign data_sign_ext_d = (data_update ? data_sign_ext_ex_i : data_sign_ext_q);
	assign data_we_d = (data_update ? data_we_ex_i : data_we_q);
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			rdata_q &lt;= 1&#39;sb0;
			rdata_offset_q &lt;= 2&#39;h0;
			data_type_q &lt;= 2&#39;h0;
			data_sign_ext_q &lt;= 1&#39;b0;
			data_we_q &lt;= 1&#39;b0;
		end
		else begin
			rdata_q &lt;= rdata_d;
			rdata_offset_q &lt;= rdata_offset_d;
			data_type_q &lt;= data_type_d;
			data_sign_ext_q &lt;= data_sign_ext_d;
			data_we_q &lt;= data_we_d;
		end
	always @(*)
		case (rdata_offset_q)
			2&#39;b00: rdata_w_ext = data_rdata_i[31:0];
			2&#39;b01: rdata_w_ext = {data_rdata_i[7:0], rdata_q[31:8]};
			2&#39;b10: rdata_w_ext = {data_rdata_i[15:0], rdata_q[31:16]};
			2&#39;b11: rdata_w_ext = {data_rdata_i[23:0], rdata_q[31:24]};
			default: rdata_w_ext = 1&#39;sbX;
		endcase
	always @(*)
		case (rdata_offset_q)
			2&#39;b00:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[15:0]};
				else
					rdata_h_ext = {{16 {data_rdata_i[15]}}, data_rdata_i[15:0]};
			2&#39;b01:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[23:8]};
				else
					rdata_h_ext = {{16 {data_rdata_i[23]}}, data_rdata_i[23:8]};
			2&#39;b10:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[31:16]};
				else
					rdata_h_ext = {{16 {data_rdata_i[31]}}, data_rdata_i[31:16]};
			2&#39;b11:
				if (!data_sign_ext_q)
					rdata_h_ext = {16&#39;h0000, data_rdata_i[7:0], rdata_q[31:24]};
				else
					rdata_h_ext = {{16 {data_rdata_i[7]}}, data_rdata_i[7:0], rdata_q[31:24]};
			default: rdata_h_ext = 1&#39;sbX;
		endcase
	always @(*)
		case (rdata_offset_q)
			2&#39;b00:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[7:0]};
				else
					rdata_b_ext = {{24 {data_rdata_i[7]}}, data_rdata_i[7:0]};
			2&#39;b01:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[15:8]};
				else
					rdata_b_ext = {{24 {data_rdata_i[15]}}, data_rdata_i[15:8]};
			2&#39;b10:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[23:16]};
				else
					rdata_b_ext = {{24 {data_rdata_i[23]}}, data_rdata_i[23:16]};
			2&#39;b11:
				if (!data_sign_ext_q)
					rdata_b_ext = {24&#39;h00_0000, data_rdata_i[31:24]};
				else
					rdata_b_ext = {{24 {data_rdata_i[31]}}, data_rdata_i[31:24]};
			default: rdata_b_ext = 1&#39;sbX;
		endcase
	always @(*)
		case (data_type_q)
			2&#39;b00: data_rdata_ext = rdata_w_ext;
			2&#39;b01: data_rdata_ext = rdata_h_ext;
			2&#39;b10, 2&#39;b11: data_rdata_ext = rdata_b_ext;
			default: data_rdata_ext = 1&#39;sbX;
		endcase
	assign split_misaligned_access = (((data_type_ex_i == 2&#39;b00) &amp;&amp; (data_addr[1:0] != 2&#39;b00)) || ((data_type_ex_i == 2&#39;b01) &amp;&amp; (data_addr[1:0] == 2&#39;b11)));
	always @(*) begin
		ls_fsm_ns = ls_fsm_cs;
		data_req_o = 1&#39;b0;
		data_valid_o = 1&#39;b0;
		addr_incr_req_o = 1&#39;b0;
		handle_misaligned_d = handle_misaligned_q;
		data_or_pmp_err = 1&#39;b0;
		pmp_err_d = pmp_err_q;
		case (ls_fsm_cs)
			IDLE:
				if (data_req_ex_i) begin
					data_req_o = 1&#39;b1;
					pmp_err_d = data_pmp_err_i;
					if (data_gnt_i) begin
						handle_misaligned_d = split_misaligned_access;
						ls_fsm_ns = (split_misaligned_access ? WAIT_RVALID_MIS : WAIT_RVALID);
					end
					else
						ls_fsm_ns = (split_misaligned_access ? WAIT_GNT_MIS : WAIT_GNT);
				end
			WAIT_GNT_MIS: begin
				data_req_o = 1&#39;b1;
				if ((data_gnt_i || pmp_err_q)) begin
					handle_misaligned_d = 1&#39;b1;
					ls_fsm_ns = WAIT_RVALID_MIS;
				end
			end
			WAIT_RVALID_MIS: begin
				data_req_o = 1&#39;b1;
				addr_incr_req_o = 1&#39;b1;
				if ((data_rvalid_i || pmp_err_q)) begin
					pmp_err_d = data_pmp_err_i;
					if ((pmp_err_q || data_err_i)) begin
						data_valid_o = 1&#39;b1;
						data_or_pmp_err = 1&#39;b1;
						handle_misaligned_d = 1&#39;b0;
						ls_fsm_ns = (data_gnt_i ? WAIT_RVALID_ERR : WAIT_GNT_ERR);
					end
					else
						ls_fsm_ns = (data_gnt_i ? WAIT_RVALID : WAIT_GNT);
				end
				else if (data_gnt_i)
					ls_fsm_ns = WAIT_RVALID_DONE;
			end
			WAIT_GNT: begin
				addr_incr_req_o = handle_misaligned_q;
				data_req_o = 1&#39;b1;
				if ((data_gnt_i || pmp_err_q))
					ls_fsm_ns = WAIT_RVALID;
			end
			WAIT_RVALID: begin
				data_req_o = 1&#39;b0;
				if ((data_rvalid_i || pmp_err_q)) begin
					data_valid_o = 1&#39;b1;
					data_or_pmp_err = (data_err_i | pmp_err_q);
					handle_misaligned_d = 1&#39;b0;
					ls_fsm_ns = IDLE;
				end
				else
					ls_fsm_ns = WAIT_RVALID;
			end
			WAIT_GNT_ERR: begin
				data_req_o = 1&#39;b1;
				addr_incr_req_o = 1&#39;b1;
				if (pmp_err_q)
					ls_fsm_ns = IDLE;
				else if (data_gnt_i)
					ls_fsm_ns = WAIT_RVALID_ERR;
			end
			WAIT_RVALID_ERR:
				if ((data_rvalid_i || pmp_err_q))
					ls_fsm_ns = IDLE;
			WAIT_RVALID_DONE:
				if (data_rvalid_i) begin
					pmp_err_d = data_pmp_err_i;
					if (data_err_i) begin
						data_valid_o = 1&#39;b1;
						data_or_pmp_err = 1&#39;b1;
						handle_misaligned_d = 1&#39;b0;
						ls_fsm_ns = WAIT_RVALID_ERR;
					end
					else
						ls_fsm_ns = WAIT_RVALID;
				end
			default: ls_fsm_ns = 1&#39;bX;
		endcase
	end
	always @(*) begin
		addr_last_d = addr_last_q;
		if (((data_req_o &amp; data_gnt_i) &amp; ~(load_err_o | store_err_o)))
			addr_last_d = data_addr;
	end
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			ls_fsm_cs &lt;= IDLE;
			addr_last_q &lt;= 1&#39;sb0;
			handle_misaligned_q &lt;= 1&#39;sb0;
			pmp_err_q &lt;= 1&#39;sb0;
		end
		else begin
			ls_fsm_cs &lt;= ls_fsm_ns;
			addr_last_q &lt;= addr_last_d;
			handle_misaligned_q &lt;= handle_misaligned_d;
			pmp_err_q &lt;= pmp_err_d;
		end
	assign data_rdata_ex_o = data_rdata_ext;
	assign data_addr_w_aligned = {data_addr[31:2], 2&#39;b00};
	assign data_addr_o = data_addr_w_aligned;
	assign data_wdata_o = data_wdata;
	assign data_we_o = data_we_ex_i;
	assign data_be_o = data_be;
	assign addr_last_o = addr_last_q;
	assign load_err_o = (data_or_pmp_err &amp; ~data_we_q);
	assign store_err_o = (data_or_pmp_err &amp; data_we_q);
	assign busy_o = (ls_fsm_cs != IDLE);
endmodule
module ibex_multdiv_slow (
	clk_i,
	rst_ni,
	mult_en_i,
	div_en_i,
	operator_i,
	signed_mode_i,
	op_a_i,
	op_b_i,
	alu_adder_ext_i,
	alu_adder_i,
	equal_to_zero,
	alu_operand_a_o,
	alu_operand_b_o,
	multdiv_result_o,
	valid_o
);
	localparam [2:0] MD_IDLE = 0;
	localparam [2:0] MD_ABS_A = 1;
	localparam [2:0] MD_ABS_B = 2;
	localparam [2:0] MD_COMP = 3;
	localparam [2:0] MD_LAST = 4;
	localparam [2:0] MD_CHANGE_SIGN = 5;
	localparam [2:0] MD_FINISH = 6;
	input wire clk_i;
	input wire rst_ni;
	input wire mult_en_i;
	input wire div_en_i;
	input wire [1:0] operator_i;
	input wire [1:0] signed_mode_i;
	input wire [31:0] op_a_i;
	input wire [31:0] op_b_i;
	input wire [33:0] alu_adder_ext_i;
	input wire [31:0] alu_adder_i;
	input wire equal_to_zero;
	output reg [32:0] alu_operand_a_o;
	output reg [32:0] alu_operand_b_o;
	output reg [31:0] multdiv_result_o;
	output wire valid_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	reg [4:0] multdiv_state_q;
	reg [4:0] multdiv_state_d;
	wire [4:0] multdiv_state_m1;
	reg [2:0] md_state_q;
	reg [2:0] md_state_d;
	reg [32:0] accum_window_q;
	reg [32:0] accum_window_d;
	wire [32:0] res_adder_l;
	wire [32:0] res_adder_h;
	reg [32:0] op_b_shift_q;
	reg [32:0] op_b_shift_d;
	reg [32:0] op_a_shift_q;
	reg [32:0] op_a_shift_d;
	wire [32:0] op_a_ext;
	wire [32:0] op_b_ext;
	wire [32:0] one_shift;
	wire [32:0] op_a_bw_pp;
	wire [32:0] op_a_bw_last_pp;
	wire [31:0] b_0;
	wire sign_a;
	wire sign_b;
	wire [32:0] next_reminder;
	wire [32:0] next_quotient;
	wire [32:0] op_remainder;
	reg [31:0] op_numerator_q;
	reg [31:0] op_numerator_d;
	wire is_greater_equal;
	wire div_change_sign;
	wire rem_change_sign;
	assign res_adder_l = alu_adder_ext_i[32:0];
	assign res_adder_h = alu_adder_ext_i[33:1];
	always @(*) begin
		alu_operand_a_o = accum_window_q;
		multdiv_result_o = (div_en_i ? accum_window_q[31:0] : res_adder_l);
		case (operator_i)
			MD_OP_MULL: alu_operand_b_o = op_a_bw_pp;
			MD_OP_MULH: alu_operand_b_o = ((md_state_q == MD_LAST) ? op_a_bw_last_pp : op_a_bw_pp);
			default: case (md_state_q)
			MD_IDLE: begin
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_b_i, 1&#39;b1};
			end
			MD_ABS_A: begin
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_a_i, 1&#39;b1};
			end
			MD_ABS_B: begin
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_b_i, 1&#39;b1};
			end
			MD_CHANGE_SIGN: begin
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~accum_window_q[31:0], 1&#39;b1};
			end
			default: begin
			alu_operand_a_o = {accum_window_q[31:0], 1&#39;b1};
			alu_operand_b_o = {~op_b_shift_q[31:0], 1&#39;b1};
		end
		endcase
		endcase
	end
	assign is_greater_equal = (((accum_window_q[31] ^ op_b_shift_q[31]) == 1&#39;b0) ? (res_adder_h[31] == 1&#39;b0) : accum_window_q[31]);
	assign one_shift = ({32&#39;b0, 1&#39;b1} &lt;&lt; multdiv_state_q);
	assign next_reminder = (is_greater_equal ? res_adder_h : op_remainder);
	assign next_quotient = (is_greater_equal ? (op_a_shift_q | one_shift) : op_a_shift_q);
	assign b_0 = {32 {op_b_shift_q[0]}};
	assign op_a_bw_pp = {~(op_a_shift_q[32] &amp; op_b_shift_q[0]), (op_a_shift_q[31:0] &amp; b_0)};
	assign op_a_bw_last_pp = {(op_a_shift_q[32] &amp; op_b_shift_q[0]), ~(op_a_shift_q[31:0] &amp; b_0)};
	assign sign_a = (op_a_i[31] &amp; signed_mode_i[0]);
	assign sign_b = (op_b_i[31] &amp; signed_mode_i[1]);
	assign op_a_ext = {sign_a, op_a_i};
	assign op_b_ext = {sign_b, op_b_i};
	assign op_remainder = accum_window_q[32:0];
	assign multdiv_state_m1 = (multdiv_state_q - 5&#39;h1);
	assign div_change_sign = (sign_a ^ sign_b);
	assign rem_change_sign = sign_a;
	always @(posedge clk_i or negedge rst_ni) begin : proc_multdiv_state_q
		if (!rst_ni) begin
			multdiv_state_q &lt;= 5&#39;h0;
			accum_window_q &lt;= 33&#39;h0;
			op_b_shift_q &lt;= 33&#39;h0;
			op_a_shift_q &lt;= 33&#39;h0;
			op_numerator_q &lt;= 32&#39;h0;
			md_state_q &lt;= MD_IDLE;
		end
		else begin
			multdiv_state_q &lt;= multdiv_state_d;
			accum_window_q &lt;= accum_window_d;
			op_b_shift_q &lt;= op_b_shift_d;
			op_a_shift_q &lt;= op_a_shift_d;
			op_numerator_q &lt;= op_numerator_d;
			md_state_q &lt;= md_state_d;
		end
	end
	always @(*) begin
		multdiv_state_d = multdiv_state_q;
		accum_window_d = accum_window_q;
		op_b_shift_d = op_b_shift_q;
		op_a_shift_d = op_a_shift_q;
		op_numerator_d = op_numerator_q;
		md_state_d = md_state_q;
		if ((mult_en_i || div_en_i))
			case (md_state_q)
				MD_IDLE: begin
					case (operator_i)
						MD_OP_MULL: begin
							op_a_shift_d = (op_a_ext &lt;&lt; 1);
							accum_window_d = {~(op_a_ext[32] &amp; op_b_i[0]), (op_a_ext[31:0] &amp; {32 {op_b_i[0]}})};
							op_b_shift_d = (op_b_ext &gt;&gt; 1);
							md_state_d = MD_COMP;
						end
						MD_OP_MULH: begin
							op_a_shift_d = op_a_ext;
							accum_window_d = {1&#39;b1, ~(op_a_ext[32] &amp; op_b_i[0]), (op_a_ext[31:1] &amp; {31 {op_b_i[0]}})};
							op_b_shift_d = (op_b_ext &gt;&gt; 1);
							md_state_d = MD_COMP;
						end
						MD_OP_DIV: begin
							accum_window_d = {33 {1&#39;b1}};
							md_state_d = (equal_to_zero ? MD_FINISH : MD_ABS_A);
						end
						default: begin
						accum_window_d = op_a_ext;
						md_state_d = (equal_to_zero ? MD_FINISH : MD_ABS_A);
					end
					endcase
					multdiv_state_d = 5&#39;d31;
				end
				MD_ABS_A: begin
					op_a_shift_d = 1&#39;sb0;
					op_numerator_d = (sign_a ? alu_adder_i : op_a_i);
					md_state_d = MD_ABS_B;
				end
				MD_ABS_B: begin
					accum_window_d = {32&#39;h0, op_numerator_q[31]};
					op_b_shift_d = (sign_b ? alu_adder_i : op_b_i);
					md_state_d = MD_COMP;
				end
				MD_COMP: begin
					multdiv_state_d = multdiv_state_m1;
					case (operator_i)
						MD_OP_MULL: begin
							accum_window_d = res_adder_l;
							op_a_shift_d = (op_a_shift_q &lt;&lt; 1);
							op_b_shift_d = (op_b_shift_q &gt;&gt; 1);
						end
						MD_OP_MULH: begin
							accum_window_d = res_adder_h;
							op_a_shift_d = op_a_shift_q;
							op_b_shift_d = (op_b_shift_q &gt;&gt; 1);
						end
						default: begin
						accum_window_d = {next_reminder[31:0], op_numerator_q[multdiv_state_m1]};
						op_a_shift_d = next_quotient;
					end
					endcase
					md_state_d = ((multdiv_state_q == 5&#39;d1) ? MD_LAST : MD_COMP);
				end
				MD_LAST:
					case (operator_i)
						MD_OP_MULL: begin
							accum_window_d = res_adder_l;
							md_state_d = MD_IDLE;
						end
						MD_OP_MULH: begin
							accum_window_d = res_adder_l;
							md_state_d = MD_IDLE;
						end
						MD_OP_DIV: begin
							accum_window_d = next_quotient;
							md_state_d = MD_CHANGE_SIGN;
						end
						default: begin
						accum_window_d = {1&#39;b0, next_reminder[31:0]};
						md_state_d = MD_CHANGE_SIGN;
					end
					endcase
				MD_CHANGE_SIGN: begin
					md_state_d = MD_FINISH;
					case (operator_i)
						MD_OP_DIV: accum_window_d = (div_change_sign ? alu_adder_i : accum_window_q);
						default: accum_window_d = (rem_change_sign ? alu_adder_i : accum_window_q);
					endcase
				end
				MD_FINISH: md_state_d = MD_IDLE;
				default: md_state_d = 1&#39;bX;
			endcase
	end
	assign valid_o = ((md_state_q == MD_FINISH) | ((md_state_q == MD_LAST) &amp; ((operator_i == MD_OP_MULL) | (operator_i == MD_OP_MULH))));
endmodule
module ibex_multdiv_fast (
	clk_i,
	rst_ni,
	mult_en_i,
	div_en_i,
	operator_i,
	signed_mode_i,
	op_a_i,
	op_b_i,
	alu_adder_ext_i,
	alu_adder_i,
	equal_to_zero,
	alu_operand_a_o,
	alu_operand_b_o,
	multdiv_result_o,
	valid_o
);
	localparam [1:0] ALBL = 0;
	localparam [2:0] MD_IDLE = 0;
	localparam [1:0] ALBH = 1;
	localparam [2:0] MD_ABS_A = 1;
	localparam [1:0] AHBL = 2;
	localparam [2:0] MD_ABS_B = 2;
	localparam [1:0] AHBH = 3;
	localparam [2:0] MD_COMP = 3;
	localparam [2:0] MD_LAST = 4;
	localparam [2:0] MD_CHANGE_SIGN = 5;
	localparam [2:0] MD_FINISH = 6;
	input wire clk_i;
	input wire rst_ni;
	input wire mult_en_i;
	input wire div_en_i;
	input wire [1:0] operator_i;
	input wire [1:0] signed_mode_i;
	input wire [31:0] op_a_i;
	input wire [31:0] op_b_i;
	input wire [33:0] alu_adder_ext_i;
	input wire [31:0] alu_adder_i;
	input wire equal_to_zero;
	output reg [32:0] alu_operand_a_o;
	output reg [32:0] alu_operand_b_o;
	output wire [31:0] multdiv_result_o;
	output wire valid_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	reg [4:0] div_counter_q;
	reg [4:0] div_counter_n;
	reg [1:0] mult_state_q;
	reg [1:0] mult_state_n;
	reg [2:0] md_state_q;
	reg [2:0] md_state_n;
	wire signed [34:0] mac_res_signed;
	wire [34:0] mac_res_ext;
	reg [33:0] mac_res_q;
	reg [33:0] mac_res_n;
	wire [33:0] mac_res;
	reg [33:0] op_remainder_n;
	reg [15:0] mult_op_a;
	reg [15:0] mult_op_b;
	reg [33:0] accum;
	reg sign_a;
	reg sign_b;
	wire div_sign_a;
	wire div_sign_b;
	wire signed_mult;
	reg is_greater_equal;
	wire div_change_sign;
	wire rem_change_sign;
	wire [31:0] one_shift;
	reg [31:0] op_denominator_q;
	reg [31:0] op_numerator_q;
	reg [31:0] op_quotient_q;
	reg [31:0] op_denominator_n;
	reg [31:0] op_numerator_n;
	reg [31:0] op_quotient_n;
	wire [31:0] next_remainder;
	wire [32:0] next_quotient;
	wire [32:0] res_adder_h;
	reg mult_valid;
	reg div_valid;
	always @(posedge clk_i or negedge rst_ni) begin : proc_mult_state_q
		if (!rst_ni) begin
			mult_state_q &lt;= ALBL;
			mac_res_q &lt;= 1&#39;sb0;
			div_counter_q &lt;= 1&#39;sb0;
			md_state_q &lt;= MD_IDLE;
			op_denominator_q &lt;= 1&#39;sb0;
			op_numerator_q &lt;= 1&#39;sb0;
			op_quotient_q &lt;= 1&#39;sb0;
		end
		else begin
			if (mult_en_i)
				mult_state_q &lt;= mult_state_n;
			if (div_en_i) begin
				div_counter_q &lt;= div_counter_n;
				op_denominator_q &lt;= op_denominator_n;
				op_numerator_q &lt;= op_numerator_n;
				op_quotient_q &lt;= op_quotient_n;
				md_state_q &lt;= md_state_n;
			end
			case (1&#39;b1)
				mult_en_i: mac_res_q &lt;= mac_res_n;
				div_en_i: mac_res_q &lt;= op_remainder_n;
				default: mac_res_q &lt;= mac_res_q;
			endcase
		end
	end
	assign signed_mult = (signed_mode_i != 2&#39;b00);
	assign multdiv_result_o = (div_en_i ? mac_res_q[31:0] : mac_res_n[31:0]);
	assign mac_res_signed = (($signed({sign_a, mult_op_a}) * $signed({sign_b, mult_op_b})) + $signed(accum));
	assign mac_res_ext = $unsigned(mac_res_signed);
	assign mac_res = mac_res_ext[33:0];
	assign res_adder_h = alu_adder_ext_i[33:1];
	assign next_remainder = (is_greater_equal ? res_adder_h[31:0] : mac_res_q[31:0]);
	assign next_quotient = (is_greater_equal ? ({1&#39;b0, op_quotient_q} | {1&#39;b0, one_shift}) : {1&#39;b0, op_quotient_q});
	assign one_shift = ({31&#39;b0, 1&#39;b1} &lt;&lt; div_counter_q);
	always @(*)
		if (((mac_res_q[31] ^ op_denominator_q[31]) == 1&#39;b0))
			is_greater_equal = (res_adder_h[31] == 1&#39;b0);
		else
			is_greater_equal = mac_res_q[31];
	assign div_sign_a = (op_a_i[31] &amp; signed_mode_i[0]);
	assign div_sign_b = (op_b_i[31] &amp; signed_mode_i[1]);
	assign div_change_sign = (div_sign_a ^ div_sign_b);
	assign rem_change_sign = div_sign_a;
	always @(*) begin : md_fsm
		div_counter_n = (div_counter_q - 5&#39;h1);
		op_remainder_n = mac_res_q;
		op_quotient_n = op_quotient_q;
		md_state_n = md_state_q;
		op_numerator_n = op_numerator_q;
		op_denominator_n = op_denominator_q;
		alu_operand_a_o = {32&#39;h0, 1&#39;b1};
		alu_operand_b_o = {~op_b_i, 1&#39;b1};
		div_valid = 1&#39;b0;
		case (md_state_q)
			MD_IDLE: begin
				if ((operator_i == MD_OP_DIV)) begin
					op_remainder_n = 1&#39;sb1;
					md_state_n = (equal_to_zero ? MD_FINISH : MD_ABS_A);
				end
				else begin
					op_remainder_n = {2&#39;b0, op_a_i};
					md_state_n = (equal_to_zero ? MD_FINISH : MD_ABS_A);
				end
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_b_i, 1&#39;b1};
				div_counter_n = 5&#39;d31;
			end
			MD_ABS_A: begin
				op_quotient_n = 1&#39;sb0;
				op_numerator_n = (div_sign_a ? alu_adder_i : op_a_i);
				md_state_n = MD_ABS_B;
				div_counter_n = 5&#39;d31;
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_a_i, 1&#39;b1};
			end
			MD_ABS_B: begin
				op_remainder_n = {33&#39;h0, op_numerator_q[31]};
				op_denominator_n = (div_sign_b ? alu_adder_i : op_b_i);
				md_state_n = MD_COMP;
				div_counter_n = 5&#39;d31;
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~op_b_i, 1&#39;b1};
			end
			MD_COMP: begin
				op_remainder_n = {1&#39;b0, next_remainder[31:0], op_numerator_q[div_counter_n]};
				op_quotient_n = next_quotient[31:0];
				md_state_n = ((div_counter_q == 5&#39;d1) ? MD_LAST : MD_COMP);
				alu_operand_a_o = {mac_res_q[31:0], 1&#39;b1};
				alu_operand_b_o = {~op_denominator_q[31:0], 1&#39;b1};
			end
			MD_LAST: begin
				if ((operator_i == MD_OP_DIV))
					op_remainder_n = {1&#39;b0, next_quotient};
				else
					op_remainder_n = {2&#39;b0, next_remainder[31:0]};
				alu_operand_a_o = {mac_res_q[31:0], 1&#39;b1};
				alu_operand_b_o = {~op_denominator_q[31:0], 1&#39;b1};
				md_state_n = MD_CHANGE_SIGN;
			end
			MD_CHANGE_SIGN: begin
				md_state_n = MD_FINISH;
				if ((operator_i == MD_OP_DIV))
					op_remainder_n = (div_change_sign ? {2&#39;h0, alu_adder_i} : mac_res_q);
				else
					op_remainder_n = (rem_change_sign ? {2&#39;h0, alu_adder_i} : mac_res_q);
				alu_operand_a_o = {32&#39;h0, 1&#39;b1};
				alu_operand_b_o = {~mac_res_q[31:0], 1&#39;b1};
			end
			MD_FINISH: begin
				md_state_n = MD_IDLE;
				div_valid = 1&#39;b1;
			end
			default: md_state_n = 1&#39;bX;
		endcase
	end
	assign valid_o = (mult_valid | div_valid);
	always @(*) begin : mult_fsm
		mult_op_a = op_a_i[15:0];
		mult_op_b = op_b_i[15:0];
		sign_a = 1&#39;b0;
		sign_b = 1&#39;b0;
		accum = mac_res_q;
		mac_res_n = mac_res;
		mult_state_n = mult_state_q;
		mult_valid = 1&#39;b0;
		case (mult_state_q)
			ALBL: begin
				mult_op_a = op_a_i[15:0];
				mult_op_b = op_b_i[15:0];
				sign_a = 1&#39;b0;
				sign_b = 1&#39;b0;
				accum = 1&#39;sb0;
				mac_res_n = mac_res;
				mult_state_n = ALBH;
			end
			ALBH: begin
				mult_op_a = op_a_i[15:0];
				mult_op_b = op_b_i[31:16];
				sign_a = 1&#39;b0;
				sign_b = (signed_mode_i[1] &amp; op_b_i[31]);
				accum = {18&#39;b0, mac_res_q[31:16]};
				if ((operator_i == MD_OP_MULL))
					mac_res_n = {2&#39;b0, mac_res[15:0], mac_res_q[15:0]};
				else
					mac_res_n = mac_res;
				mult_state_n = AHBL;
			end
			AHBL: begin
				mult_op_a = op_a_i[31:16];
				mult_op_b = op_b_i[15:0];
				sign_a = (signed_mode_i[0] &amp; op_a_i[31]);
				sign_b = 1&#39;b0;
				if ((operator_i == MD_OP_MULL)) begin
					accum = {18&#39;b0, mac_res_q[31:16]};
					mac_res_n = {2&#39;b0, mac_res[15:0], mac_res_q[15:0]};
					mult_valid = 1&#39;b1;
					mult_state_n = ALBL;
				end
				else begin
					accum = mac_res_q;
					mac_res_n = mac_res;
					mult_state_n = AHBH;
				end
			end
			AHBH: begin
				mult_op_a = op_a_i[31:16];
				mult_op_b = op_b_i[31:16];
				sign_a = (signed_mode_i[0] &amp; op_a_i[31]);
				sign_b = (signed_mode_i[1] &amp; op_b_i[31]);
				accum[17:0] = mac_res_q[33:16];
				accum[33:18] = {16 {(signed_mult &amp; mac_res_q[33])}};
				mac_res_n = mac_res;
				mult_state_n = ALBL;
				mult_valid = 1&#39;b1;
			end
			default: mult_state_n = 1&#39;bX;
		endcase
	end
endmodule
module ibex_prefetch_buffer (
	clk_i,
	rst_ni,
	req_i,
	branch_i,
	addr_i,
	ready_i,
	valid_o,
	rdata_o,
	addr_o,
	err_o,
	instr_req_o,
	instr_gnt_i,
	instr_addr_o,
	instr_rdata_i,
	instr_err_i,
	instr_pmp_err_i,
	instr_rvalid_i,
	busy_o
);
	input wire clk_i;
	input wire rst_ni;
	input wire req_i;
	input wire branch_i;
	input wire [31:0] addr_i;
	input wire ready_i;
	output wire valid_o;
	output wire [31:0] rdata_o;
	output wire [31:0] addr_o;
	output wire err_o;
	output wire instr_req_o;
	input wire instr_gnt_i;
	output wire [31:0] instr_addr_o;
	input wire [31:0] instr_rdata_i;
	input wire instr_err_i;
	input wire instr_pmp_err_i;
	input wire instr_rvalid_i;
	output wire busy_o;
	localparam [31:0] NUM_REQS = 2;
	wire valid_req;
	wire valid_req_d;
	reg valid_req_q;
	wire gnt_or_pmp_err;
	wire rvalid_or_pmp_err;
	wire [(NUM_REQS - 1):0] rdata_outstanding_n;
	wire [(NUM_REQS - 1):0] rdata_outstanding_s;
	reg [(NUM_REQS - 1):0] rdata_outstanding_q;
	wire [(NUM_REQS - 1):0] branch_abort_n;
	wire [(NUM_REQS - 1):0] branch_abort_s;
	reg [(NUM_REQS - 1):0] branch_abort_q;
	reg [31:0] instr_addr_q;
	wire [31:0] fetch_addr;
	wire [31:0] instr_addr;
	wire [31:0] instr_addr_w_aligned;
	wire addr_valid;
	reg pmp_err_q;
	wire instr_or_pmp_err;
	wire fifo_valid;
	wire fifo_ready;
	wire fifo_clear;
	assign busy_o = (|rdata_outstanding_q | instr_req_o);
	assign instr_or_pmp_err = (instr_err_i | pmp_err_q);
	assign fifo_clear = branch_i;
	ibex_fetch_fifo fifo_i(
		.clk_i(clk_i),
		.rst_ni(rst_ni),
		.clear_i(fifo_clear),
		.in_valid_i(fifo_valid),
		.in_addr_i(instr_addr_q),
		.in_rdata_i(instr_rdata_i),
		.in_err_i(instr_or_pmp_err),
		.in_ready_o(fifo_ready),
		.out_valid_o(valid_o),
		.out_ready_i(ready_i),
		.out_rdata_o(rdata_o),
		.out_addr_o(addr_o),
		.out_err_o(err_o)
	);
	assign valid_req = ((req_i &amp; (fifo_ready | branch_i)) &amp; ~&amp;rdata_outstanding_q);
	assign gnt_or_pmp_err = (instr_gnt_i | (pmp_err_q &amp; ~branch_i));
	assign rvalid_or_pmp_err = (instr_rvalid_i | pmp_err_q);
	assign valid_req_d = ((branch_i | valid_req_q) &amp; ~(valid_req &amp; instr_gnt_i));
	assign addr_valid = ((branch_i | ((req_i &amp; fifo_ready) &amp; ~rdata_outstanding_q[0])) | ((rvalid_or_pmp_err &amp; ~branch_abort_q[0]) &amp; ((valid_req &amp; instr_gnt_i) | rdata_outstanding_q[1])));
	assign fetch_addr = ({instr_addr_q[31:2], 2&#39;b00} + 32&#39;d4);
	assign instr_addr = (branch_i ? addr_i : (valid_req_q ? instr_addr_q : fetch_addr));
	assign instr_addr_w_aligned = {instr_addr[31:2], 2&#39;b00};
	generate
		genvar g_outstanding_reqs_i;
		for (g_outstanding_reqs_i = 0; (g_outstanding_reqs_i &lt; NUM_REQS); g_outstanding_reqs_i = (g_outstanding_reqs_i + 1)) begin : g_outstanding_reqs
			if ((g_outstanding_reqs_i == 0)) begin : g_req0
				assign rdata_outstanding_n[g_outstanding_reqs_i] = ((valid_req &amp; gnt_or_pmp_err) | rdata_outstanding_q[g_outstanding_reqs_i]);
				assign branch_abort_n[g_outstanding_reqs_i] = ((branch_i &amp; rdata_outstanding_q[g_outstanding_reqs_i]) | branch_abort_q[g_outstanding_reqs_i]);
			end
			else begin : g_reqtop
				assign rdata_outstanding_n[g_outstanding_reqs_i] = (((valid_req &amp; instr_gnt_i) &amp; &amp;rdata_outstanding_q[(g_outstanding_reqs_i - 1):0]) | rdata_outstanding_q[g_outstanding_reqs_i]);
				assign branch_abort_n[g_outstanding_reqs_i] = ((branch_i &amp; rdata_outstanding_q[g_outstanding_reqs_i]) | branch_abort_q[g_outstanding_reqs_i]);
			end
		end
	endgenerate
	assign rdata_outstanding_s = (rvalid_or_pmp_err ? {1&#39;b0, rdata_outstanding_n[(NUM_REQS - 1):1]} : rdata_outstanding_n);
	assign branch_abort_s = (rvalid_or_pmp_err ? {1&#39;b0, branch_abort_n[(NUM_REQS - 1):1]} : branch_abort_n);
	assign fifo_valid = ((rdata_outstanding_q[0] &amp; ~branch_abort_q[0]) &amp; rvalid_or_pmp_err);
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			valid_req_q &lt;= 1&#39;b0;
			rdata_outstanding_q &lt;= &#39;b0;
			branch_abort_q &lt;= &#39;b0;
		end
		else begin
			valid_req_q &lt;= valid_req_d;
			rdata_outstanding_q &lt;= rdata_outstanding_s;
			branch_abort_q &lt;= branch_abort_s;
		end
	always @(posedge clk_i)
		if (addr_valid) begin
			instr_addr_q &lt;= instr_addr;
			pmp_err_q &lt;= instr_pmp_err_i;
		end
	assign instr_req_o = valid_req;
	assign instr_addr_o = instr_addr_w_aligned;
endmodule
module ibex_fetch_fifo (
	clk_i,
	rst_ni,
	clear_i,
	in_valid_i,
	in_ready_o,
	in_addr_i,
	in_rdata_i,
	in_err_i,
	out_valid_o,
	out_ready_i,
	out_addr_o,
	out_rdata_o,
	out_err_o
);
	input wire clk_i;
	input wire rst_ni;
	input wire clear_i;
	input wire in_valid_i;
	output wire in_ready_o;
	input wire [31:0] in_addr_i;
	input wire [31:0] in_rdata_i;
	input wire in_err_i;
	output reg out_valid_o;
	input wire out_ready_i;
	output wire [31:0] out_addr_o;
	output reg [31:0] out_rdata_o;
	output reg out_err_o;
	localparam [31:0] DEPTH = 3;
	wire [((DEPTH * 30) + 1):2] addr_d;
	reg [((DEPTH * 30) + 1):2] addr_q;
	wire [((DEPTH * 32) + -1):0] rdata_d;
	reg [((DEPTH * 32) + -1):0] rdata_q;
	wire [(DEPTH - 1):0] err_d;
	reg [(DEPTH - 1):0] err_q;
	wire [(DEPTH - 1):0] valid_d;
	reg [(DEPTH - 1):0] valid_q;
	wire [(DEPTH - 1):0] lowest_free_entry;
	wire [(DEPTH - 1):0] valid_pushed;
	wire [(DEPTH - 1):0] valid_popped;
	wire [(DEPTH - 1):0] entry_en;
	wire pop_fifo;
	wire [31:0] rdata;
	wire [31:0] rdata_unaligned;
	wire err;
	wire err_unaligned;
	wire valid;
	wire valid_unaligned;
	wire entry0_unaligned_d;
	reg entry0_unaligned_q;
	wire aligned_is_compressed;
	wire unaligned_is_compressed;
	wire unused_addr_in;
	assign rdata = (valid_q[0] ? rdata_q[0+:32] : in_rdata_i);
	assign err = (valid_q[0] ? err_q[0] : in_err_i);
	assign valid = (valid_q[0] | in_valid_i);
	assign entry0_unaligned_d = (((((in_valid_i &amp; in_addr_i[1]) | entry0_unaligned_q) &amp; ~(out_ready_i &amp; unaligned_is_compressed)) | (((valid &amp; out_ready_i) &amp; ~out_addr_o[1]) &amp; aligned_is_compressed)) &amp; ~clear_i);
	assign rdata_unaligned = (valid_q[1] ? {rdata_q[32+:16], rdata[31:16]} : {in_rdata_i[15:0], rdata[31:16]});
	assign err_unaligned = (valid_q[1] ? ((err_q[1] &amp; ~unaligned_is_compressed) | err_q[0]) : ((valid_q[0] &amp; err_q[0]) | (in_err_i &amp; (~valid_q[0] | ~unaligned_is_compressed))));
	assign valid_unaligned = (valid_q[1] ? 1&#39;b1 : (valid_q[0] &amp; in_valid_i));
	assign unaligned_is_compressed = (rdata[17:16] != 2&#39;b11);
	assign aligned_is_compressed = (rdata[1:0] != 2&#39;b11);
	always @(*)
		if (out_addr_o[1]) begin
			out_rdata_o = rdata_unaligned;
			out_err_o = err_unaligned;
			if (unaligned_is_compressed)
				out_valid_o = valid;
			else
				out_valid_o = valid_unaligned;
		end
		else begin
			out_rdata_o = rdata;
			out_err_o = err;
			out_valid_o = valid;
		end
	assign out_addr_o[31:2] = (valid_q[0] ? addr_q[2+:30] : in_addr_i[31:2]);
	assign out_addr_o[1] = (valid_q[0] ? entry0_unaligned_q : in_addr_i[1]);
	assign out_addr_o[0] = 1&#39;b0;
	assign unused_addr_in = in_addr_i[0];
	assign in_ready_o = ~valid_q[(DEPTH - 2)];
	assign pop_fifo = ((out_ready_i &amp; out_valid_o) &amp; (~aligned_is_compressed | out_addr_o[1]));
	generate
		genvar g_fifo_next_i;
		for (g_fifo_next_i = 0; (g_fifo_next_i &lt; (DEPTH - 1)); g_fifo_next_i = (g_fifo_next_i + 1)) begin : g_fifo_next
			if ((g_fifo_next_i == 0)) begin : g_ent0
				assign lowest_free_entry[g_fifo_next_i] = ~valid_q[g_fifo_next_i];
			end
			else begin : g_ent_others
				assign lowest_free_entry[g_fifo_next_i] = (~valid_q[g_fifo_next_i] &amp; &amp;valid_q[(g_fifo_next_i - 1):0]);
			end
			assign valid_pushed[g_fifo_next_i] = ((in_valid_i &amp; lowest_free_entry[g_fifo_next_i]) | valid_q[g_fifo_next_i]);
			assign valid_popped[g_fifo_next_i] = (pop_fifo ? valid_pushed[(g_fifo_next_i + 1)] : valid_pushed[g_fifo_next_i]);
			assign valid_d[g_fifo_next_i] = (valid_popped[g_fifo_next_i] &amp; ~clear_i);
			assign entry_en[g_fifo_next_i] = ((valid_pushed[(g_fifo_next_i + 1)] &amp; pop_fifo) | ((in_valid_i &amp; lowest_free_entry[g_fifo_next_i]) &amp; ~pop_fifo));
			assign addr_d[(2 + (g_fifo_next_i * 30))+:30] = (valid_q[(g_fifo_next_i + 1)] ? addr_q[(2 + ((g_fifo_next_i + 1) * 30))+:30] : in_addr_i[31:2]);
			assign rdata_d[(g_fifo_next_i * 32)+:32] = (valid_q[(g_fifo_next_i + 1)] ? rdata_q[((g_fifo_next_i + 1) * 32)+:32] : in_rdata_i);
			assign err_d[g_fifo_next_i] = (valid_q[(g_fifo_next_i + 1)] ? err_q[(g_fifo_next_i + 1)] : in_err_i);
		end
	endgenerate
	assign lowest_free_entry[(DEPTH - 1)] = (~valid_q[(DEPTH - 1)] &amp; &amp;valid_q[(DEPTH - 2):0]);
	assign valid_pushed[(DEPTH - 1)] = (valid_q[(DEPTH - 1)] | (in_valid_i &amp; lowest_free_entry[(DEPTH - 1)]));
	assign valid_popped[(DEPTH - 1)] = (pop_fifo ? 1&#39;b0 : valid_pushed[(DEPTH - 1)]);
	assign valid_d[(DEPTH - 1)] = (valid_popped[(DEPTH - 1)] &amp; ~clear_i);
	assign entry_en[(DEPTH - 1)] = (in_valid_i &amp; lowest_free_entry[(DEPTH - 1)]);
	assign addr_d[(2 + ((DEPTH - 1) * 30))+:30] = in_addr_i[31:2];
	assign rdata_d[((DEPTH - 1) * 32)+:32] = in_rdata_i;
	assign err_d[(DEPTH - 1)] = in_err_i;
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni) begin
			valid_q &lt;= 1&#39;sb0;
			entry0_unaligned_q &lt;= 1&#39;sb0;
		end
		else begin
			valid_q &lt;= valid_d;
			entry0_unaligned_q &lt;= entry0_unaligned_d;
		end
	generate
		genvar g_fifo_regs_i;
		for (g_fifo_regs_i = 0; (g_fifo_regs_i &lt; DEPTH); g_fifo_regs_i = (g_fifo_regs_i + 1)) begin : g_fifo_regs
			always @(posedge clk_i)
				if (entry_en[g_fifo_regs_i]) begin
					addr_q[(2 + (g_fifo_regs_i * 30))+:30] &lt;= addr_d[(2 + (g_fifo_regs_i * 30))+:30];
					rdata_q[(g_fifo_regs_i * 32)+:32] &lt;= rdata_d[(g_fifo_regs_i * 32)+:32];
					err_q[g_fifo_regs_i] &lt;= err_d[g_fifo_regs_i];
				end
		end
	endgenerate
endmodule
module ibex_pmp (
	clk_i,
	rst_ni,
	csr_pmp_cfg_i,
	csr_pmp_addr_i,
	priv_mode_i,
	pmp_req_addr_i,
	pmp_req_type_i,
	pmp_req_err_o
);
	parameter [31:0] PMPGranularity = 0;
	parameter [31:0] PMPNumChan = 2;
	parameter [31:0] PMPNumRegions = 4;
	input wire clk_i;
	input wire rst_ni;
	input wire [((0 &gt;= (PMPNumRegions - 1)) ? ((((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions) * 6) + (((PMPNumRegions - 1) * 6) - 1)) : (((((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions)) * 6) + -1)):((0 &gt;= (PMPNumRegions - 1)) ? ((PMPNumRegions - 1) * 6) : 0)] csr_pmp_cfg_i;
	input wire [((0 &gt;= (PMPNumRegions - 1)) ? ((((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions) * 34) + (((PMPNumRegions - 1) * 34) - 1)) : (((((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions)) * 34) + -1)):((0 &gt;= (PMPNumRegions - 1)) ? ((PMPNumRegions - 1) * 34) : 0)] csr_pmp_addr_i;
	input wire [1:0] priv_mode_i;
	input wire [((0 &gt;= (PMPNumChan - 1)) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * 34) + (((PMPNumChan - 1) * 34) - 1)) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * 34) + -1)):((0 &gt;= (PMPNumChan - 1)) ? ((PMPNumChan - 1) * 34) : 0)] pmp_req_addr_i;
	input wire [((0 &gt;= (PMPNumChan - 1)) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * 2) + (((PMPNumChan - 1) * 2) - 1)) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * 2) + -1)):((0 &gt;= (PMPNumChan - 1)) ? ((PMPNumChan - 1) * 2) : 0)] pmp_req_type_i;
	output wire [0:(PMPNumChan - 1)] pmp_req_err_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	wire [33:0] region_start_addr [0:(PMPNumRegions - 1)];
	wire [33:(PMPGranularity + 2)] region_addr_mask [0:(PMPNumRegions - 1)];
	wire [(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + -1) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + ((PMPNumRegions - 1) - 1))) : (((PMPNumRegions - 1) &gt;= 0) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) - 1)) : ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions))) - 1)))):(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) : (((PMPNumRegions - 1) &gt;= 0) ? ((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) : ((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)))))] region_match_high;
	wire [(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + -1) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + ((PMPNumRegions - 1) - 1))) : (((PMPNumRegions - 1) &gt;= 0) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) - 1)) : ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions))) - 1)))):(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) : (((PMPNumRegions - 1) &gt;= 0) ? ((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) : ((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)))))] region_match_low;
	wire [(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + -1) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + ((PMPNumRegions - 1) - 1))) : (((PMPNumRegions - 1) &gt;= 0) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) - 1)) : ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions))) - 1)))):(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) : (((PMPNumRegions - 1) &gt;= 0) ? ((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) : ((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)))))] region_match_both;
	wire [(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + -1) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + ((PMPNumRegions - 1) - 1))) : (((PMPNumRegions - 1) &gt;= 0) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) - 1)) : ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions))) - 1)))):(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) : (((PMPNumRegions - 1) &gt;= 0) ? ((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) : ((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)))))] region_match_partial;
	wire [(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + -1) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + ((PMPNumRegions - 1) - 1))) : (((PMPNumRegions - 1) &gt;= 0) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) - 1)) : ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions))) - 1)))):(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) : (((PMPNumRegions - 1) &gt;= 0) ? ((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) : ((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)))))] region_perm_check;
	wire [(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + -1) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + ((PMPNumRegions - 1) - 1))) : (((PMPNumRegions - 1) &gt;= 0) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) - 1)) : ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions))) - 1)))):(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) : (((PMPNumRegions - 1) &gt;= 0) ? ((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) : ((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)))))] machine_access_fault;
	wire [(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + -1) : (((((PMPNumChan - 1) &gt;= 0) ? PMPNumChan : (2 - PMPNumChan)) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + ((PMPNumRegions - 1) - 1))) : (((PMPNumRegions - 1) &gt;= 0) ? ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) - 1)) : ((((0 &gt;= (PMPNumChan - 1)) ? (2 - PMPNumChan) : PMPNumChan) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)) + (((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions))) - 1)))):(((PMPNumChan - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) : (((PMPNumRegions - 1) &gt;= 0) ? ((PMPNumChan - 1) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) : ((PMPNumRegions - 1) + ((PMPNumChan - 1) * ((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions)))))] user_access_allowed;
	wire [(PMPNumChan - 1):0] access_fault;
	generate
		genvar g_addr_exp_r;
		for (g_addr_exp_r = 0; (g_addr_exp_r &lt; PMPNumRegions); g_addr_exp_r = (g_addr_exp_r + 1)) begin : g_addr_exp
			if ((g_addr_exp_r == 0)) begin : g_entry0
				assign region_start_addr[g_addr_exp_r] = ((csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_addr_exp_r : ((PMPNumRegions - 1) - g_addr_exp_r)) * 6) + 3)+:2] == PMP_MODE_TOR) ? 34&#39;h000000000 : csr_pmp_addr_i[(((0 &gt;= (PMPNumRegions - 1)) ? g_addr_exp_r : ((PMPNumRegions - 1) - g_addr_exp_r)) * 34)+:34]);
			end
			else begin : g_oth
				assign region_start_addr[g_addr_exp_r] = ((csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_addr_exp_r : ((PMPNumRegions - 1) - g_addr_exp_r)) * 6) + 3)+:2] == PMP_MODE_TOR) ? csr_pmp_addr_i[(((0 &gt;= (PMPNumRegions - 1)) ? (g_addr_exp_r - 1) : ((PMPNumRegions - 1) - (g_addr_exp_r - 1))) * 34)+:34] : csr_pmp_addr_i[(((0 &gt;= (PMPNumRegions - 1)) ? g_addr_exp_r : ((PMPNumRegions - 1) - g_addr_exp_r)) * 34)+:34]);
			end
			genvar g_bitmask_b;
			for (g_bitmask_b = (PMPGranularity + 2); (g_bitmask_b &lt; 34); g_bitmask_b = (g_bitmask_b + 1)) begin : g_bitmask
				if ((g_bitmask_b == (PMPGranularity + 2))) begin : g_bit0
					assign region_addr_mask[g_addr_exp_r][g_bitmask_b] = (csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_addr_exp_r : ((PMPNumRegions - 1) - g_addr_exp_r)) * 6) + 3)+:2] != PMP_MODE_NAPOT);
				end
				else begin : g_others
					assign region_addr_mask[g_addr_exp_r][g_bitmask_b] = ((csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_addr_exp_r : ((PMPNumRegions - 1) - g_addr_exp_r)) * 6) + 3)+:2] != PMP_MODE_NAPOT) | ~&amp;csr_pmp_addr_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_addr_exp_r : ((PMPNumRegions - 1) - g_addr_exp_r)) * 34) + (PMPGranularity + 2))+:(((g_bitmask_b - 1) &gt;= (PMPGranularity + 2)) ? (((g_bitmask_b - 1) - (PMPGranularity + 2)) + 1) : (((PMPGranularity + 2) - (g_bitmask_b - 1)) + 1))]);
				end
			end
		end
	endgenerate
	generate
		genvar g_access_check_c;
		for (g_access_check_c = 0; (g_access_check_c &lt; PMPNumChan); g_access_check_c = (g_access_check_c + 1)) begin : g_access_check
			genvar g_regions_r;
			for (g_regions_r = 0; (g_regions_r &lt; PMPNumRegions); g_regions_r = (g_regions_r + 1)) begin : g_regions
				assign region_match_low[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = (pmp_req_addr_i[((((0 &gt;= (PMPNumChan - 1)) ? g_access_check_c : ((PMPNumChan - 1) - g_access_check_c)) * 34) + (PMPGranularity + 2))+:((33 &gt;= (PMPGranularity + 2)) ? (34 - (PMPGranularity + 2)) : (((PMPGranularity + 2) - 33) + 1))] &gt;= (region_start_addr[g_regions_r][33:(PMPGranularity + 2)] &amp; region_addr_mask[g_regions_r]));
				assign region_match_high[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = (pmp_req_addr_i[((((0 &gt;= (PMPNumChan - 1)) ? g_access_check_c : ((PMPNumChan - 1) - g_access_check_c)) * 34) + (PMPGranularity + 2))+:((33 &gt;= (PMPGranularity + 2)) ? (34 - (PMPGranularity + 2)) : (((PMPGranularity + 2) - 33) + 1))] &lt;= (csr_pmp_addr_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_regions_r : ((PMPNumRegions - 1) - g_regions_r)) * 34) + (PMPGranularity + 2))+:((33 &gt;= (PMPGranularity + 2)) ? (34 - (PMPGranularity + 2)) : (((PMPGranularity + 2) - 33) + 1))] &amp; region_addr_mask[g_regions_r]));
				assign region_match_both[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = ((region_match_low[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] &amp; region_match_high[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))]) &amp; (csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_regions_r : ((PMPNumRegions - 1) - g_regions_r)) * 6) + 3)+:2] != PMP_MODE_OFF));
				assign region_match_partial[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = ((region_match_low[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] ^ region_match_high[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))]) &amp; (csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_regions_r : ((PMPNumRegions - 1) - g_regions_r)) * 6) + 3)+:2] != PMP_MODE_OFF));
				assign region_perm_check[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = ((((pmp_req_type_i[(((0 &gt;= (PMPNumChan - 1)) ? g_access_check_c : ((PMPNumChan - 1) - g_access_check_c)) * 2)+:2] == PMP_ACC_EXEC) &amp; csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_regions_r : ((PMPNumRegions - 1) - g_regions_r)) * 6) + 2)+:1]) | ((pmp_req_type_i[(((0 &gt;= (PMPNumChan - 1)) ? g_access_check_c : ((PMPNumChan - 1) - g_access_check_c)) * 2)+:2] == PMP_ACC_WRITE) &amp; csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_regions_r : ((PMPNumRegions - 1) - g_regions_r)) * 6) + 1)+:1])) | ((pmp_req_type_i[(((0 &gt;= (PMPNumChan - 1)) ? g_access_check_c : ((PMPNumChan - 1) - g_access_check_c)) * 2)+:2] == PMP_ACC_READ) &amp; csr_pmp_cfg_i[(((0 &gt;= (PMPNumRegions - 1)) ? g_regions_r : ((PMPNumRegions - 1) - g_regions_r)) * 6)+:1]));
				assign machine_access_fault[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = ((region_match_both[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] &amp; csr_pmp_cfg_i[((((0 &gt;= (PMPNumRegions - 1)) ? g_regions_r : ((PMPNumRegions - 1) - g_regions_r)) * 6) + 5)+:1]) &amp; ~region_perm_check[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))]);
				if ((g_regions_r == 0)) begin : g_region0
					assign user_access_allowed[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = (region_match_both[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] &amp; region_perm_check[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))]);
				end
				else begin : g_oth_regions
					assign user_access_allowed[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] = ((region_match_both[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))] &amp; region_perm_check[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? g_regions_r : (0 - (g_regions_r - (PMPNumRegions - 1)))))]) &amp; ~|region_match_partial[(((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))) + (((PMPNumRegions - 1) &gt;= 0) ? (((PMPNumRegions - 1) &gt;= 0) ? 0 : (g_regions_r - 1)) : (0 - ((((PMPNumRegions - 1) &gt;= 0) ? 0 : (g_regions_r - 1)) - (PMPNumRegions - 1)))))+:(((g_regions_r - 1) &gt;= 0) ? g_regions_r : (2 - g_regions_r))]);
				end
			end
			assign access_fault[g_access_check_c] = ((priv_mode_i == PRIV_LVL_M) ? |machine_access_fault[((((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) + ((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))))+:(((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))] : ~|user_access_allowed[((((PMPNumRegions - 1) &gt;= 0) ? 0 : (PMPNumRegions - 1)) + ((((PMPNumChan - 1) &gt;= 0) ? g_access_check_c : (0 - (g_access_check_c - (PMPNumChan - 1)))) * (((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))))+:(((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions))]);
			assign pmp_req_err_o[g_access_check_c] = access_fault[g_access_check_c];
		end
	endgenerate
endmodule
module ibex_core (
	clk_i,
	rst_ni,
	test_en_i,
	hart_id_i,
	boot_addr_i,
	instr_req_o,
	instr_gnt_i,
	instr_rvalid_i,
	instr_addr_o,
	instr_rdata_i,
	instr_err_i,
	data_req_o,
	data_gnt_i,
	data_rvalid_i,
	data_we_o,
	data_be_o,
	data_addr_o,
	data_wdata_o,
	data_rdata_i,
	data_err_i,
	irq_software_i,
	irq_timer_i,
	irq_external_i,
	irq_fast_i,
	irq_nm_i,
	debug_req_i,
	fetch_enable_i,
	core_sleep_o
);
	parameter PMPEnable = 0;
	parameter [31:0] PMPGranularity = 0;
	parameter [31:0] PMPNumRegions = 4;
	parameter [31:0] MHPMCounterNum = 0;
	parameter [31:0] MHPMCounterWidth = 40;
	parameter RV32E = 0;
	parameter RV32M = 1;
	parameter [31:0] DmHaltAddr = 32&#39;h1A110800;
	parameter [31:0] DmExceptionAddr = 32&#39;h1A110808;
	input wire clk_i;
	input wire rst_ni;
	input wire test_en_i;
	input wire [31:0] hart_id_i;
	input wire [31:0] boot_addr_i;
	output wire instr_req_o;
	input wire instr_gnt_i;
	input wire instr_rvalid_i;
	output wire [31:0] instr_addr_o;
	input wire [31:0] instr_rdata_i;
	input wire instr_err_i;
	output wire data_req_o;
	input wire data_gnt_i;
	input wire data_rvalid_i;
	output wire data_we_o;
	output wire [3:0] data_be_o;
	output wire [31:0] data_addr_o;
	output wire [31:0] data_wdata_o;
	input wire [31:0] data_rdata_i;
	input wire data_err_i;
	input wire irq_software_i;
	input wire irq_timer_i;
	input wire irq_external_i;
	input wire [14:0] irq_fast_i;
	input wire irq_nm_i;
	input wire debug_req_i;
	input wire fetch_enable_i;
	output wire core_sleep_o;
	parameter [31:0] PMP_MAX_REGIONS = 16;
	parameter [31:0] PMP_CFG_W = 8;
	parameter [31:0] PMP_I = 0;
	parameter [31:0] PMP_D = 1;
	parameter [11:0] CSR_OFF_PMP_CFG = 12&#39;h3A0;
	parameter [11:0] CSR_OFF_PMP_ADDR = 12&#39;h3B0;
	parameter [11:0] CSR_OFF_MCOUNTER_SETUP = 12&#39;h320;
	parameter [11:0] CSR_OFF_MCOUNTER = 12&#39;hB00;
	parameter [11:0] CSR_OFF_MCOUNTERH = 12&#39;hB80;
	parameter [11:0] CSR_MASK_MCOUNTER = 12&#39;hFE0;
	parameter [31:0] CSR_MSTATUS_MIE_BIT = 3;
	parameter [31:0] CSR_MSTATUS_MPIE_BIT = 7;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_LOW = 11;
	parameter [31:0] CSR_MSTATUS_MPP_BIT_HIGH = 12;
	parameter [31:0] CSR_MSIX_BIT = 3;
	parameter [31:0] CSR_MTIX_BIT = 7;
	parameter [31:0] CSR_MEIX_BIT = 11;
	parameter [31:0] CSR_MFIX_BIT_LOW = 16;
	parameter [31:0] CSR_MFIX_BIT_HIGH = 30;
	localparam [0:0] IMM_A_Z = 0;
	localparam [0:0] OP_B_REG_B = 0;
	localparam [1:0] CSR_OP_READ = 0;
	localparam [1:0] EXC_PC_EXC = 0;
	localparam [1:0] MD_OP_MULL = 0;
	localparam [1:0] OP_A_REG_A = 0;
	localparam [1:0] RF_WD_LSU = 0;
	localparam [2:0] IMM_B_I = 0;
	localparam [2:0] PC_BOOT = 0;
	localparam [4:0] ALU_ADD = 0;
	localparam [0:0] IMM_A_ZERO = 1;
	localparam [0:0] OP_B_IMM = 1;
	localparam [1:0] CSR_OP_WRITE = 1;
	localparam [1:0] EXC_PC_IRQ = 1;
	localparam [1:0] MD_OP_MULH = 1;
	localparam [1:0] OP_A_FWD = 1;
	localparam [1:0] RF_WD_EX = 1;
	localparam [2:0] IMM_B_S = 1;
	localparam [2:0] PC_JUMP = 1;
	localparam [4:0] ALU_SUB = 1;
	localparam [4:0] ALU_LE = 10;
	localparam [4:0] ALU_LEU = 11;
	localparam [4:0] ALU_GT = 12;
	localparam [11:0] CSR_MSTATUS = 12&#39;h300;
	localparam [11:0] CSR_MISA = 12&#39;h301;
	localparam [11:0] CSR_MIE = 12&#39;h304;
	localparam [11:0] CSR_MTVEC = 12&#39;h305;
	localparam [11:0] CSR_MCOUNTINHIBIT = 12&#39;h320;
	localparam [11:0] CSR_MSCRATCH = 12&#39;h340;
	localparam [11:0] CSR_MEPC = 12&#39;h341;
	localparam [11:0] CSR_MCAUSE = 12&#39;h342;
	localparam [11:0] CSR_MTVAL = 12&#39;h343;
	localparam [11:0] CSR_MIP = 12&#39;h344;
	localparam [11:0] CSR_PMPCFG0 = 12&#39;h3A0;
	localparam [11:0] CSR_PMPCFG1 = 12&#39;h3A1;
	localparam [11:0] CSR_PMPCFG2 = 12&#39;h3A2;
	localparam [11:0] CSR_PMPCFG3 = 12&#39;h3A3;
	localparam [11:0] CSR_PMPADDR0 = 12&#39;h3B0;
	localparam [11:0] CSR_PMPADDR1 = 12&#39;h3B1;
	localparam [11:0] CSR_PMPADDR2 = 12&#39;h3B2;
	localparam [11:0] CSR_PMPADDR3 = 12&#39;h3B3;
	localparam [11:0] CSR_PMPADDR4 = 12&#39;h3B4;
	localparam [11:0] CSR_PMPADDR5 = 12&#39;h3B5;
	localparam [11:0] CSR_PMPADDR6 = 12&#39;h3B6;
	localparam [11:0] CSR_PMPADDR7 = 12&#39;h3B7;
	localparam [11:0] CSR_PMPADDR8 = 12&#39;h3B8;
	localparam [11:0] CSR_PMPADDR9 = 12&#39;h3B9;
	localparam [11:0] CSR_PMPADDR10 = 12&#39;h3BA;
	localparam [11:0] CSR_PMPADDR11 = 12&#39;h3BB;
	localparam [11:0] CSR_PMPADDR12 = 12&#39;h3BC;
	localparam [11:0] CSR_PMPADDR13 = 12&#39;h3BD;
	localparam [11:0] CSR_PMPADDR14 = 12&#39;h3BE;
	localparam [11:0] CSR_PMPADDR15 = 12&#39;h3BF;
	localparam [11:0] CSR_DCSR = 12&#39;h7b0;
	localparam [11:0] CSR_DPC = 12&#39;h7b1;
	localparam [11:0] CSR_DSCRATCH0 = 12&#39;h7b2;
	localparam [11:0] CSR_DSCRATCH1 = 12&#39;h7b3;
	localparam [11:0] CSR_MCYCLE = 12&#39;hB00;
	localparam [11:0] CSR_MINSTRET = 12&#39;hB02;
	localparam [11:0] CSR_MCYCLEH = 12&#39;hB80;
	localparam [11:0] CSR_MINSTRETH = 12&#39;hB82;
	localparam [11:0] CSR_MHARTID = 12&#39;hF14;
	localparam [4:0] ALU_GTU = 13;
	localparam [4:0] ALU_GE = 14;
	localparam [4:0] ALU_GEU = 15;
	localparam [4:0] ALU_EQ = 16;
	localparam [4:0] ALU_NE = 17;
	localparam [4:0] ALU_SLT = 18;
	localparam [4:0] ALU_SLTU = 19;
	localparam [1:0] CSR_OP_SET = 2;
	localparam [1:0] EXC_PC_DBD = 2;
	localparam [1:0] MD_OP_DIV = 2;
	localparam [1:0] OP_A_CURRPC = 2;
	localparam [1:0] RF_WD_CSR = 2;
	localparam [2:0] IMM_B_B = 2;
	localparam [2:0] PC_EXC = 2;
	localparam [4:0] ALU_XOR = 2;
	localparam [1:0] PMP_ACC_EXEC = 2&#39;b00;
	localparam [1:0] PMP_MODE_OFF = 2&#39;b00;
	localparam [1:0] PRIV_LVL_U = 2&#39;b00;
	localparam [1:0] PMP_ACC_WRITE = 2&#39;b01;
	localparam [1:0] PMP_MODE_TOR = 2&#39;b01;
	localparam [1:0] PRIV_LVL_S = 2&#39;b01;
	localparam [1:0] PMP_ACC_READ = 2&#39;b10;
	localparam [1:0] PMP_MODE_NA4 = 2&#39;b10;
	localparam [1:0] PRIV_LVL_H = 2&#39;b10;
	localparam [1:0] PMP_MODE_NAPOT = 2&#39;b11;
	localparam [1:0] PRIV_LVL_M = 2&#39;b11;
	localparam [4:0] ALU_SLET = 20;
	localparam [4:0] ALU_SLETU = 21;
	localparam [1:0] CSR_OP_CLEAR = 3;
	localparam [1:0] EXC_PC_DBG_EXC = 3;
	localparam [1:0] MD_OP_REM = 3;
	localparam [1:0] OP_A_IMM = 3;
	localparam [2:0] IMM_B_U = 3;
	localparam [2:0] PC_ERET = 3;
	localparam [4:0] ALU_OR = 3;
	localparam [2:0] DBG_CAUSE_NONE = 3&#39;h0;
	localparam [2:0] DBG_CAUSE_EBREAK = 3&#39;h1;
	localparam [2:0] DBG_CAUSE_TRIGGER = 3&#39;h2;
	localparam [2:0] DBG_CAUSE_HALTREQ = 3&#39;h3;
	localparam [2:0] DBG_CAUSE_STEP = 3&#39;h4;
	localparam [2:0] IMM_B_J = 4;
	localparam [2:0] PC_DRET = 4;
	localparam [4:0] ALU_AND = 4;
	localparam [3:0] XDEBUGVER_NO = 4&#39;d0;
	localparam [3:0] XDEBUGVER_NONSTD = 4&#39;d15;
	localparam [3:0] XDEBUGVER_STD = 4&#39;d4;
	localparam [2:0] IMM_B_INCR_PC = 5;
	localparam [4:0] ALU_SRA = 5;
	localparam [2:0] IMM_B_INCR_ADDR = 6;
	localparam [4:0] ALU_SRL = 6;
	localparam [4:0] ALU_SLL = 7;
	localparam [6:0] OPCODE_LOAD = 7&#39;h03;
	localparam [6:0] OPCODE_MISC_MEM = 7&#39;h0f;
	localparam [6:0] OPCODE_OP_IMM = 7&#39;h13;
	localparam [6:0] OPCODE_AUIPC = 7&#39;h17;
	localparam [6:0] OPCODE_STORE = 7&#39;h23;
	localparam [6:0] OPCODE_OP = 7&#39;h33;
	localparam [6:0] OPCODE_LUI = 7&#39;h37;
	localparam [6:0] OPCODE_BRANCH = 7&#39;h63;
	localparam [6:0] OPCODE_JALR = 7&#39;h67;
	localparam [6:0] OPCODE_JAL = 7&#39;h6f;
	localparam [6:0] OPCODE_SYSTEM = 7&#39;h73;
	localparam [4:0] ALU_LT = 8;
	localparam [4:0] ALU_LTU = 9;
	localparam [5:0] EXC_CAUSE_INSN_ADDR_MISA = {1&#39;b0, 5&#39;d00};
	localparam [5:0] EXC_CAUSE_INSTR_ACCESS_FAULT = {1&#39;b0, 5&#39;d01};
	localparam [5:0] EXC_CAUSE_ILLEGAL_INSN = {1&#39;b0, 5&#39;d02};
	localparam [5:0] EXC_CAUSE_BREAKPOINT = {1&#39;b0, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_LOAD_ACCESS_FAULT = {1&#39;b0, 5&#39;d05};
	localparam [5:0] EXC_CAUSE_STORE_ACCESS_FAULT = {1&#39;b0, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_ECALL_MMODE = {1&#39;b0, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_SOFTWARE_M = {1&#39;b1, 5&#39;d03};
	localparam [5:0] EXC_CAUSE_IRQ_TIMER_M = {1&#39;b1, 5&#39;d07};
	localparam [5:0] EXC_CAUSE_IRQ_EXTERNAL_M = {1&#39;b1, 5&#39;d11};
	localparam [5:0] EXC_CAUSE_IRQ_NM = {1&#39;b1, 5&#39;d31};
	localparam [31:0] PMP_NUM_CHAN = 2;
	wire instr_valid_id;
	wire instr_new_id;
	wire [31:0] instr_rdata_id;
	wire [15:0] instr_rdata_c_id;
	wire instr_is_compressed_id;
	wire instr_fetch_err;
	wire illegal_c_insn_id;
	wire [31:0] pc_if;
	wire [31:0] pc_id;
	wire instr_valid_clear;
	wire pc_set;
	wire [2:0] pc_mux_id;
	wire [1:0] exc_pc_mux_id;
	wire [5:0] exc_cause;
	wire lsu_load_err;
	wire lsu_store_err;
	wire lsu_addr_incr_req;
	wire [31:0] lsu_addr_last;
	wire [31:0] jump_target_ex;
	wire branch_decision;
	wire ctrl_busy;
	wire if_busy;
	wire lsu_busy;
	wire core_busy;
	wire core_ctrl_firstfetch;
	wire core_busy_int;
	reg core_busy_q;
	wire [4:0] alu_operator_ex;
	wire [31:0] alu_operand_a_ex;
	wire [31:0] alu_operand_b_ex;
	wire [31:0] alu_adder_result_ex;
	wire [31:0] regfile_wdata_ex;
	wire mult_en_ex;
	wire div_en_ex;
	wire [1:0] multdiv_operator_ex;
	wire [1:0] multdiv_signed_mode_ex;
	wire [31:0] multdiv_operand_a_ex;
	wire [31:0] multdiv_operand_b_ex;
	wire csr_access;
	wire [1:0] csr_op;
	wire [11:0] csr_addr;
	wire [31:0] csr_rdata;
	wire [31:0] csr_wdata;
	wire illegal_csr_insn_id;
	wire data_we_ex;
	wire [1:0] data_type_ex;
	wire data_sign_ext_ex;
	wire data_req_ex;
	wire [31:0] data_wdata_ex;
	wire [31:0] regfile_wdata_lsu;
	wire id_in_ready;
	wire ex_valid;
	wire lsu_data_valid;
	wire instr_req_int;
	wire irq_pending;
	wire csr_msip;
	wire csr_mtip;
	wire csr_meip;
	wire [14:0] csr_mfip;
	wire csr_mstatus_mie;
	wire [31:0] csr_mepc;
	wire [31:0] csr_depc;
	wire [((0 &gt;= (PMPNumRegions - 1)) ? ((((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions) * 34) + (((PMPNumRegions - 1) * 34) - 1)) : (((((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions)) * 34) + -1)):((0 &gt;= (PMPNumRegions - 1)) ? ((PMPNumRegions - 1) * 34) : 0)] csr_pmp_addr;
	wire [((0 &gt;= (PMPNumRegions - 1)) ? ((((0 &gt;= (PMPNumRegions - 1)) ? (2 - PMPNumRegions) : PMPNumRegions) * 6) + (((PMPNumRegions - 1) * 6) - 1)) : (((((PMPNumRegions - 1) &gt;= 0) ? PMPNumRegions : (2 - PMPNumRegions)) * 6) + -1)):((0 &gt;= (PMPNumRegions - 1)) ? ((PMPNumRegions - 1) * 6) : 0)] csr_pmp_cfg;
	wire [0:(PMP_NUM_CHAN - 1)] pmp_req_err;
	wire instr_req_out;
	wire data_req_out;
	wire csr_save_if;
	wire csr_save_id;
	wire csr_restore_mret_id;
	wire csr_save_cause;
	wire csr_mtvec_init;
	wire [31:0] csr_mtvec;
	wire [31:0] csr_mtval;
	wire [1:0] priv_mode;
	wire debug_mode;
	wire [2:0] debug_cause;
	wire debug_csr_save;
	wire debug_single_step;
	wire debug_ebreakm;
	wire instr_ret;
	wire instr_ret_compressed;
	wire perf_imiss;
	wire perf_jump;
	wire perf_branch;
	wire perf_tbranch;
	wire perf_load;
	wire perf_store;
	wire illegal_insn_id;
	wire unused_illegal_insn_id;
	wire clk;
	wire clock_en;
	assign core_busy_int = ((if_busy | ctrl_busy) | lsu_busy);
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			core_busy_q &lt;= 1&#39;b0;
		else
			core_busy_q &lt;= core_busy_int;
	assign core_busy = (core_ctrl_firstfetch ? 1&#39;b1 : core_busy_q);
	assign core_sleep_o = ~clock_en;
	assign clock_en = (((core_busy | debug_req_i) | irq_pending) | irq_nm_i);
	prim_clock_gating core_clock_gate_i(
		.clk_i(clk_i),
		.en_i(clock_en),
		.test_en_i(test_en_i),
		.clk_o(clk)
	);
	ibex_if_stage #(
		.DmHaltAddr(DmHaltAddr),
		.DmExceptionAddr(DmExceptionAddr)
	) if_stage_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.boot_addr_i(boot_addr_i),
		.req_i(instr_req_int),
		.instr_req_o(instr_req_out),
		.instr_addr_o(instr_addr_o),
		.instr_gnt_i(instr_gnt_i),
		.instr_rvalid_i(instr_rvalid_i),
		.instr_rdata_i(instr_rdata_i),
		.instr_err_i(instr_err_i),
		.instr_pmp_err_i(pmp_req_err[PMP_I]),
		.instr_valid_id_o(instr_valid_id),
		.instr_new_id_o(instr_new_id),
		.instr_rdata_id_o(instr_rdata_id),
		.instr_rdata_c_id_o(instr_rdata_c_id),
		.instr_is_compressed_id_o(instr_is_compressed_id),
		.instr_fetch_err_o(instr_fetch_err),
		.illegal_c_insn_id_o(illegal_c_insn_id),
		.pc_if_o(pc_if),
		.pc_id_o(pc_id),
		.instr_valid_clear_i(instr_valid_clear),
		.pc_set_i(pc_set),
		.pc_mux_i(pc_mux_id),
		.exc_pc_mux_i(exc_pc_mux_id),
		.exc_cause(exc_cause),
		.jump_target_ex_i(jump_target_ex),
		.csr_mepc_i(csr_mepc),
		.csr_depc_i(csr_depc),
		.csr_mtvec_i(csr_mtvec),
		.csr_mtvec_init_o(csr_mtvec_init),
		.id_in_ready_i(id_in_ready),
		.if_busy_o(if_busy),
		.perf_imiss_o(perf_imiss)
	);
	assign instr_req_o = (instr_req_out &amp; ~pmp_req_err[PMP_I]);
	ibex_id_stage #(
		.RV32E(RV32E),
		.RV32M(RV32M)
	) id_stage_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.test_en_i(test_en_i),
		.fetch_enable_i(fetch_enable_i),
		.ctrl_busy_o(ctrl_busy),
		.core_ctrl_firstfetch_o(core_ctrl_firstfetch),
		.illegal_insn_o(illegal_insn_id),
		.instr_valid_i(instr_valid_id),
		.instr_new_i(instr_new_id),
		.instr_rdata_i(instr_rdata_id),
		.instr_rdata_c_i(instr_rdata_c_id),
		.instr_is_compressed_i(instr_is_compressed_id),
		.branch_decision_i(branch_decision),
		.id_in_ready_o(id_in_ready),
		.instr_valid_clear_o(instr_valid_clear),
		.instr_req_o(instr_req_int),
		.pc_set_o(pc_set),
		.pc_mux_o(pc_mux_id),
		.exc_pc_mux_o(exc_pc_mux_id),
		.exc_cause_o(exc_cause),
		.instr_fetch_err_i(instr_fetch_err),
		.illegal_c_insn_i(illegal_c_insn_id),
		.pc_id_i(pc_id),
		.ex_valid_i(ex_valid),
		.lsu_valid_i(lsu_data_valid),
		.alu_operator_ex_o(alu_operator_ex),
		.alu_operand_a_ex_o(alu_operand_a_ex),
		.alu_operand_b_ex_o(alu_operand_b_ex),
		.mult_en_ex_o(mult_en_ex),
		.div_en_ex_o(div_en_ex),
		.multdiv_operator_ex_o(multdiv_operator_ex),
		.multdiv_signed_mode_ex_o(multdiv_signed_mode_ex),
		.multdiv_operand_a_ex_o(multdiv_operand_a_ex),
		.multdiv_operand_b_ex_o(multdiv_operand_b_ex),
		.csr_access_o(csr_access),
		.csr_op_o(csr_op),
		.csr_save_if_o(csr_save_if),
		.csr_save_id_o(csr_save_id),
		.csr_restore_mret_id_o(csr_restore_mret_id),
		.csr_save_cause_o(csr_save_cause),
		.csr_mtval_o(csr_mtval),
		.illegal_csr_insn_i(illegal_csr_insn_id),
		.data_req_ex_o(data_req_ex),
		.data_we_ex_o(data_we_ex),
		.data_type_ex_o(data_type_ex),
		.data_sign_ext_ex_o(data_sign_ext_ex),
		.data_wdata_ex_o(data_wdata_ex),
		.lsu_addr_incr_req_i(lsu_addr_incr_req),
		.lsu_addr_last_i(lsu_addr_last),
		.lsu_load_err_i(lsu_load_err),
		.lsu_store_err_i(lsu_store_err),
		.csr_mstatus_mie_i(csr_mstatus_mie),
		.csr_msip_i(csr_msip),
		.csr_mtip_i(csr_mtip),
		.csr_meip_i(csr_meip),
		.csr_mfip_i(csr_mfip),
		.irq_pending_i(irq_pending),
		.irq_nm_i(irq_nm_i),
		.debug_mode_o(debug_mode),
		.debug_cause_o(debug_cause),
		.debug_csr_save_o(debug_csr_save),
		.debug_req_i(debug_req_i),
		.debug_single_step_i(debug_single_step),
		.debug_ebreakm_i(debug_ebreakm),
		.regfile_wdata_lsu_i(regfile_wdata_lsu),
		.regfile_wdata_ex_i(regfile_wdata_ex),
		.csr_rdata_i(csr_rdata),
		.perf_jump_o(perf_jump),
		.perf_branch_o(perf_branch),
		.perf_tbranch_o(perf_tbranch),
		.instr_ret_o(instr_ret),
		.instr_ret_compressed_o(instr_ret_compressed)
	);
	assign unused_illegal_insn_id = illegal_insn_id;
	ibex_ex_block #(.RV32M(RV32M)) ex_block_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.alu_operator_i(alu_operator_ex),
		.alu_operand_a_i(alu_operand_a_ex),
		.alu_operand_b_i(alu_operand_b_ex),
		.multdiv_operator_i(multdiv_operator_ex),
		.mult_en_i(mult_en_ex),
		.div_en_i(div_en_ex),
		.multdiv_signed_mode_i(multdiv_signed_mode_ex),
		.multdiv_operand_a_i(multdiv_operand_a_ex),
		.multdiv_operand_b_i(multdiv_operand_b_ex),
		.alu_adder_result_ex_o(alu_adder_result_ex),
		.regfile_wdata_ex_o(regfile_wdata_ex),
		.jump_target_o(jump_target_ex),
		.branch_decision_o(branch_decision),
		.ex_valid_o(ex_valid)
	);
	assign data_req_o = (data_req_out &amp; ~pmp_req_err[PMP_D]);
	ibex_load_store_unit load_store_unit_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.data_req_o(data_req_out),
		.data_gnt_i(data_gnt_i),
		.data_rvalid_i(data_rvalid_i),
		.data_err_i(data_err_i),
		.data_pmp_err_i(pmp_req_err[PMP_D]),
		.data_addr_o(data_addr_o),
		.data_we_o(data_we_o),
		.data_be_o(data_be_o),
		.data_wdata_o(data_wdata_o),
		.data_rdata_i(data_rdata_i),
		.data_we_ex_i(data_we_ex),
		.data_type_ex_i(data_type_ex),
		.data_wdata_ex_i(data_wdata_ex),
		.data_sign_ext_ex_i(data_sign_ext_ex),
		.data_rdata_ex_o(regfile_wdata_lsu),
		.data_req_ex_i(data_req_ex),
		.adder_result_ex_i(alu_adder_result_ex),
		.addr_incr_req_o(lsu_addr_incr_req),
		.addr_last_o(lsu_addr_last),
		.data_valid_o(lsu_data_valid),
		.load_err_o(lsu_load_err),
		.store_err_o(lsu_store_err),
		.busy_o(lsu_busy)
	);
	assign csr_wdata = alu_operand_a_ex;
	assign csr_addr = (csr_access ? alu_operand_b_ex[11:0] : 12&#39;b0);
	assign perf_load = ((data_req_o &amp; data_gnt_i) &amp; ~data_we_o);
	assign perf_store = ((data_req_o &amp; data_gnt_i) &amp; data_we_o);
	ibex_cs_registers #(
		.MHPMCounterNum(MHPMCounterNum),
		.MHPMCounterWidth(MHPMCounterWidth),
		.PMPGranularity(PMPGranularity),
		.PMPNumRegions(PMPNumRegions),
		.RV32E(RV32E),
		.RV32M(RV32M)
	) cs_registers_i(
		.clk_i(clk),
		.rst_ni(rst_ni),
		.hart_id_i(hart_id_i),
		.priv_mode_o(priv_mode),
		.csr_mtvec_o(csr_mtvec),
		.csr_mtvec_init_i(csr_mtvec_init),
		.boot_addr_i(boot_addr_i),
		.csr_access_i(csr_access),
		.csr_addr_i(csr_addr),
		.csr_wdata_i(csr_wdata),
		.csr_op_i(csr_op),
		.csr_rdata_o(csr_rdata),
		.irq_software_i(irq_software_i),
		.irq_timer_i(irq_timer_i),
		.irq_external_i(irq_external_i),
		.irq_fast_i(irq_fast_i),
		.irq_pending_o(irq_pending),
		.csr_msip_o(csr_msip),
		.csr_mtip_o(csr_mtip),
		.csr_meip_o(csr_meip),
		.csr_mfip_o(csr_mfip),
		.csr_mstatus_mie_o(csr_mstatus_mie),
		.csr_mepc_o(csr_mepc),
		.csr_pmp_cfg_o(csr_pmp_cfg),
		.csr_pmp_addr_o(csr_pmp_addr),
		.csr_depc_o(csr_depc),
		.debug_mode_i(debug_mode),
		.debug_cause_i(debug_cause),
		.debug_csr_save_i(debug_csr_save),
		.debug_single_step_o(debug_single_step),
		.debug_ebreakm_o(debug_ebreakm),
		.pc_if_i(pc_if),
		.pc_id_i(pc_id),
		.csr_save_if_i(csr_save_if),
		.csr_save_id_i(csr_save_id),
		.csr_restore_mret_i(csr_restore_mret_id),
		.csr_save_cause_i(csr_save_cause),
		.csr_mcause_i(exc_cause),
		.csr_mtval_i(csr_mtval),
		.illegal_csr_insn_o(illegal_csr_insn_id),
		.instr_new_id_i(instr_new_id),
		.instr_ret_i(instr_ret),
		.instr_ret_compressed_i(instr_ret_compressed),
		.imiss_i(perf_imiss),
		.pc_set_i(pc_set),
		.jump_i(perf_jump),
		.branch_i(perf_branch),
		.branch_taken_i(perf_tbranch),
		.mem_load_i(perf_load),
		.mem_store_i(perf_store),
		.lsu_busy_i(lsu_busy)
	);
	generate
		if (PMPEnable) begin : g_pmp
			wire [((PMP_NUM_CHAN * 34) + -1):0] pmp_req_addr;
			wire [((PMP_NUM_CHAN * 2) + -1):0] pmp_req_type;
			assign pmp_req_addr[(((PMP_NUM_CHAN - 1) - PMP_I) * 34)+:34] = {2&#39;b00, instr_addr_o[31:0]};
			assign pmp_req_type[(((PMP_NUM_CHAN - 1) - PMP_I) * 2)+:2] = PMP_ACC_EXEC;
			assign pmp_req_addr[(((PMP_NUM_CHAN - 1) - PMP_D) * 34)+:34] = {2&#39;b00, data_addr_o[31:0]};
			assign pmp_req_type[(((PMP_NUM_CHAN - 1) - PMP_D) * 2)+:2] = (data_we_o ? PMP_ACC_WRITE : PMP_ACC_READ);
			ibex_pmp #(
				.PMPGranularity(PMPGranularity),
				.PMPNumChan(PMP_NUM_CHAN),
				.PMPNumRegions(PMPNumRegions)
			) pmp_i(
				.clk_i(clk),
				.rst_ni(rst_ni),
				.csr_pmp_cfg_i(csr_pmp_cfg),
				.csr_pmp_addr_i(csr_pmp_addr),
				.priv_mode_i(priv_mode),
				.pmp_req_addr_i(pmp_req_addr),
				.pmp_req_type_i(pmp_req_type),
				.pmp_req_err_o(pmp_req_err)
			);
		end
		else begin : g_no_pmp
			assign pmp_req_err[PMP_I] = 1&#39;b0;
			assign pmp_req_err[PMP_D] = 1&#39;b0;
		end
	endgenerate
endmodule
module ibex_register_file (
	clk_i,
	rst_ni,
	test_en_i,
	raddr_a_i,
	rdata_a_o,
	raddr_b_i,
	rdata_b_o,
	waddr_a_i,
	wdata_a_i,
	we_a_i
);
	parameter RV32E = 0;
	parameter [31:0] DataWidth = 32;
	input wire clk_i;
	input wire rst_ni;
	input wire test_en_i;
	input wire [4:0] raddr_a_i;
	output wire [(DataWidth - 1):0] rdata_a_o;
	input wire [4:0] raddr_b_i;
	output wire [(DataWidth - 1):0] rdata_b_o;
	input wire [4:0] waddr_a_i;
	input wire [(DataWidth - 1):0] wdata_a_i;
	input wire we_a_i;
	localparam [31:0] ADDR_WIDTH = (RV32E ? 4 : 5);
	localparam [31:0] NUM_WORDS = (2 ** ADDR_WIDTH);
	wire [(((NUM_WORDS - 1) &gt;= 0) ? (((DataWidth - 1) &gt;= 0) ? (((((NUM_WORDS - 1) &gt;= 0) ? NUM_WORDS : (2 - NUM_WORDS)) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) + -1) : (((((NUM_WORDS - 1) &gt;= 0) ? NUM_WORDS : (2 - NUM_WORDS)) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth)) + ((DataWidth - 1) - 1))) : (((DataWidth - 1) &gt;= 0) ? ((((0 &gt;= (NUM_WORDS - 1)) ? (2 - NUM_WORDS) : NUM_WORDS) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) + (((NUM_WORDS - 1) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) - 1)) : ((((0 &gt;= (NUM_WORDS - 1)) ? (2 - NUM_WORDS) : NUM_WORDS) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth)) + (((DataWidth - 1) + ((NUM_WORDS - 1) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth))) - 1)))):(((NUM_WORDS - 1) &gt;= 0) ? (((DataWidth - 1) &gt;= 0) ? 0 : (DataWidth - 1)) : (((DataWidth - 1) &gt;= 0) ? ((NUM_WORDS - 1) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) : ((DataWidth - 1) + ((NUM_WORDS - 1) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth)))))] rf_reg;
	reg [(((NUM_WORDS - 1) &gt;= 1) ? (((DataWidth - 1) &gt;= 0) ? (((((NUM_WORDS - 1) &gt;= 1) ? (NUM_WORDS - 1) : (3 - NUM_WORDS)) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) + ((((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth)) - 1)) : (((((NUM_WORDS - 1) &gt;= 1) ? (NUM_WORDS - 1) : (3 - NUM_WORDS)) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth)) + (((DataWidth - 1) + ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth)) - 1))) : (((DataWidth - 1) &gt;= 0) ? ((((1 &gt;= (NUM_WORDS - 1)) ? (3 - NUM_WORDS) : (NUM_WORDS - 1)) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) + (((NUM_WORDS - 1) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) - 1)) : ((((1 &gt;= (NUM_WORDS - 1)) ? (3 - NUM_WORDS) : (NUM_WORDS - 1)) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth)) + (((DataWidth - 1) + ((NUM_WORDS - 1) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth))) - 1)))):(((NUM_WORDS - 1) &gt;= 1) ? (((DataWidth - 1) &gt;= 0) ? (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth)) : ((DataWidth - 1) + ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth))) : (((DataWidth - 1) &gt;= 0) ? ((NUM_WORDS - 1) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))) : ((DataWidth - 1) + ((NUM_WORDS - 1) * ((0 &gt;= (DataWidth - 1)) ? (2 - DataWidth) : DataWidth)))))] rf_reg_tmp;
	reg [(NUM_WORDS - 1):1] we_a_dec;
	always @(*) begin : we_a_decoder
		begin : sv2v_autoblock_39
			reg [31:0] i;
			for (i = 1; (i &lt; NUM_WORDS); i = (i + 1))
				we_a_dec[i] = ((waddr_a_i == sv2v_cast_5(i)) ? we_a_i : 1&#39;b0);
		end
	end
	always @(posedge clk_i or negedge rst_ni)
		if (!rst_ni)
			rf_reg_tmp &lt;= {(((NUM_WORDS - 1) &gt;= 1) ? (NUM_WORDS - 1) : (3 - NUM_WORDS)) {1&#39;sb0}};
		else begin : sv2v_autoblock_40
			reg signed [31:0] r;
			for (r = 1; (r &lt; NUM_WORDS); r = (r + 1))
				if (we_a_dec[r])
					rf_reg_tmp[((((DataWidth - 1) &gt;= 0) ? 0 : (DataWidth - 1)) + ((((NUM_WORDS - 1) &gt;= 1) ? r : (1 - (r - (NUM_WORDS - 1)))) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))))+:(((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))] &lt;= wdata_a_i;
		end
	assign rf_reg[((((DataWidth - 1) &gt;= 0) ? 0 : (DataWidth - 1)) + ((((NUM_WORDS - 1) &gt;= 0) ? 0 : (NUM_WORDS - 1)) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))))+:(((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))] = 1&#39;sb0;
	assign rf_reg[(((((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth)) + ((((NUM_WORDS - 1) &gt;= 1) ? (NUM_WORDS - 1) : (3 - NUM_WORDS)) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth)))) - 1):(((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))] = rf_reg_tmp[(((((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth)) + ((((NUM_WORDS - 1) &gt;= 1) ? (NUM_WORDS - 1) : (3 - NUM_WORDS)) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth)))) - 1):(((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))];
	assign rdata_a_o = rf_reg[((((DataWidth - 1) &gt;= 0) ? 0 : (DataWidth - 1)) + ((((NUM_WORDS - 1) &gt;= 0) ? raddr_a_i : (0 - (raddr_a_i - (NUM_WORDS - 1)))) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))))+:(((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))];
	assign rdata_b_o = rf_reg[((((DataWidth - 1) &gt;= 0) ? 0 : (DataWidth - 1)) + ((((NUM_WORDS - 1) &gt;= 0) ? raddr_b_i : (0 - (raddr_b_i - (NUM_WORDS - 1)))) * (((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))))+:(((DataWidth - 1) &gt;= 0) ? DataWidth : (2 - DataWidth))];
	function automatic [4:0] sv2v_cast_5;
		input reg [4:0] inp;
		sv2v_cast_5 = inp;
	endfunction
endmodule

</pre>
</body>